"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkerMiddleware=exports.executeCheckers=exports.registerChecker=exports.checkerList=exports.canExtendSession=void 0;const lodash_1=__importDefault(require("lodash")),config_1=__importDefault(require("../../config")),canExtendSession=e=>!(!config_1.default.auth.session.autoExtend||e.skipSessionExtend||e.mergedParams?._refresh||lodash_1.default.includes(e.path,config_1.default.auth.session.ignoredRoute));exports.canExtendSession=canExtendSession,exports.checkerList=[];const registerChecker=e=>{exports.checkerList.push(e)};exports.registerChecker=registerChecker;const executeCheckers=async(e,s)=>{for(let r=0;r<exports.checkerList.length;r++){const t=await exports.checkerList[r](e,s);if(t.passed)return t}};exports.executeCheckers=executeCheckers;const checkerMiddleware=async(e,s)=>{await s();const r=e._passportAfterChecker;r&&await r(e)};exports.checkerMiddleware=checkerMiddleware,exports.default=exports.checkerMiddleware;