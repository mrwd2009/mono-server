"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pick=exports.parse=void 0;const regex=/((([a-zA-Z]+(-[a-zA-Z0-9]+){0,2})|\*)(;q=[0-1](\.[0-9]+)?)?)*/g,isString=i=>typeof i=="string",parse=i=>(i||"").match(regex)?.map(function(e){if(!e)return;const r=e.split(";"),o=r[0].split("-"),t=o.length===3;return{code:o[0],script:t?o[1]:null,region:t?o[2]:o[1],quality:r[1]?parseFloat(r[1].split("=")[1]):1}}).filter(e=>e).sort((e,r)=>r.quality-e.quality);exports.parse=parse;const pick=(i,n,e)=>{if(e=e||{},!i||!i.length||!n)return null;isString(n)?n=(0,exports.parse)(n):n=[];const r=i.map(function(o){const t=o.split("-"),l=t.length===3;return{code:t[0],script:l?t[1]:null,region:l?t[2]:t[1]}});for(let o=0;o<n.length;o++){const t=n[o],l=t.code.toLowerCase(),c=t.region?t.region.toLowerCase():t.region,p=t.script?t.script.toLowerCase():t.script;for(let s=0;s<r.length;s++){const u=r[s].code.toLowerCase(),f=r[s].script?r[s].script.toLowerCase():r[s].script,d=r[s].region?r[s].region.toLowerCase():r[s].region;if(l===u&&(e.loose||!p||p===f)&&(e.loose||!c||c===d))return i[s]}}return null};exports.pick=pick,exports.default=exports.parse;