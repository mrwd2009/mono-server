import{u as C,aw as b,ay as v,l as x,r as w,az as A,h as i,F as S,j as t,P as T,s as c,b4 as j,bO as k,aB as I,b6 as P,b7 as V,aC as E,aY as O,bP as K}from"./index.0cb2e516.js";import{u as U,F as z}from"./index.esm.6af887f8.js";import{F as H}from"./FormAccess.bee4f1e0.js";import{V as L}from"./ViewHeader.2586557f.js";import{K as $}from"./KeycloakTextInput.b4d5b2db.js";import{C as B,a as G}from"./ClientDescription.e967f34f.js";import{F as N}from"./FileUploadForm.9e6f7b27.js";import{L as R}from"./CodeEditor.16ebafa0.js";import{a as W,A as D}from"./FormGroup.3d5f3f16.js";import"./copy-icon.cf10e1f5.js";import"./HelpItem.e440d5db.js";import"./GridItem.0db472b0.js";import"./Text.c38ffb52.js";import"./Checkbox.2dc73ed3.js";import"./check.51c67984.js";import"./KeycloakTextArea.f5e2440a.js";import"./FileUpload.18e1e495.js";import"./Modal.6593dfcc.js";import"./EmptyStateBody.a0363fe4.js";import"./EmptyStateSecondaryActions.1a804d56.js";const J=a=>a.startsWith("<");function he(){const{t:a}=C("clients"),m=b(),{adminClient:s}=v(),{realm:o}=x(),n=U({shouldUnregister:!1}),{register:p,handleSubmit:d,setValue:u}=n,[h,f]=w.exports.useState({}),{addAlert:g,addError:l}=A(),y=async r=>{try{const e=await F(r);I(e,u),f(e)}catch(e){l("clients:importParseError",e)}};async function F(r){if(!J(r))return JSON.parse(r);const e=await fetch(`${P(s.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:r,headers:V(await s.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return i(S,{children:[t(L,{titleKey:"clients:importClient",subKey:"clients:clientsExplain"}),t(T,{variant:"light",children:t(H,{isHorizontal:!0,onSubmit:d(async r=>{try{const e=await s.clients.create({...h,...E(r)});g(a("clientImportSuccess"),O.success),m(K({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clients:clientImportError",e)}}),role:"manage-clients",children:i(z,{...n,children:[t(N,{id:"realm-file",language:R.json,extension:".json,.xml",helpText:"common-help:helpFileUploadClient",onChange:y}),t(B,{hasConfigureAccess:!0}),t(W,{label:a("common:type"),fieldId:"kc-type",children:t($,{type:"text",id:"kc-type",name:"protocol",isReadOnly:!0,ref:p()})}),t(G,{unWrap:!0}),i(D,{children:[t(c,{variant:"primary",type:"submit",children:a("common:save")}),t(c,{variant:"link",component:r=>t(j,{...r,to:k({realm:o})}),children:a("common:cancel")})]})]})})})]})}export{he as default};
