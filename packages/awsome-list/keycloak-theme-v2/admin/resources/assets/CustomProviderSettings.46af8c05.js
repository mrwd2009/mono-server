import{u as D,bA as E,aw as N,ay as j,az as w,l as H,r as O,g as _,a_ as v,h as c,j as r,P as V,s as y,b4 as q,cI as g,aC as R,aY as U,aB as z}from"./index.0cb2e516.js";import{u as B,F as h}from"./index.esm.6af887f8.js";import{H as G}from"./HelpItem.e440d5db.js";import{F as K}from"./FormAccess.bee4f1e0.js";import{K as L}from"./KeycloakTextInput.b4d5b2db.js";import{S as W}from"./Header.d933d0e7.js";import{E as Y}from"./ExtendedHeader.c8ef22bd.js";import{D as $}from"./DynamicComponents.3dd18b3b.js";import{a as J,A as M}from"./FormGroup.3d5f3f16.js";import"./copy-icon.cf10e1f5.js";import"./GridItem.0db472b0.js";import"./Text.c38ffb52.js";import"./useToggle.8c992bea.js";import"./isEqual.b67f23a3.js";import"./Select.5a6b39aa.js";import"./check.51c67984.js";import"./star-icon.97692015.js";import"./NumberInput.331c7b85.js";import"./plus-icon.407671b4.js";import"./ConfirmDialog.f8013bbb.js";import"./Modal.6593dfcc.js";import"./ViewHeader.2586557f.js";import"./KeycloakTextArea.f5e2440a.js";import"./AddRoleMappingModal.4adc845a.js";import"./KeycloakDataTable.4e517788.js";import"./TableToolbar.c27bcd3c.js";import"./grip-vertical-icon.1b75ab8f.js";import"./Checkbox.2dc73ed3.js";import"./plus-circle-icon.32cdf4dc.js";import"./EmptyStateBody.a0363fe4.js";import"./EmptyStateSecondaryActions.1a804d56.js";import"./useLocaleSort.84ea7ec0.js";import"./resource.df4d2bbd.js";import"./joinPath.69b856b1.js";import"./filter-icon.fec9f70e.js";import"./KeyValueInput.cb1ae3e8.js";import"./FlexItem.308d9f82.js";import"./minus-circle-icon.de526f05.js";import"./CodeEditor.16ebafa0.js";import"./ClientSelect.a855e118.js";import"./MultiLineInput.e27bc560.js";import"./GroupPickerDialog.f5430678.js";import"./DataListItemRow.8f458244.js";import"./data-list.f7ff2ea7.js";import"./FileUpload.18e1e495.js";import"./PasswordInput.34ff6dd3.js";function Ge(){const{t:o}=D("user-federation"),{id:t,providerId:s}=E(),S=N(),a=B({mode:"onChange"}),{register:b,errors:d,reset:k,setValue:F,handleSubmit:l,formState:{isDirty:I}}=a,{adminClient:i}=j(),{addAlert:A,addError:x}=w(),{realm:m}=H(),[P,T]=O.exports.useState(""),C=(_().componentTypes?.["org.keycloak.storage.UserStorageProvider"]||[]).find(e=>e.id===s);v(async()=>{if(t)return await i.components.findOne({id:t})},e=>{if(e)z(e,F);else if(t)throw new Error(o("common:notFound"))},[]),v(()=>i.realms.findOne({realm:m}),e=>T(e?.id),[]);const u=async e=>{const f=R({...e,config:Object.fromEntries(Object.entries(e.config||{}).map(([n,p])=>[n,Array.isArray(p)?p:[p]])),providerId:s,providerType:"org.keycloak.storage.UserStorageProvider",parentId:P});try{t?await i.components.update({id:t},f):(await i.components.create(f),S(g({realm:m}))),k({...e}),A(o(t?"saveSuccess":"createSuccess"),U.success)}catch(n){x(`user-federation:${t?"saveError":"createError"}`,n)}};return c(h,{...a,children:[r(Y,{provider:s,save:()=>l(u)()}),r(V,{variant:"light",children:c(K,{role:"manage-realm",isHorizontal:!0,className:"keycloak__user-federation__custom-form",onSubmit:l(u),children:[r(J,{label:o("consoleDisplayName"),labelIcon:r(G,{helpText:"user-federation-help:consoleDisplayNameHelp",fieldLabelId:"user-federation:consoleDisplayName"}),helperTextInvalid:o("validateName"),validated:d.name?"error":"default",fieldId:"kc-console-display-name",isRequired:!0,children:r(L,{isRequired:!0,type:"text",id:"kc-console-display-name",name:"name",ref:b({required:!0}),"data-testid":"console-name",validated:d.name?"error":"default"})}),r(h,{...a,children:r($,{properties:C?.properties||[]})}),r(W,{form:a,unWrap:!0}),c(M,{children:[r(y,{isDisabled:!I,variant:"primary",type:"submit","data-testid":"custom-save",children:o("common:save")}),r(y,{variant:"link",component:e=>r(q,{...e,to:g({realm:m})}),"data-testid":"custom-cancel",children:o("common:cancel")})]})]})})]})}export{Ge as default};
