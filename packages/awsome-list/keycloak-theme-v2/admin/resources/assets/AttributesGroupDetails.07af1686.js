import{u as T,l as k,aw as v,bA as H,r as b,h as u,F as A,j as e,P as G,T as P,s as g,b4 as D,cN as h}from"./index.0cb2e516.js";import{u as j,F as K}from"./index.esm.6af887f8.js";import{K as U}from"./KeyValueInput.cb1ae3e8.js";import{F as L}from"./FormAccess.bee4f1e0.js";import{H as d}from"./HelpItem.e440d5db.js";import{K as c}from"./KeycloakTextInput.b4d5b2db.js";import{V as O}from"./ViewHeader.2586557f.js";import{u as S,U as V}from"./UserProfileContext.c39a7cda.js";/* empty css                               */import{a as p,A as q}from"./FormGroup.3d5f3f16.js";import{T as w}from"./Text.c38ffb52.js";import"./FlexItem.308d9f82.js";import"./minus-circle-icon.de526f05.js";import"./plus-circle-icon.32cdf4dc.js";import"./copy-icon.cf10e1f5.js";import"./GridItem.0db472b0.js";function R(t){return Object.entries(t).reduce((r,[s,n])=>typeof n=="string"?[...r,{key:s,value:n}]:[...r],[])}function E(t){return Object.fromEntries(t.filter(r=>r.key.length>0).map(r=>[r.key,r.value]))}const y={annotations:[{key:"",value:""}],displayDescription:"",displayHeader:"",name:""};function N(){const{t}=T(),{realm:r}=k(),{config:s,save:n}=S(),x=v(),F=H(),a=j({defaultValues:y,shouldUnregister:!1}),i=b.exports.useMemo(()=>s?.groups?.find(({name:o})=>o===F.name),[s?.groups]);b.exports.useEffect(()=>{if(!i)return;const o=i.annotations?R(i.annotations):[];a.reset({...y,...i,annotations:o})},[i]);const I=async o=>{if(!s)return;const l=[...s.groups??[]],m=i?l.indexOf(i):-1,f={...o,annotations:E(o.annotations)};m===-1?l.push(f):l[m]=f,await n({...s,groups:l})&&x(h({realm:r,tab:"attributes-group"}))};return u(A,{children:[e(O,{titleKey:i?"attributes-group:editGroupText":"attributes-group:createGroupText",divider:!0}),e(G,{variant:"light",onSubmit:a.handleSubmit(I),children:u(L,{isHorizontal:!0,role:"manage-realm",children:[u(p,{label:t("attributes-group:nameField"),fieldId:"kc-name",isRequired:!0,helperTextInvalid:t("common:required"),validated:a.errors.name?"error":"default",labelIcon:e(d,{helpText:"attributes-group:nameHint",fieldLabelId:"attributes-group:nameField"}),children:[e(c,{ref:a.register({required:!0}),type:"text",id:"kc-name",name:"name",isReadOnly:!!i}),!!i&&e("input",{type:"hidden",ref:a.register(),name:"name"})]}),e(p,{label:t("attributes-group:displayHeaderField"),fieldId:"kc-display-header",labelIcon:e(d,{helpText:"attributes-group:displayHeaderHint",fieldLabelId:"attributes-group:displayHeaderField"}),children:e(c,{ref:a.register(),type:"text",id:"kc-display-header",name:"displayHeader"})}),e(p,{label:t("attributes-group:displayDescriptionField"),fieldId:"kc-display-description",labelIcon:e(d,{helpText:"attributes-group:displayDescriptionHint",fieldLabelId:"attributes-group:displayDescriptionField"}),children:e(c,{ref:a.register(),type:"text",id:"kc-display-description",name:"displayDescription"})}),e(P,{children:e(w,{component:"h2",children:t("attributes-group:annotationsText")})}),e(p,{label:t("attributes-group:annotationsText"),fieldId:"kc-annotations",children:e(K,{...a,children:e(U,{name:"annotations"})})}),u(q,{children:[e(g,{variant:"primary",type:"submit",children:t("common:save")}),e(g,{variant:"link",component:o=>e(D,{...o,to:h({realm:r,tab:"attributes-group"})}),children:t("common:cancel")})]})]})})]})}const oe=()=>e(V,{children:e(N,{})});export{oe as default};
