import{u as g,r as x,h as p,F as k,j as e,av as a,bA as E}from"./index.0cb2e516.js";import{a as S,b as m,C as M}from"./index.esm.6af887f8.js";import{T as u,S as v}from"./discovery-settings.18f66d94.js";import{K as I}from"./KeycloakTextInput.b4d5b2db.js";import{H as U}from"./HelpItem.e440d5db.js";import{E as D}from"./ExpandableSection.ed768772.js";import{a as f}from"./FormGroup.3d5f3f16.js";import{S as T,b as q,a as w}from"./Select.5a6b39aa.js";import{R as j,D as z}from"./DisplayOrder.76153bb4.js";import{C as F}from"./ClientIdSecret.0917a328.js";const R=["plain","S256"],_=({readOnly:t})=>{const{t:i}=g("identity-providers"),[l,r]=x.exports.useState(!1),{register:n,control:o,formState:{errors:d}}=S(),h=m({control:o,name:"config.validateSignature"}),s=m({control:o,name:"config.useJwksUrl"}),b=m({control:o,name:"config.pkceEnabled"});return p("div",{className:"pf-c-form pf-m-horizontal",children:[e(f,{label:i("authorizationUrl"),fieldId:"kc-authorization-url",isRequired:!0,validated:d.config?.authorizationUrl?a.error:a.default,helperTextInvalid:i("common:required"),children:e(I,{type:"text","data-testid":"authorizationUrl",id:"kc-authorization-url",name:"config.authorizationUrl",ref:n({required:!0}),validated:d.config?.authorizationUrl?a.error:a.default,isReadOnly:t})}),e(f,{label:i("tokenUrl"),fieldId:"tokenUrl",isRequired:!0,validated:d.config?.tokenUrl?a.error:a.default,helperTextInvalid:i("common:required"),children:e(I,{type:"text",id:"tokenUrl","data-testid":"tokenUrl",name:"config.tokenUrl",ref:n({required:!0}),validated:d.config?.tokenUrl?a.error:a.default,isReadOnly:t})}),e(u,{field:"config.logoutUrl",label:"logoutUrl",isReadOnly:t}),e(u,{field:"config.userInfoUrl",label:"userInfoUrl",isReadOnly:t}),e(u,{field:"config.issuer",label:"issuer",isReadOnly:t}),e(v,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),h==="true"&&p(k,{children:[e(v,{field:"config.useJwksUrl",label:"useJwksUrl","data-testid":"useJwksUrl",isReadOnly:t}),s==="true"&&e(u,{field:"config.jwksUrl",label:"jwksUrl",isReadOnly:t})]}),e(v,{field:"config.pkceEnabled",label:"pkceEnabled",isReadOnly:t}),b==="true"&&e(f,{className:"pf-u-pb-3xl",label:i("pkceMethod"),labelIcon:e(U,{helpText:"identity-providers-help:pkceMethod",fieldLabelId:"identity-providers:pkceMethod"}),fieldId:"pkceMethod",children:e(M,{name:"config.pkceMethod",defaultValue:R[0],control:o,render:({onChange:O,value:y})=>e(T,{toggleId:"pkceMethod",required:!0,direction:"down",onToggle:()=>r(!l),onSelect:(c,C)=>{O(C),r(!1)},selections:i(`${y}`),variant:q.single,"aria-label":i("pkceMethod"),isOpen:l,children:R.map(c=>e(w,{selected:c===y,value:c,children:i(`${c}`)},c))})})})]})},B=({readOnly:t})=>{const{t:i}=g("identity-providers"),[l,r]=x.exports.useState(!1);return p(k,{children:[t&&e(D,{className:"keycloak__discovery-settings__metadata",toggleText:i(l?"hideMetaData":"showMetaData"),onToggle:()=>r(!l),isExpanded:l,children:e(_,{readOnly:t})}),!t&&e(_,{readOnly:t})]})},Q=({id:t})=>{const{t:i}=g("identity-providers"),{tab:l}=E(),{register:r,formState:{errors:n}}=S();return p(k,{children:[e(j,{id:t}),e(f,{label:i("alias"),labelIcon:e(U,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),fieldId:"alias",isRequired:!0,validated:n.alias?a.error:a.default,helperTextInvalid:i("common:required"),children:e(I,{isReadOnly:l==="settings",isRequired:!0,type:"text",id:"alias","data-testid":"alias",name:"alias",validated:n.alias?a.error:a.default,ref:r({required:!0})})}),e(u,{field:"displayName",label:"displayName"}),e(z,{})]})},A=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"],X=({create:t=!0})=>{const{t:i}=g("identity-providers"),{control:l}=S(),[r,n]=x.exports.useState(!1),o=m({control:l,name:"config.clientAuthMethod"});return p(k,{children:[e(f,{label:i("clientAuthentication"),labelIcon:e(U,{helpText:"identity-providers-help:clientAuthentication",fieldLabelId:"identity-providers:clientAuthentication"}),fieldId:"clientAuthentication",children:e(M,{name:"config.clientAuthMethod",defaultValue:A[0],control:l,render:({onChange:d,value:h})=>e(T,{toggleId:"clientAuthentication",required:!0,onToggle:()=>n(!r),onSelect:(s,b)=>{d(b),n(!1)},selections:h,variant:q.single,"aria-label":i("clientAuthentication"),isOpen:r,children:A.map(s=>e(w,{selected:s===h,value:s,children:i(`clientAuthentications.${s}`)},s))})})}),e(F,{secretRequired:o!=="private_key_jwt",create:t})]})};export{B as D,Q as O,X as a};
