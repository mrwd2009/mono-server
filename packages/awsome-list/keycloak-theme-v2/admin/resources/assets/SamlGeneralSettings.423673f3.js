import{u as A,r as b,j as e,h as v,av as p,F as C,l as M,m as K}from"./index.0cb2e516.js";import{a as D,b as R,C as y}from"./index.esm.6af887f8.js";import{H as l}from"./HelpItem.e440d5db.js";import{S as o,T as P}from"./discovery-settings.18f66d94.js";import{K as m}from"./KeycloakTextInput.b4d5b2db.js";import{E as B}from"./ExpandableSection.ed768772.js";import{a as r}from"./FormGroup.3d5f3f16.js";import{S as x,b as T,a}from"./Select.5a6b39aa.js";import{R as H,D as j}from"./DisplayOrder.76153bb4.js";import{F as V}from"./ViewHeader.2586557f.js";const L=({readOnly:t})=>{const{t:i}=A("identity-providers"),{t:n}=A("identity-providers-help"),{register:d,control:s,formState:{errors:S}}=D(),[h,I]=b.exports.useState(!1),[_,k]=b.exports.useState(!1),[E,w]=b.exports.useState(!1),[F,N]=b.exports.useState(!1),q=R({control:s,name:"config.wantAuthnRequestsSigned"}),U=R({control:s,name:"config.validateSignature"}),O=R({control:s,name:"config.principalType"});return v("div",{className:"pf-c-form pf-m-horizontal",children:[e(r,{label:i("serviceProviderEntityId"),fieldId:"kc-saml-service-provider-entity-id",labelIcon:e(l,{helpText:"identity-providers-help:serviceProviderEntityId",fieldLabelId:"identity-providers:serviceProviderEntityId"}),children:e(m,{type:"text",name:"config.entityId","data-testid":"serviceProviderEntityId",id:"kc-saml-service-provider-entity-id",ref:d()})}),e(r,{label:i("identityProviderEntityId"),fieldId:"kc-identity-provider-entity-id",labelIcon:e(l,{helpText:"identity-providers-help:identityProviderEntityId",fieldLabelId:"identity-providers:identityProviderEntityId"}),children:e(m,{type:"text",name:"config.idpEntityId","data-testid":"identityProviderEntityId",id:"kc-identity-provider-entity-id",ref:d()})}),e(r,{label:i("ssoServiceUrl"),labelIcon:e(l,{helpText:n("ssoServiceUrl"),fieldLabelId:"identity-providers:ssoServiceUrl"}),fieldId:"kc-sso-service-url",isRequired:!0,validated:S.config?.authorizationUrl?p.error:p.default,helperTextInvalid:i("common:required"),children:e(m,{type:"text","data-testid":"sso-service-url",id:"kc-sso-service-url",name:"config.singleSignOnServiceUrl",ref:d({required:!0}),validated:S.config?.singleSignOnServiceUrl?p.error:p.default,isReadOnly:t})}),e(r,{label:i("singleLogoutServiceUrl"),labelIcon:e(l,{helpText:n("singleLogoutServiceUrl"),fieldLabelId:"identity-providers:singleLogoutServiceUrl"}),fieldId:"single-logout-service-url",validated:S.config?.singleLogoutServiceUrl?p.error:p.default,helperTextInvalid:i("common:required"),children:e(m,{type:"text",id:"single-logout-service-url",name:"config.singleLogoutServiceUrl",ref:d,isReadOnly:t})}),e(o,{field:"config.backchannelSupported",label:"backchannelLogout",isReadOnly:t}),e(r,{label:i("nameIdPolicyFormat"),labelIcon:e(l,{helpText:n("nameIdPolicyFormat"),fieldLabelId:"identity-providers:nameIdPolicyFormat"}),fieldId:"kc-nameIdPolicyFormat",helperTextInvalid:i("common:required"),children:e(y,{name:"config.nameIDPolicyFormat",defaultValue:i("persistent"),control:s,render:({onChange:u,value:g})=>v(x,{toggleId:"kc-nameIdPolicyFormat",onToggle:c=>I(c),isOpen:h,onSelect:(c,f)=>{u(f),I(!1)},selections:g,variant:T.single,isDisabled:t,children:[e(a,{"data-testid":"persistent-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",isPlaceholder:!0,children:i("persistent")}),e(a,{"data-testid":"transient-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",children:i("transient")}),e(a,{"data-testid":"email-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",children:i("email")}),e(a,{"data-testid":"kerberos-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos",children:i("kerberos")}),e(a,{"data-testid":"x509-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName",children:i("x509")}),e(a,{"data-testid":"windowsDomainQN-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName",children:i("windowsDomainQN")}),e(a,{"data-testid":"unspecified-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",children:i("unspecified")})]})})}),e(r,{label:i("principalType"),labelIcon:e(l,{helpText:n("principalType"),fieldLabelId:"identity-providers:principalType"}),fieldId:"kc-principalType",helperTextInvalid:i("common:required"),children:e(y,{name:"config.principalType",defaultValue:i("subjectNameId"),control:s,render:({onChange:u,value:g})=>v(x,{toggleId:"kc-principalType",onToggle:c=>k(c),isOpen:_,onSelect:(c,f)=>{u(f.toString()),k(!1)},selections:g,variant:T.single,isDisabled:t,children:[e(a,{"data-testid":"subjectNameId-option",value:"SUBJECT",isPlaceholder:!0,children:i("subjectNameId")}),e(a,{"data-testid":"attributeName-option",value:"ATTRIBUTE",children:i("attributeName")}),e(a,{"data-testid":"attributeFriendlyName-option",value:"FRIENDLY_ATTRIBUTE",children:i("attributeFriendlyName")})]})})}),O?.includes("ATTRIBUTE")&&e(r,{label:i("principalAttribute"),labelIcon:e(l,{helpText:n("principalAttribute"),fieldLabelId:"identity-providers:principalAttribute"}),fieldId:"principalAttribute",children:e(m,{type:"text",id:"principalAttribute",name:"config.principalAttribute",ref:d,isReadOnly:t})}),e(o,{field:"config.allowCreate",label:"allowCreate",isReadOnly:t}),e(o,{field:"config.postBindingResponse",label:"httpPostBindingResponse",isReadOnly:t}),e(o,{field:"config.postBindingAuthnRequest",label:"httpPostBindingAuthnRequest",isReadOnly:t}),e(o,{field:"config.postBindingLogout",label:"httpPostBindingLogout",isReadOnly:t}),e(o,{field:"config.wantAuthnRequestsSigned",label:"wantAuthnRequestsSigned",isReadOnly:t}),q==="true"&&v(C,{children:[e(r,{label:i("signatureAlgorithm"),labelIcon:e(l,{helpText:n("signatureAlgorithm"),fieldLabelId:"identity-providers:signatureAlgorithm"}),fieldId:"kc-signatureAlgorithm",children:e(y,{name:"config.signatureAlgorithm",defaultValue:"RSA_SHA256",control:s,render:({onChange:u,value:g})=>v(x,{toggleId:"kc-signatureAlgorithm",onToggle:c=>w(c),isOpen:E,onSelect:(c,f)=>{u(f.toString()),w(!1)},selections:g,variant:T.single,isDisabled:t,children:[e(a,{value:"RSA_SHA1"}),e(a,{value:"RSA_SHA256",isPlaceholder:!0}),e(a,{value:"RSA_SHA256_MGF1"}),e(a,{value:"RSA_SHA512"}),e(a,{value:"RSA_SHA512_MGF1"}),e(a,{value:"DSA_SHA1"})]})})}),e(r,{label:i("samlSignatureKeyName"),labelIcon:e(l,{helpText:n("samlSignatureKeyName"),fieldLabelId:"identity-providers:samlSignatureKeyName"}),fieldId:"kc-samlSignatureKeyName",children:e(y,{name:"config.xmlSigKeyInfoKeyNameTransformer",defaultValue:i("keyID"),control:s,render:({onChange:u,value:g})=>v(x,{toggleId:"kc-samlSignatureKeyName",onToggle:c=>N(c),isOpen:F,onSelect:(c,f)=>{u(f.toString()),N(!1)},selections:g,variant:T.single,isDisabled:t,children:[e(a,{value:"NONE"}),e(a,{value:i("keyID"),isPlaceholder:!0}),e(a,{value:i("certSubject")})]})})})]}),e(o,{field:"config.wantAssertionsSigned",label:"wantAssertionsSigned",isReadOnly:t}),e(o,{field:"config.wantAssertionsEncrypted",label:"wantAssertionsEncrypted",isReadOnly:t}),e(o,{field:"config.forceAuthn",label:"forceAuthentication",isReadOnly:t}),e(o,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),U==="true"&&e(P,{field:"config.signingCertificate",label:"validatingX509Certs",isReadOnly:t}),e(o,{field:"config.signSpMetadata",label:"signServiceProviderMetadata",isReadOnly:t}),e(o,{field:"config.loginHint",label:"passSubject",isReadOnly:t}),e(r,{label:i("allowedClockSkew"),labelIcon:e(l,{helpText:n("allowedClockSkew"),fieldLabelId:"identity-providers:allowedClockSkew"}),fieldId:"allowedClockSkew",helperTextInvalid:i("common:required"),children:e(m,{type:"number",min:"0",max:"2147483",id:"allowedClockSkew",name:"config.allowedClockSkew",ref:d,isReadOnly:t})}),e(r,{label:i("attributeConsumingServiceIndex"),labelIcon:e(l,{helpText:n("attributeConsumingServiceIndex"),fieldLabelId:"identity-providers:attributeConsumingServiceIndex"}),fieldId:"attributeConsumingServiceIndex",helperTextInvalid:i("common:required"),children:e(m,{type:"number",min:"0",max:"65535",id:"attributeConsumingServiceIndex",name:"config.attributeConsumingServiceIndex",ref:d,isReadOnly:t})}),e(r,{label:i("attributeConsumingServiceName"),labelIcon:e(l,{helpText:n("attributeConsumingServiceName"),fieldLabelId:"identity-providers:attributeConsumingServiceName"}),fieldId:"attributeConsumingServiceName",helperTextInvalid:i("common:required"),children:e(m,{type:"text",id:"attributeConsumingServiceName",name:"config.attributeConsumingServiceName",ref:d,isReadOnly:t})})]})},ie=({readOnly:t})=>{const{t:i}=A("identity-providers"),[n,d]=b.exports.useState(!1);return t?e(B,{className:"keycloak__discovery-settings__metadata",toggleText:i(n?"hideMetaData":"showMetaData"),onToggle:s=>d(s),isExpanded:n,children:e(L,{readOnly:t})}):e(L,{readOnly:t})};const te=({id:t,isAliasReadonly:i=!1})=>{const{t:n}=A("identity-providers"),{realm:d}=M(),{register:s,watch:S,formState:{errors:h}}=D(),I=S("alias");return v(C,{children:[e(H,{id:t}),e(r,{label:n("alias"),labelIcon:e(l,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),fieldId:"alias",isRequired:!0,validated:h.alias?p.error:p.default,helperTextInvalid:n("common:required"),children:e(m,{isRequired:!0,type:"text",id:"alias","data-testid":"alias",name:"alias",isReadOnly:i,validated:h.alias?p.error:p.default,ref:s({required:!0})})}),e(P,{field:"displayName",label:"displayName"}),e(j,{}),e(r,{label:n("endpoints"),fieldId:"endpoints",labelIcon:e(l,{helpText:"identity-providers-help:alias",fieldLabelId:"identity-providers:alias"}),className:"keycloak__identity-providers__saml_link",children:e(V,{title:n("samlEndpointsLabel"),href:`${K.authUrl}/realms/${d}/broker/${I}/endpoint/descriptor`,isInline:!0})})]})};export{ie as D,te as S};
