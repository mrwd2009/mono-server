import{u as E,C as S,F as V}from"./index.esm.6af887f8.js";import{u as I,bA as g,h as d,F as O,j as r,P as R,ay as j,az as q,g as w,cz as p,a_ as H,av as u,ad as k,s as f,aY as v}from"./index.0cb2e516.js";import{F as z}from"./FormAccess.bee4f1e0.js";import{H as h}from"./HelpItem.e440d5db.js";import{V as D}from"./ViewHeader.2586557f.js";import{D as Y}from"./DynamicComponents.3dd18b3b.js";import{K as _}from"./KeycloakTextInput.b4d5b2db.js";import{a as y,A as G}from"./FormGroup.3d5f3f16.js";import"./copy-icon.cf10e1f5.js";import"./GridItem.0db472b0.js";import"./Text.c38ffb52.js";import"./KeycloakTextArea.f5e2440a.js";import"./Select.5a6b39aa.js";import"./check.51c67984.js";import"./star-icon.97692015.js";import"./useToggle.8c992bea.js";import"./AddRoleMappingModal.4adc845a.js";import"./KeycloakDataTable.4e517788.js";import"./TableToolbar.c27bcd3c.js";import"./grip-vertical-icon.1b75ab8f.js";import"./Checkbox.2dc73ed3.js";import"./plus-circle-icon.32cdf4dc.js";import"./EmptyStateBody.a0363fe4.js";import"./EmptyStateSecondaryActions.1a804d56.js";import"./Modal.6593dfcc.js";import"./useLocaleSort.84ea7ec0.js";import"./resource.df4d2bbd.js";import"./joinPath.69b856b1.js";import"./filter-icon.fec9f70e.js";import"./ConfirmDialog.f8013bbb.js";import"./KeyValueInput.cb1ae3e8.js";import"./FlexItem.308d9f82.js";import"./minus-circle-icon.de526f05.js";import"./CodeEditor.16ebafa0.js";import"./ClientSelect.a855e118.js";import"./MultiLineInput.e27bc560.js";import"./GroupPickerDialog.f5430678.js";import"./DataListItemRow.8f458244.js";import"./data-list.f7ff2ea7.js";import"./FileUpload.18e1e495.js";import"./PasswordInput.34ff6dd3.js";const L=({providerType:i,onClose:o})=>{const{t}=I("realm-settings"),{id:a}=g(),{adminClient:n}=j(),{addAlert:l,addError:b}=q(),P=w().componentTypes?.[p]??[],c=E({shouldUnregister:!1,mode:"onChange"}),{register:F,control:x,handleSubmit:A,errors:T,reset:C}=c,K=async e=>{e.config&&Object.entries(e.config).forEach(([s,m])=>e.config[s]=Array.isArray(m)?m:[m]);try{a?(await n.components.update({id:a},{...e,providerType:p}),l(t("saveProviderSuccess"),v.success)):(await n.components.create({...e,providerId:i,providerType:p,config:{...e.config,priority:["0"]}}),l(t("saveProviderSuccess"),v.success),o?.())}catch(s){b("realm-settings:saveProviderError",s)}};return H(async()=>{if(a)return await n.components.findOne({id:a})},e=>{e&&C({...e})},[]),d(z,{isHorizontal:!0,role:"manage-realm",onSubmit:A(K),children:[a&&r(y,{label:t("providerId"),labelIcon:r(h,{helpText:"client-scopes-help:mapperName",fieldLabelId:"providerId"}),fieldId:"providerId",isRequired:!0,children:r(_,{ref:F,id:"id",type:"text",name:"id",isReadOnly:!0,"aria-label":t("providerId"),"data-testid":"providerId-input"})}),r(y,{label:t("common:name"),labelIcon:r(h,{helpText:"client-scopes-help:mapperName",fieldLabelId:"name"}),fieldId:"name",isRequired:!0,validated:T.name?u.error:u.default,helperTextInvalid:t("common:required"),children:r(S,{name:"name",control:x,rules:{required:!0},defaultValue:i,render:({onChange:e,value:s})=>r(k,{id:"name",type:"text","aria-label":t("common:name"),value:s,onChange:e,"data-testid":"name-input"})})}),r(V,{...c,children:r(Y,{properties:P.find(e=>e.id===i)?.properties||[]})}),d(G,{children:[r(f,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:t("common:save")}),r(f,{onClick:()=>o?.(),variant:"link",children:t("common:cancel")})]})]})};function Rr(){const{t:i}=I("realm-settings"),o=g();return d(O,{children:[r(D,{titleKey:i("editProvider"),subKey:o.providerType}),r(R,{variant:"light",children:r(L,{...o})})]})}export{L as KeyProviderForm,Rr as default};
