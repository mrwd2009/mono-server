import{_ as Nn,j as b,q as pt,s as Ce,ae as vt,a6 as Bg,bt as Yf,v as zg,h as se,r as y,ac as Vs,u as et,ay as cn,a_ as Mn,P as Xf,av as Re,F as ke,az as Gs,a4 as Nr,aB as jg,aC as Hg,aY as Ot,an as Ug,aF as Vg,ap as Ft,a5 as D,bu as Kf,aX as Gg,bv as Ys,bw as Yg,bx as Xg,by as Kg,bz as Zg,l as Wg,bA as Qg,aw as Jg,b3 as em,L as Au,aS as tm}from"./index.0cb2e516.js";import{V as nm}from"./ViewHeader.2586557f.js";import{P as rm,L as om,a as am,r as Xt,b as Zf,c as Wf,d as im,e as sm,f as Tn,g as um,_ as Qf,h as cm,i as Jf,j as lm,k as eh,l as dm,m as fm}from"./KeycloakDataTable.4e517788.js";import{u as hm,m as pm}from"./useLocaleSort.84ea7ec0.js";import{D as th,a as nh,b as rh,c as oh,d as Jt,e as vm}from"./DataListItemRow.8f458244.js";import{C as gm}from"./Card.32e78d5f.js";import{C as mm}from"./CardBody.a2e5e179.js";import{S as gs,b as ms,a as ys}from"./Select.5a6b39aa.js";import{u as Mr,C as qu,F as ah}from"./index.esm.6af887f8.js";import{H as Bt,T as ym,e as bm,a as wm,b as _m,c as lo}from"./HelpItem.e440d5db.js";import{D as Sm}from"./DynamicComponents.3dd18b3b.js";import{K as hr}from"./KeycloakTextInput.b4d5b2db.js";import{T as ih}from"./trash-icon.1ac02c7c.js";import{M as Pn,a as Dn}from"./Modal.6593dfcc.js";import{F as In,a as zt,A as Em}from"./FormGroup.3d5f3f16.js";import{a as sh}from"./plus-icon.407671b4.js";import{u as bs}from"./useToggle.8c992bea.js";import{K as xm}from"./KeycloakTextArea.f5e2440a.js";import{D as Cm}from"./DataListControl.30ac2ba7.js";import{s as fo}from"./data-list.f7ff2ea7.js";import{T as Om,a as Nm}from"./Text.c38ffb52.js";import{O as Tr,P as Rn,Q as uh,S as ch,g as Xs,U as Mm,y as Pr,V as Ks,W as lh,X as Zs,v as dh,Y as Tm,Z as Pm,$ as Dm,j as Le,w as Ws,a0 as kn,a1 as fh,o as Ln,a2 as An,t as hh,_ as Im,a3 as Qs,a4 as ph,a5 as Rm,l as km,x as vh,a6 as Lm,a7 as gh,a8 as Js,a9 as Am,aa as mh,r as qm,ab as eu,ac as $m,ad as Fm,ae as Bm,p as zm,af as jm,ag as Hm}from"./TableToolbar.c27bcd3c.js";import{D as Um}from"./DrawerHead.ad4b75f2.js";import{u as $u}from"./ConfirmDialog.f8013bbb.js";import{B as Vm,D as Gm}from"./AuthenticationSection.c7aa1325.js";import{N as Ym}from"./NameDescription.09ef155c.js";import{T as Fu}from"./Trans.ec4d13b3.js";import{R as Xm}from"./Radio.cfe305aa.js";import{F as Bu,a as zu}from"./FlexItem.308d9f82.js";import"./plus-circle-icon.32cdf4dc.js";import"./EmptyStateBody.a0363fe4.js";import"./EmptyStateSecondaryActions.1a804d56.js";import"./grip-vertical-icon.1b75ab8f.js";import"./check.51c67984.js";import"./star-icon.97692015.js";import"./AddRoleMappingModal.4adc845a.js";import"./resource.df4d2bbd.js";import"./joinPath.69b856b1.js";import"./filter-icon.fec9f70e.js";import"./Checkbox.2dc73ed3.js";import"./KeyValueInput.cb1ae3e8.js";import"./minus-circle-icon.de526f05.js";import"./CodeEditor.16ebafa0.js";import"./copy-icon.cf10e1f5.js";import"./ClientSelect.a855e118.js";import"./MultiLineInput.e27bc560.js";import"./GroupPickerDialog.f5430678.js";import"./FileUpload.18e1e495.js";import"./PasswordInput.34ff6dd3.js";import"./DraggableTable.2d0d5d5a.js";import"./FormAccess.bee4f1e0.js";import"./GridItem.0db472b0.js";import"./NumberInput.331c7b85.js";import"./TimeSelector.1a65a2e3.js";import"./question-circle-icon.c9ca7908.js";import"./Tabs.3d61d369.js";import"./MenuList.288a98b4.js";import"./RoutableTabs.f3cff418.js";const yh=e=>{var{className:t="",isExpanded:n=!1,"aria-controls":r="","aria-label":o="Details",rowid:a="",id:i}=e,s=Nn(e,["className","isExpanded","aria-controls","aria-label","rowid","id"]);return b("div",{...Object.assign({className:pt(fo.dataListItemControl,t)},s),children:b("div",{className:pt(fo.dataListToggle),children:b(Ce,{id:i,variant:vt.plain,"aria-controls":r!==""&&r,"aria-label":o,"aria-labelledby":o!=="Details"?null:`${a} ${i}`,"aria-expanded":n,children:b("div",{className:pt(fo.dataListToggleIcon),children:b(Bg,{})})})})})};yh.displayName="DataListToggle";const bh=e=>{var{className:t="",children:n}=e,r=Nn(e,["className","children"]);return b("div",{...Object.assign({className:pt(Yf.drawerActions,t)},r),children:n})};bh.displayName="DrawerActions";const wh=e=>{var{className:t="",onClose:n=()=>{},"aria-label":r="Close drawer panel"}=e,o=Nn(e,["className","onClose","aria-label"]);return b("div",{...Object.assign({className:pt(Yf.drawerClose,t)},o),children:b(Ce,{variant:"plain",onClick:n,"aria-label":r,children:b(zg,{})})})};wh.displayName="DrawerCloseButton";const Vt={modifiers:{compact:"pf-m-compact",selected:"pf-m-selected",disabled:"pf-m-disabled"},themeDark:"pf-theme-dark",toggleGroup:"pf-c-toggle-group",toggleGroupButton:"pf-c-toggle-group__button",toggleGroupIcon:"pf-c-toggle-group__icon",toggleGroupItem:"pf-c-toggle-group__item",toggleGroupText:"pf-c-toggle-group__text"};var pr;(function(e){e.icon="icon",e.text="text"})(pr||(pr={}));const ws=({variant:e,children:t})=>b("span",{className:pt(e==="icon"&&Vt.toggleGroupIcon,e==="text"&&Vt.toggleGroupText),children:t});ws.displayName="ToggleGroupItemElement";const vr=e=>{var{text:t,icon:n,className:r,isDisabled:o=!1,isSelected:a=!1,"aria-label":i="",onChange:s=()=>{},buttonId:u=""}=e,l=Nn(e,["text","icon","className","isDisabled","isSelected","aria-label","onChange","buttonId"]);const c=d=>{s(!a,d)};return!i&&n&&!t&&console.warn("An accessible aria-label is required when using the toggle group item icon variant."),b("div",{...Object.assign({className:pt(Vt.toggleGroupItem,r)},l),children:se("button",{...Object.assign({type:"button",className:pt(Vt.toggleGroupButton,a&&Vt.modifiers.selected),"aria-pressed":a,onClick:c},i&&{"aria-label":i},o&&{disabled:!0},u&&{id:u}),children:[n?b(ws,{variant:pr.icon,children:n}):null,t?b(ws,{variant:pr.text,children:t}):null]})})};vr.displayName="ToggleGroupItem";const _h=e=>{var{className:t,children:n,isCompact:r=!1,areAllGroupsDisabled:o=!1,"aria-label":a}=e,i=Nn(e,["className","children","isCompact","areAllGroupsDisabled","aria-label"]);const s=y.exports.Children.map(n,u=>u.type.name!==vr.name?u:y.exports.cloneElement(u,o?{isDisabled:!0}:{}));return b("div",{...Object.assign({className:pt(Vt.toggleGroup,r&&Vt.modifiers.compact,t),role:"group","aria-label":a},i),children:s})};_h.displayName="ToggleGroup";const Km={name:"CogIcon",height:512,width:512,svgPath:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z",yOffset:0,xOffset:0},Zm=Vs(Km),Wm={name:"DomainIcon",height:1024,width:1024,svgPath:"M544,511.9 C561.476067,511.948945 575.664266,525.962873 575.994253,543.371439 L576,543.9 L576,991.9 C575.951055,1009.37607 561.937127,1023.56427 544.528561,1023.89425 L544,1023.9 L352,1023.9 C334.523933,1023.85105 320.335734,1009.83713 320.005747,992.428561 L320,991.9 L320,543.9 C320.048945,526.423933 334.062873,512.235734 351.471439,511.905747 L352,511.9 L544,511.9 Z M704,576 L704,960 L640,960 L640,576 L704,576 Z M512,896 L384,896 L384,960 L512,960 L512,896 Z M960,513.1 L960,513.2 C960,665.4 884.1,799.9 768,880.9 L768,880.9 L768,799.4 C773.3,794.6 778.4,789.8 783.5,784.7 C855.624209,712.728348 896.108133,614.991161 896,513.1 L896,513.1 L960,513.1 Z M149.8,385 C100.714385,524.561202 135.973879,679.905126 240.5,784.6 C245.5,789.7 250.7,794.6 256,799.3 L256,799.3 L256,880.8 C139.9,799.8 63.9999013,665.3 63.9999013,513.1 C63.9712238,469.725105 70.236499,426.575548 82.6,385 L82.6,385 Z M512.1,704 L384,704 L384,832 L512.1,832 L512.1,704 Z M512,576 L448,576 L448,640 L512,640 L512,576 Z M864,-1.13686838e-13 C881.496381,-1.13686838e-13 895.713128,14.0417829 895.995713,31.4708215 L896,32 L896,406 C896,423.496381 881.958217,437.713128 864.529179,437.995713 L864,438 L608,438 C590.503619,438 576.286872,423.958217 576.004287,406.529179 L576,406 L576,32 C576,14.5036191 590.041783,0.286872383 607.470821,0.00428708574 L608,-1.13686838e-13 L864,-1.13686838e-13 Z M1024,64 L1024,384 L960,384 L960,64 L1024,64 Z M832,256 L640,256 L640,352 L832,352 L832,256 Z M224,-5.68434189e-14 C241.476067,0.0489452394 255.664266,14.0628726 255.994253,31.4714395 L256,32 L256,288 C255.951055,305.476067 241.937127,319.664266 224.528561,319.994253 L224,320 L32,320 C14.5239331,319.951055 0.335734448,305.937127 0.00574685353,288.528561 L0,288 L0,32 C0.0489452394,14.5239331 14.0628726,0.335734448 31.4714395,0.00574685353 L32,-5.68434189e-14 L224,-5.68434189e-14 Z M192,192 L64,192 L64,256 L192,256 L192,192 Z M512,65 L512,129 C460.642759,128.90985 409.795141,139.181409 362.5,159.2 C347.917219,165.399771 333.724426,172.47947 320,180.4 L320,180.4 L320,108.2 C380.012207,79.7623165 445.590913,65.0071076 512,65 L512,65 Z M832,64 L736,64 L736,160 L832,160 L832,64 Z M192,64 L128,64 L128,128 L192,128 L192,64 Z",yOffset:0,xOffset:0},Qm=Vs(Wm),Jm={name:"TableIcon",height:512,width:512,svgPath:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z",yOffset:0,xOffset:0},ey=Vs(Jm),ju=({list:e,setValue:t})=>b(Xf,{variant:"light",className:"pf-u-py-lg",children:b(In,{isHorizontal:!0,children:e?.map(n=>b(Xm,{id:n.id,name:"provider",label:n.displayName,"data-testid":n.id,description:n.description,onChange:()=>{t(n)}},n.id))})}),tu=({name:e,type:t,onSelect:n})=>{const{t:r}=et("authentication"),{adminClient:o}=cn(),[a,i]=y.exports.useState(),[s,u]=y.exports.useState(),[l,c]=y.exports.useState(10),[d,f]=y.exports.useState(0),[h,p]=y.exports.useState(""),v=hm();Mn(async()=>{switch(t){case"client":return o.authenticationManagement.getClientAuthenticatorProviders();case"form":return o.authenticationManagement.getFormActionProviders();case"condition":return(await o.authenticationManagement.getAuthenticatorProviders()).filter(Us);case"basic":default:return(await o.authenticationManagement.getAuthenticatorProviders()).filter(x=>!Us(x))}},m=>u(m),[]);const g=y.exports.useMemo(()=>v(s??[],pm("displayName")).filter(m=>m.displayName?.includes(h)||m.description?.includes(h)).slice(d,d+l+1),[s,h,d,l]);return se(Pn,{variant:Dn.medium,isOpen:!0,title:r("addStepTo",{name:e}),onClose:()=>n(),actions:[b(Ce,{id:"modal-add","data-testid":"modal-add",onClick:()=>n(a),children:r("common:add")},"add"),b(Ce,{"data-testid":"cancel",id:"modal-cancel",variant:vt.link,onClick:()=>{n()},children:r("common:cancel")},"cancel")],children:[s&&s.length>l&&b(rm,{count:g.length||0,first:d,max:l,onNextClick:f,onPreviousClick:f,onPerPageSelect:(m,x)=>{f(m),c(x)},inputGroupName:"search",inputGroupPlaceholder:r("common:search"),inputGroupOnEnter:p,children:b(ju,{list:g,setValue:i})}),s&&s.length<=l&&b(ju,{list:s,setValue:i})]})},Hu=["basic-flow","form-flow"],nu=({name:e,onConfirm:t,onCancel:n})=>{const{t:r}=et("authentication"),{register:o,control:a,handleSubmit:i,formState:{errors:s}}=Mr(),[u,l]=y.exports.useState(!1),[c,d]=y.exports.useState(!1),[f,h]=y.exports.useState(),{adminClient:p}=cn();return Mn(()=>p.authenticationManagement.getFormProviders(),v=>h(v),[]),b(Pn,{variant:Dn.medium,isOpen:!0,title:r("addStepTo",{name:e}),onClose:()=>n(),actions:[b(Ce,{id:"modal-add","data-testid":"modal-add",type:"submit",form:"sub-flow-form",children:r("common:add")},"add"),b(Ce,{"data-testid":"cancel",id:"modal-cancel",variant:vt.link,onClick:()=>{n()},children:r("common:cancel")},"cancel")],children:se(In,{id:"sub-flow-form",isHorizontal:!0,onSubmit:i(t),children:[b(zt,{label:r("common:name"),fieldId:"name",helperTextInvalid:r("common:required"),validated:s.name?Re.error:Re.default,isRequired:!0,labelIcon:b(Bt,{helpText:"authentication-help:name",fieldLabelId:"name"}),children:b(hr,{type:"text",id:"name",name:"name","data-testid":"name",ref:o({required:!0}),validated:s.name?Re.error:Re.default})}),b(zt,{label:r("common:description"),fieldId:"description",labelIcon:b(Bt,{helpText:"authentication-help:description",fieldLabelId:"description"}),children:b(hr,{type:"text",id:"description",name:"description","data-testid":"description",ref:o})}),b(zt,{label:r("flowType"),labelIcon:b(Bt,{helpText:"authentication-help:flowType",fieldLabelId:"authentication:flowType"}),fieldId:"flowType",children:b(qu,{name:"type",defaultValue:Hu[0],control:a,render:({onChange:v,value:g})=>b(gs,{menuAppendTo:"parent",toggleId:"flowType",onToggle:l,onSelect:(m,x)=>{v(x),l(!1)},selections:r(`flow-type.${g}`),variant:ms.single,"aria-label":r("flowType"),isOpen:u,children:Hu.map(m=>b(ys,{selected:m===g,value:m,children:r(`flow-type.${m}`)},m))})})}),f&&f.length>1&&b(zt,{label:r("flowType"),labelIcon:b(Bt,{helpText:"authentication-help:flowType",fieldLabelId:"authentication:flowType"}),fieldId:"flowType",children:b(qu,{name:"provider",defaultValue:"",control:a,render:({onChange:v,value:g})=>b(gs,{menuAppendTo:"parent",toggleId:"provider",onToggle:d,onSelect:(m,x)=>{v(x.toString()),d(!1)},selections:g.displayName,variant:ms.single,"aria-label":r("flowType"),isOpen:c,children:f.map(m=>b(ys,{selected:m.displayName===g,value:m,children:m.displayName},m.id))})})}),f?.length===1&&b("input",{name:"provider",type:"hidden",ref:o,value:f[0].id})]})})};const ty=["addExecution","addSubFlow"],ny=({flow:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=et("authentication"),[o,a]=y.exports.useState();return se(ke,{children:[o==="addExecution"&&b(tu,{name:e.alias,type:e.providerId==="client-flow"?"client":"basic",onSelect:i=>{i&&t(i),a(void 0)}}),o==="addSubFlow"&&b(nu,{name:e.alias,onCancel:()=>a(void 0),onConfirm:i=>{n(i),a(void 0)}}),b(om,{message:r("emptyExecution"),instructions:r("emptyExecutionInstructions")}),b("div",{className:"keycloak__empty-execution-state__block",children:ty.map(i=>se(Bu,{className:"keycloak__empty-execution-state__help",children:[se(zu,{flex:{default:"flex_1"},children:[b(ym,{headingLevel:"h3",size:bm.md,children:r(`${i}Title`)}),b("p",{children:r(`authentication-help:${i}`)})]}),b(Bu,{alignSelf:{default:"alignSelfCenter"},children:b(zu,{children:b(Ce,{"data-testid":i,variant:"tertiary",onClick:()=>a(i),children:r(i)})})})]},i))})]})};const ry=()=>{const{t:e}=et("authentication");return b(th,{"aria-labelledby":"headerName",id:"header",children:se(nh,{children:[b(rh,{className:"keycloak__authentication__header-drag-button","aria-label":e("common:disabled")}),b(oh,{className:"keycloak__authentication__header",dataListCells:[b(Jt,{id:"headerName",children:e("steps")},"step"),b(Jt,{children:e("requirement")},"requirement"),b(Jt,{},"config")]})]})})};const oy=({id:e,title:t})=>b(gm,{"data-testid":t,className:"keycloak__authentication__title",isFlat:!0,children:b(mm,{"data-id":e,id:`title-id-${e}`,children:t})}),ay=({flow:e,onChange:t})=>{const{t:n}=et("authentication"),[r,o]=y.exports.useState(!1),a=e.requirementChoices.map((i,s)=>b(ys,{value:i,children:n(`requirements.${i}`)},s));return se(ke,{children:[e.requirementChoices&&e.requirementChoices.length>1&&b(gs,{className:"keycloak__authentication__requirement-dropdown",variant:ms.single,onToggle:o,onSelect:(i,s)=>{e.requirement=s.toString(),t(e),o(!1)},selections:[e.requirement],isOpen:r,children:a}),(!e.requirementChoices||e.requirementChoices.length<=1)&&b(ke,{children:n(`requirements.${e.requirement}`)})]})},iy=({execution:e})=>{const{t}=et("authentication"),{adminClient:n}=cn(),{addAlert:r,addError:o}=Gs(),[a,i]=y.exports.useState(!1),[s,u]=y.exports.useState(),[l,c]=y.exports.useState(),d=Mr({shouldUnregister:!1}),{register:f,setValue:h,handleSubmit:p,formState:{errors:v}}=d,g=x=>{jg(x,h)};Mn(async()=>{const x=await n.authenticationManagement.getConfigDescription({providerId:e.providerId});let N;return e.authenticationConfig&&(N=await n.authenticationManagement.getConfig({id:e.authenticationConfig})),{configDescription:x,config:N}},({configDescription:x,config:N})=>{c(x),u(N)},[]),y.exports.useEffect(()=>{s&&g(s)},[s]);const m=async x=>{const N=Hg(x);try{if(s){const M={...s,config:N.config};await n.authenticationManagement.updateConfig(M),u({...M.config})}else{const M={id:e.id,alias:N.alias,config:N.config},{id:C}=await n.authenticationManagement.createConfig(M);u({...M.config,id:C,alias:M.alias})}r(t("configSaveSuccess"),Ot.success),i(!1)}catch(M){o("authentication:configSaveError",M)}};return se(ke,{children:[b(Nr,{content:t("common:settings"),children:b(Ce,{variant:"plain","aria-label":t("common:settings"),onClick:()=>i(!0),children:b(Zm,{})})}),l&&b(Pn,{variant:Dn.small,isOpen:a,title:t("executionConfig",{name:l.name}),onClose:()=>i(!1),children:se(In,{id:"execution-config-form",onSubmit:p(m),children:[b(zt,{label:t("alias"),fieldId:"alias",helperTextInvalid:t("common:required"),validated:v.alias?Re.error:Re.default,isRequired:!0,labelIcon:b(Bt,{helpText:"authentication-help:alias",fieldLabelId:"authentication:alias"}),children:b(hr,{isReadOnly:!!s,type:"text",id:"alias",name:"alias","data-testid":"alias",ref:f({required:!0}),validated:v.alias?Re.error:Re.default})}),b(ah,{...d,children:b(Sm,{properties:l.properties||[]})}),se(Em,{children:[b(Ce,{"data-testid":"save",variant:"primary",type:"submit",children:t("common:save")}),b(Ce,{"data-testid":"cancel",variant:vt.link,onClick:()=>{i(!1)},children:t("common:cancel")}),s&&se(Ce,{className:"pf-u-ml-4xl","data-testid":"clear",variant:vt.link,onClick:async()=>{await n.authenticationManagement.delConfig({id:s.id}),u(void 0),i(!1)},children:[t("common:clear")," ",b(ih,{})]})]})]})})]})},sy=({execution:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=et("authentication"),{adminClient:o}=cn(),[a,i]=y.exports.useState(!1),[s,u]=y.exports.useState(),[l,c]=y.exports.useState();return Mn(()=>o.authenticationManagement.getFlow({flowId:e.flowId}),({providerId:d})=>c(d),[]),b(Nr,{content:r("common:add"),children:se(ke,{children:[b(Ug,{isPlain:!0,position:"right","data-testid":`${e.displayName}-edit-dropdown`,isOpen:a,toggle:b(Vg,{onToggle:i,"aria-label":r("common:add"),children:b(sh,{})}),dropdownItems:[b(Ft,{onClick:()=>u(l==="form-flow"?"form":"basic"),children:r("addStep")},"addStep"),b(Ft,{onClick:()=>u("condition"),children:r("addCondition")},"addCondition"),b(Ft,{onClick:()=>u("subFlow"),children:r("addSubFlow")},"addSubFlow")],onSelect:()=>i(!1)}),s&&s!=="subFlow"&&b(tu,{name:e.displayName,type:s,onSelect:d=>{d&&t(e,d),u(void 0)}}),s==="subFlow"&&b(nu,{name:e.displayName,onCancel:()=>u(void 0),onConfirm:d=>{n(e,d),u(void 0)}})]})})},uy=({execution:e,onRowChange:t})=>{const{t:n}=et("authentication"),{register:r,errors:o,reset:a,handleSubmit:i}=Mr(),[s,u]=bs(),l=c=>{t({...e,...c}),u()};return y.exports.useEffect(()=>{a(e)},[e,a]),se(ke,{children:[b(Nr,{content:n("common:edit"),children:b(Ce,{variant:"plain","data-testid":`${e.id}-edit`,"aria-label":n("common:edit"),onClick:u,children:b(am,{})})}),s&&b(Pn,{title:n("editFlow"),isOpen:!0,onClose:u,variant:Dn.small,actions:[b(Ce,{id:"modal-confirm",onClick:i(l),"data-testid":"confirm",children:n("edit")},"confirm"),b(Ce,{"data-testid":"cancel",id:"modal-cancel",variant:vt.link,onClick:u,children:n("common:cancel")},"cancel")],children:se(In,{isHorizontal:!0,children:[b(zt,{label:n("common:name"),fieldId:"name",helperTextInvalid:n("common:required"),validated:o.displayName?Re.error:Re.default,isRequired:!0,labelIcon:b(Bt,{helpText:"authentication-help:name",fieldLabelId:"name"}),children:b(hr,{type:"text",id:"name",name:"displayName","data-testid":"displayName",ref:r({required:!0}),validated:o.displayName?Re.error:Re.default})}),b(zt,{label:n("common:description"),fieldId:"kc-description",labelIcon:b(Bt,{helpText:"authentication-help:description",fieldLabelId:"description"}),validated:o.description?Re.error:Re.default,helperTextInvalid:o.description?.message,children:b(xm,{ref:r({maxLength:{value:255,message:n("common:maxLength",{length:255})}}),type:"text",id:"kc-description",name:"description","data-testid":"description",validated:o.description?Re.error:Re.default})})]})})]})};const Sh=({builtIn:e,execution:t,onRowClick:n,onRowChange:r,onAddExecution:o,onAddFlow:a,onDelete:i})=>{const{t:s}=et("authentication"),u=!!t.executionList?.length;return se(ke,{children:[b(th,{className:"keycloak__authentication__flow-item",id:t.id,isExpanded:!t.isCollapsed,"aria-labelledby":`title-id-${t.id}`,children:se(nh,{className:"keycloak__authentication__flow-row","aria-level":t.level+1,role:"heading","aria-labelledby":t.id,children:[b(Cm,{children:b(rh,{"aria-label":s("common-help:dragHelp")})}),u&&b(yh,{onClick:()=>n(t),isExpanded:!t.isCollapsed,id:`toggle1-${t.id}`,"aria-controls":t.executionList[0].id}),b(oh,{dataListCells:[se(Jt,{children:[!t.authenticationFlow&&b(oy,{id:t.id,title:t.displayName},t.id),t.authenticationFlow&&se(ke,{children:[t.displayName," ",b("br",{})," ",b(Om,{component:Nm.small,children:t.description})]})]},`${t.id}-name`),b(Jt,{children:b(ay,{flow:t,onChange:r})},`${t.id}-requirement`),se(Jt,{children:[t.configurable&&b(iy,{execution:t}),t.authenticationFlow&&!e&&se(ke,{children:[b(sy,{execution:t,onAddExecution:o,onAddFlow:a}),b(uy,{execution:t,onRowChange:r})]}),!e&&b(Nr,{content:s("common:delete"),children:b(Ce,{variant:"plain","data-testid":`${t.displayName}-delete`,"aria-label":s("common:delete"),onClick:()=>i(t),children:b(ih,{})})})]},`${t.id}-config`)]})]})}),!t.isCollapsed&&u&&t.executionList?.map(l=>b(Sh,{builtIn:e,execution:l,onRowClick:n,onRowChange:r,onAddExecution:o,onAddFlow:a,onDelete:i},l.id))]})};class Eh{oldIndex;newIndex;constructor(t,n){this.oldIndex=t,this.newIndex=n}}class Uu extends Eh{parent;constructor(t,n,r){super(t,n),this.parent=r}}class ru{list;expandableList;constructor(t){this.list=t;const n={executionList:[],isCollapsed:!1};this.transformToExpandableList(0,n),this.expandableList=n.executionList}transformToExpandableList(t,n){for(let r=t;r<this.list.length;r++){const o=this.list[r],a=o.level||0,i=this.list[r+1]?.level||0,s=a>i,u=a<i;if(s)return n.executionList?.push(o),r;if(o.level===a&&!u)n.executionList?.push(o);else{const l={...o,executionList:[],isCollapsed:!1};r=this.transformToExpandableList(r+1,l),n.executionList?.push(l)}}return this.list.length}order(t){let n=[];for(const r of t||this.expandableList)n.push(r),r.executionList&&!r.isCollapsed&&(n=n.concat(this.order(r.executionList)));return n}findExecution(t,n){let r=(n||this.expandableList).find(o=>o.id===t);if(!r){for(const o of n||this.expandableList)if(o.executionList&&(r=this.findExecution(t,o.executionList),r))return r}return r}getParentNodes(t){for(let n=0;n<this.list.length;n++){const r=this.list[n];if(n+1<this.list.length&&this.list[n+1].level>r.level&&r.level+1===t)return r}}getChange(t,n){const r=this.order(),o=n.findIndex(s=>s===t.id),a=r[r.findIndex(s=>s.id===t.id)],i=r[o];if(i.level!==a.level){if(i.level>0){const s=this.getParentNodes(i.level);return new Uu(s?.executionList?.length||0,i.index,s)}return new Uu(this.expandableList.length,i.index)}return new Eh(a.index,i.index)}clone(){const t=new ru([]);return t.list=this.list,t.expandableList=this.expandableList,t}}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cy(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Dr(e,t){if(e==null)return{};var n=cy(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function Ze(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ze(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Vu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ho=function(){return Math.random().toString(36).substring(7).split("").join(".")},Gu={INIT:"@@redux/INIT"+ho(),REPLACE:"@@redux/REPLACE"+ho(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ho()}};function ly(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xh(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(je(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(je(1));return n(xh)(e,t)}if(typeof e!="function")throw new Error(je(2));var o=e,a=t,i=[],s=i,u=!1;function l(){s===i&&(s=i.slice())}function c(){if(u)throw new Error(je(3));return a}function d(v){if(typeof v!="function")throw new Error(je(4));if(u)throw new Error(je(5));var g=!0;return l(),s.push(v),function(){if(!!g){if(u)throw new Error(je(6));g=!1,l();var x=s.indexOf(v);s.splice(x,1),i=null}}}function f(v){if(!ly(v))throw new Error(je(7));if(typeof v.type>"u")throw new Error(je(8));if(u)throw new Error(je(9));try{u=!0,a=o(a,v)}finally{u=!1}for(var g=i=s,m=0;m<g.length;m++){var x=g[m];x()}return v}function h(v){if(typeof v!="function")throw new Error(je(10));o=v,f({type:Gu.REPLACE})}function p(){var v,g=d;return v={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(je(11));function N(){x.next&&x.next(c())}N();var M=g(N);return{unsubscribe:M}}},v[Vu]=function(){return this},v}return f({type:Gu.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Vu]=p,r}function Yu(e,t){return function(){return t(e.apply(this,arguments))}}function Xu(e,t){if(typeof e=="function")return Yu(e,t);if(typeof e!="object"||e===null)throw new Error(je(16));var n={};for(var r in e){var o=e[r];typeof o=="function"&&(n[r]=Yu(o,t))}return n}function dy(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var ou={exports:{}},Ch={exports:{}},he={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ne=typeof Symbol=="function"&&Symbol.for,au=Ne?Symbol.for("react.element"):60103,iu=Ne?Symbol.for("react.portal"):60106,Ir=Ne?Symbol.for("react.fragment"):60107,Rr=Ne?Symbol.for("react.strict_mode"):60108,kr=Ne?Symbol.for("react.profiler"):60114,Lr=Ne?Symbol.for("react.provider"):60109,Ar=Ne?Symbol.for("react.context"):60110,su=Ne?Symbol.for("react.async_mode"):60111,qr=Ne?Symbol.for("react.concurrent_mode"):60111,$r=Ne?Symbol.for("react.forward_ref"):60112,Fr=Ne?Symbol.for("react.suspense"):60113,fy=Ne?Symbol.for("react.suspense_list"):60120,Br=Ne?Symbol.for("react.memo"):60115,zr=Ne?Symbol.for("react.lazy"):60116,hy=Ne?Symbol.for("react.block"):60121,py=Ne?Symbol.for("react.fundamental"):60117,vy=Ne?Symbol.for("react.responder"):60118,gy=Ne?Symbol.for("react.scope"):60119;function Xe(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case au:switch(e=e.type,e){case su:case qr:case Ir:case kr:case Rr:case Fr:return e;default:switch(e=e&&e.$$typeof,e){case Ar:case $r:case zr:case Br:case Lr:return e;default:return t}}case iu:return t}}}function Oh(e){return Xe(e)===qr}he.AsyncMode=su;he.ConcurrentMode=qr;he.ContextConsumer=Ar;he.ContextProvider=Lr;he.Element=au;he.ForwardRef=$r;he.Fragment=Ir;he.Lazy=zr;he.Memo=Br;he.Portal=iu;he.Profiler=kr;he.StrictMode=Rr;he.Suspense=Fr;he.isAsyncMode=function(e){return Oh(e)||Xe(e)===su};he.isConcurrentMode=Oh;he.isContextConsumer=function(e){return Xe(e)===Ar};he.isContextProvider=function(e){return Xe(e)===Lr};he.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===au};he.isForwardRef=function(e){return Xe(e)===$r};he.isFragment=function(e){return Xe(e)===Ir};he.isLazy=function(e){return Xe(e)===zr};he.isMemo=function(e){return Xe(e)===Br};he.isPortal=function(e){return Xe(e)===iu};he.isProfiler=function(e){return Xe(e)===kr};he.isStrictMode=function(e){return Xe(e)===Rr};he.isSuspense=function(e){return Xe(e)===Fr};he.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ir||e===qr||e===kr||e===Rr||e===Fr||e===fy||typeof e=="object"&&e!==null&&(e.$$typeof===zr||e.$$typeof===Br||e.$$typeof===Lr||e.$$typeof===Ar||e.$$typeof===$r||e.$$typeof===py||e.$$typeof===vy||e.$$typeof===gy||e.$$typeof===hy)};he.typeOf=Xe;Ch.exports=he;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ku=Object.getOwnPropertySymbols,my=Object.prototype.hasOwnProperty,yy=Object.prototype.propertyIsEnumerable;function by(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function wy(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(a){o[a]=a}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}wy();var _y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sy=_y;Function.call.bind(Object.prototype.hasOwnProperty);var Ey=Sy;function Nh(){}function Mh(){}Mh.resetWarningCache=Nh;var xy=function(){function e(r,o,a,i,s,u){if(u!==Ey){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Mh,resetWarningCache:Nh};return n.PropTypes=n,n};ou.exports=xy();var gt=D.createContext(null);function Cy(e){e()}var Th=Cy,Oy=function(t){return Th=t},Ny=function(){return Th};function My(){var e=Ny(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var o=t;o;)o.callback(),o=o.next})},get:function(){for(var o=[],a=t;a;)o.push(a),a=a.next;return o},subscribe:function(o){var a=!0,i=n={callback:o,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Zu={notify:function(){},get:function(){return[]}};function Ph(e,t){var n,r=Zu;function o(d){return u(),r.subscribe(d)}function a(){r.notify()}function i(){c.onStateChange&&c.onStateChange()}function s(){return Boolean(n)}function u(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=My())}function l(){n&&(n(),n=void 0,r.clear(),r=Zu)}var c={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:s,trySubscribe:u,tryUnsubscribe:l,getListeners:function(){return r}};return c}var _s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.exports.useLayoutEffect:y.exports.useEffect;function Ty(e){var t=e.store,n=e.context,r=e.children,o=y.exports.useMemo(function(){var s=Ph(t);return s.onStateChange=s.notifyNestedSubs,{store:t,subscription:s}},[t]),a=y.exports.useMemo(function(){return t.getState()},[t]);_s(function(){var s=o.subscription;return s.trySubscribe(),a!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[o,a]);var i=n||gt;return D.createElement(i.Provider,{value:o},r)}var Dh=Ch.exports,Py={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Dy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ih={};Ih[Dh.ForwardRef]=Py;Ih[Dh.Memo]=Dy;if(typeof Symbol=="function"&&Symbol.for){var Pe=Symbol.for;Pe("react.element"),Pe("react.portal"),Pe("react.fragment"),Pe("react.strict_mode"),Pe("react.profiler"),Pe("react.provider"),Pe("react.context"),Pe("react.forward_ref"),Pe("react.suspense"),Pe("react.suspense_list"),Pe("react.memo"),Pe("react.lazy"),Pe("react.block"),Pe("react.server.block"),Pe("react.fundamental"),Pe("react.debug_trace_mode"),Pe("react.legacy_hidden")}function Rh(){var e=y.exports.useContext(gt);return e}function kh(e){e===void 0&&(e=gt);var t=e===gt?Rh:function(){return y.exports.useContext(e)};return function(){var r=t(),o=r.store;return o}}var Lh=kh();function Iy(e){e===void 0&&(e=gt);var t=e===gt?Lh:kh(e);return function(){var r=t();return r.dispatch}}var Ry=Iy(),ky=function(t,n){return t===n};function Ly(e,t,n,r){var o=y.exports.useReducer(function(p){return p+1},0),a=o[1],i=y.exports.useMemo(function(){return Ph(n,r)},[n,r]),s=y.exports.useRef(),u=y.exports.useRef(),l=y.exports.useRef(),c=y.exports.useRef(),d=n.getState(),f;try{if(e!==u.current||d!==l.current||s.current){var h=e(d);c.current===void 0||!t(h,c.current)?f=h:f=c.current}else f=c.current}catch(p){throw s.current&&(p.message+=`
The error may be correlated with this previous error:
`+s.current.stack+`

`),p}return _s(function(){u.current=e,l.current=d,c.current=f,s.current=void 0}),_s(function(){function p(){try{var v=n.getState();if(v===l.current)return;var g=u.current(v);if(t(g,c.current))return;c.current=g,l.current=v}catch(m){s.current=m}a()}return i.onStateChange=p,i.trySubscribe(),p(),function(){return i.tryUnsubscribe()}},[n,i]),f}function Ay(e){e===void 0&&(e=gt);var t=e===gt?Rh:function(){return y.exports.useContext(e)};return function(r,o){o===void 0&&(o=ky);var a=t(),i=a.store,s=a.subscription,u=Ly(r,o,i,s);return y.exports.useDebugValue(u),u}}var qy=Ay();Oy(Gg.exports.unstable_batchedUpdates);function le(e,t){return{type:e,payload:t}}var Ah="SET_ON_CONNECT",qh="SET_ON_CONNECT_START",$h="SET_ON_CONNECT_STOP",Fh="SET_ON_CONNECT_END",Bh="SET_ELEMENTS",zh="UPDATE_NODE_DIMENSIONS",jh="UPDATE_NODE_POS",Hh="UPDATE_NODE_POS_DIFF",Uh="SET_USER_SELECTION",Vh="UPDATE_USER_SELECTION",Gh="UNSET_USER_SELECTION",$y="SET_SELECTION",Yh="UNSET_NODES_SELECTION",Xh="SET_SELECTED_ELEMENTS",Kh="RESET_SELECTED_ELEMENTS",Zh="ADD_SELECTED_ELEMENTS",Wh="UPDATE_TRANSFORM",Qh="UPDATE_SIZE",Jh="INIT_D3ZOOM",ep="SET_MINZOOM",tp="SET_MAXZOOM",np="SET_TRANSLATEEXTENT",rp="SET_CONNECTION_POSITION",op="SET_CONNECTION_NODEID",ap="SET_SNAPTOGRID",ip="SET_SNAPGRID",sp="SET_INTERACTIVE",up="SET_NODES_DRAGGABLE",cp="SET_NODES_CONNECTABLE",lp="SET_ELEMENTS_SELECTABLE",dp="SET_MULTI_SELECTION_ACTIVE",fp="SET_CONNECTION_MODE",hp="SET_NODE_EXTENT",Fy=function(t){return le(Ah,{onConnect:t})},By=function(t){return le(qh,{onConnectStart:t})},zy=function(t){return le($h,{onConnectStop:t})},jy=function(t){return le(Fh,{onConnectEnd:t})},Hy=function(t){return le(Bh,t)},Uy=function(t){return le(zh,t)},Vy=function(t){return le(jh,t)},Gy=function(t){return le(Hh,t)},Yy=function(t){return le(Uh,t)},Xy=function(t){return le(Vh,t)},Ky=function(){return le(Gh)},Zy=function(t){return le($y,{selectionActive:t})},Wy=function(){return le(Yh,{nodesSelectionActive:!1})},Qy=function(){return le(Kh,{selectedElements:null})},Jy=function(t){return le(Xh,t)},eb=function(t){return le(Zh,t)},tb=function(t){return le(Wh,{transform:t})},nb=function(t){return le(Qh,{width:t.width||500,height:t.height||500})},rb=function(t){return le(Jh,t)},ob=function(t){return le(ep,t)},ab=function(t){return le(tp,t)},ib=function(t){return le(np,t)},sb=function(t){return le(rp,{connectionPosition:t})},ub=function(t){return le(op,t)},cb=function(t){return le(ap,{snapToGrid:t})},lb=function(t){return le(ip,{snapGrid:t})},db=function(t){return le(sp,{nodesDraggable:t,nodesConnectable:t,elementsSelectable:t})},fb=function(t){return le(up,{nodesDraggable:t})},hb=function(t){return le(cp,{nodesConnectable:t})},pb=function(t){return le(lp,{elementsSelectable:t})},vb=function(t){return le(dp,{multiSelectionActive:t})},gb=function(t){return le(fp,{connectionMode:t})},mb=function(t){return le(hp,t)},yb=Object.freeze({__proto__:null,setOnConnect:Fy,setOnConnectStart:By,setOnConnectStop:zy,setOnConnectEnd:jy,setElements:Hy,updateNodeDimensions:Uy,updateNodePos:Vy,updateNodePosDiff:Gy,setUserSelection:Yy,updateUserSelection:Xy,unsetUserSelection:Ky,setSelection:Zy,unsetNodesSelection:Wy,resetSelectedElements:Qy,setSelectedElements:Jy,addSelectedElements:eb,updateTransform:tb,updateSize:nb,initD3Zoom:rb,setMinZoom:ob,setMaxZoom:ab,setTranslateExtent:ib,setConnectionPosition:sb,setConnectionNodeId:ub,setSnapToGrid:cb,setSnapGrid:lb,setInteractive:db,setNodesDraggable:fb,setNodesConnectable:hb,setElementsSelectable:pb,setMultiSelectionActive:vb,setConnectionMode:gb,setNodeExtent:mb}),bb=qy;function re(e){var t=Ry(),n=e(yb),r=y.exports.useMemo(function(){return Xu(n,t)},[t,n]);return r}var Q=bb,jr=function(){var t=Lh();return t};function Ss(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wb(e){if(Array.isArray(e))return Ss(e)}function _b(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pp(e,t){if(!!e){if(typeof e=="string")return Ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ss(e,t)}}function Sb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e){return wb(e)||_b(e)||pp(e)||Sb()}function Eb(e){if(Array.isArray(e))return e}function xb(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(u){a=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function Cb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(e,t){return Eb(e)||xb(e,t)||pp(e,t)||Cb()}var Wu=function(t){var n=t?.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")},uu=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},en=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},vp=function(t,n){return{x:en(t.x,n[0][0],n[1][0]),y:en(t.y,n[0][1],n[1][1])}},Ob=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},gr=function(e){var t=y.exports.useState(!1),n=Oe(t,2),r=n[0],o=n[1];return y.exports.useEffect(function(){if(typeof e<"u"){var a=function(l){!Wu(l)&&(l.key===e||l.keyCode===e)&&(l.preventDefault(),o(!0))},i=function(l){!Wu(l)&&(l.key===e||l.keyCode===e)&&o(!1)},s=function(){return o(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",i),window.addEventListener("blur",s),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",i),window.removeEventListener("blur",s)}}},[e,o]),r};function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qu(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var gp=function(t){return"id"in t&&"source"in t&&"target"in t},Rt=function(t){return"id"in t&&!("source"in t)&&!("target"in t)},Nb=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){var a=o;return!(r.includes(o.id)||r.includes(a.target)||r.includes(a.source))})},mp=function(t,n,r,o){var a=t.x,i=t.y,s=Oe(n,3),u=s[0],l=s[1],c=s[2],d=Oe(o,2),f=d[0],h=d[1],p={x:(a-u)/c,y:(i-l)/c};return r?{x:f*Math.round(p.x/f),y:h*Math.round(p.y/h)}:p},Mb=function(t){return function(n){var r=t.getState(),o=r.transform,a=r.snapToGrid,i=r.snapGrid;return mp(n,o,a,i)}},Tb=function(t,n){var r,o;return it(it({},t),{},{id:t.id.toString(),type:t.type||"default",__rf:{position:vp(t.position,n),width:((r=t.style)===null||r===void 0?void 0:r.width)||null,height:((o=t.style)===null||o===void 0?void 0:o.height)||null,handleBounds:{},isDragging:!1}})},Pb=function(t){return it(it({},t),{},{source:t.source.toString(),target:t.target.toString(),sourceHandle:t.sourceHandle?t.sourceHandle.toString():null,targetHandle:t.targetHandle?t.targetHandle.toString():null,id:t.id.toString(),type:t.type||"default"})},yp=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},rn=function(t){var n=t.x,r=t.y,o=t.width,a=t.height;return{x:n,y:r,x2:n+o,y2:r+a}},bp=function(t){var n=t.x,r=t.y,o=t.x2,a=t.y2;return{x:n,y:r,width:o-n,height:a-r}},Db=function(t,n){return bp(yp(rn(t),rn(n)))},cu=function(t){var n=t.reduce(function(r,o){var a=o.__rf;a=a===void 0?{}:a;var i=a.position,s=a.width,u=a.height;return yp(r,rn(it(it({},i),{},{width:s,height:u})))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bp(n)},wp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=Oe(r,3),a=o[0],i=o[1],s=o[2],u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=rn({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s});return t.filter(function(d){var f=d.selectable,h=f===void 0?!0:f,p=d.__rf,v=p.position,g=p.width,m=p.height,x=p.isDragging;if(l&&!h)return!1;var N=rn(it(it({},v),{},{width:g,height:m})),M=Math.max(0,Math.min(c.x2,N.x2)-Math.max(c.x,N.x)),C=Math.max(0,Math.min(c.y2,N.y2)-Math.max(c.y,N.y)),q=Math.ceil(M*C);if(g===null||m===null||x)return!0;if(u)return q>0;var L=g*m;return q>=L})},_p=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Sp=function(t,n){return[].concat(Pt(t.map(function(r){var o=it({},r);return o.position=o.__rf.position,delete o.__rf,o})),Pt(n.map(function(r){return it({},r)})))},Ib=function(t){return function(){var n=t.getState(),r=n.nodes,o=r===void 0?[]:r,a=n.edges,i=a===void 0?[]:a;return Sp(o,i)}},Rb=function(t){return function(){var n=t.getState(),r=n.nodes,o=r===void 0?[]:r,a=n.edges,i=a===void 0?[]:a,s=n.transform;return{elements:Sp(o,i),position:[s[0],s[1]],zoom:s[2]}}},Ju=function(t,n,r,o,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),u=r/(t.height*(1+i)),l=Math.min(s,u),c=en(l,o,a),d=t.x+t.width/2,f=t.y+t.height/2,h=n/2-d*c,p=r/2-f*c;return[h,p,c]},kb=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=e.onElementsRemove,o=jr(),a=re(function(c){return c.unsetNodesSelection}),i=re(function(c){return c.setMultiSelectionActive}),s=re(function(c){return c.resetSelectedElements}),u=gr(t),l=gr(n);y.exports.useEffect(function(){var c=o.getState(),d=c.edges,f=c.selectedElements;if(r&&u&&f){var h=f.filter(Rt),p=_p(h,d),v=[].concat(Pt(f),Pt(p)).reduce(function(g,m){return g.set(m.id,m)},new Map);r(Array.from(v.values())),a(),s()}},[u]),y.exports.useEffect(function(){i(l)},[l])},Lb={value:()=>{}};function lu(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ur(n)}function ur(e){this._=e}function Ab(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ur.prototype=lu.prototype={constructor:ur,on:function(e,t){var n=this._,r=Ab(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=qb(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=ec(n[o],e.name,t);else if(t==null)for(o in n)n[o]=ec(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ur(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function qb(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function ec(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Lb,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Es="http://www.w3.org/1999/xhtml",tc={svg:"http://www.w3.org/2000/svg",xhtml:Es,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),tc.hasOwnProperty(t)?{space:tc[t],local:e}:e}function $b(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Es&&t.documentElement.namespaceURI===Es?t.createElement(e):t.createElementNS(n,e)}}function Fb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ep(e){var t=Hr(e);return(t.local?Fb:$b)(t)}function Bb(){}function du(e){return e==null?Bb:function(){return this.querySelector(e)}}function zb(e){typeof e!="function"&&(e=du(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),u,l,c=0;c<i;++c)(u=a[c])&&(l=e.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Ye(r,this._parents)}function jb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hb(){return[]}function xp(e){return e==null?Hb:function(){return this.querySelectorAll(e)}}function Ub(e){return function(){return jb(e.apply(this,arguments))}}function Vb(e){typeof e=="function"?e=Ub(e):e=xp(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,u,l=0;l<s;++l)(u=i[l])&&(r.push(e.call(u,u.__data__,l,i)),o.push(u));return new Ye(r,o)}function Cp(e){return function(){return this.matches(e)}}function Op(e){return function(t){return t.matches(e)}}var Gb=Array.prototype.find;function Yb(e){return function(){return Gb.call(this.children,e)}}function Xb(){return this.firstElementChild}function Kb(e){return this.select(e==null?Xb:Yb(typeof e=="function"?e:Op(e)))}var Zb=Array.prototype.filter;function Wb(){return Array.from(this.children)}function Qb(e){return function(){return Zb.call(this.children,e)}}function Jb(e){return this.selectAll(e==null?Wb:Qb(typeof e=="function"?e:Op(e)))}function e0(e){typeof e!="function"&&(e=Cp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],u,l=0;l<i;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ye(r,this._parents)}function Np(e){return new Array(e.length)}function t0(){return new Ye(this._enter||this._groups.map(Np),this._parents)}function mr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mr.prototype={constructor:mr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function n0(e){return function(){return e}}function r0(e,t,n,r,o,a){for(var i=0,s,u=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new mr(e,a[i]);for(;i<u;++i)(s=t[i])&&(o[i]=s)}function o0(e,t,n,r,o,a,i){var s,u,l=new Map,c=t.length,d=a.length,f=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(f[s]=h=i.call(u,u.__data__,s,t)+"",l.has(h)?o[s]=u:l.set(h,u));for(s=0;s<d;++s)h=i.call(e,a[s],s,a)+"",(u=l.get(h))?(r[s]=u,u.__data__=a[s],l.delete(h)):n[s]=new mr(e,a[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(f[s])===u&&(o[s]=u)}function a0(e){return e.__data__}function i0(e,t){if(!arguments.length)return Array.from(this,a0);var n=t?o0:r0,r=this._parents,o=this._groups;typeof e!="function"&&(e=n0(e));for(var a=o.length,i=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],d=o[l],f=d.length,h=s0(e.call(c,c&&c.__data__,l,r)),p=h.length,v=s[l]=new Array(p),g=i[l]=new Array(p),m=u[l]=new Array(f);n(c,d,v,g,m,h,t);for(var x=0,N=0,M,C;x<p;++x)if(M=v[x]){for(x>=N&&(N=x+1);!(C=g[N])&&++N<p;);M._next=C||null}}return i=new Ye(i,r),i._enter=s,i._exit=u,i}function s0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function u0(){return new Ye(this._exit||this._groups.map(Np),this._parents)}function c0(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function l0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),u=0;u<i;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),h,p=0;p<d;++p)(h=l[p]||c[p])&&(f[p]=h);for(;u<o;++u)s[u]=n[u];return new Ye(s,this._parents)}function d0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function f0(e){e||(e=h0);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,u=o[a]=new Array(s),l,c=0;c<s;++c)(l=i[c])&&(u[c]=l);u.sort(t)}return new Ye(o,this._parents).order()}function h0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function p0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function v0(){return Array.from(this)}function g0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function m0(){let e=0;for(const t of this)++e;return e}function y0(){return!this.node()}function b0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function w0(e){return function(){this.removeAttribute(e)}}function _0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S0(e,t){return function(){this.setAttribute(e,t)}}function E0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function C0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function O0(e,t){var n=Hr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_0:w0:typeof t=="function"?n.local?C0:x0:n.local?E0:S0)(n,t))}function Mp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function N0(e){return function(){this.style.removeProperty(e)}}function M0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function T0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function P0(e,t,n){return arguments.length>1?this.each((t==null?N0:typeof t=="function"?T0:M0)(e,t,n??"")):on(this.node(),e)}function on(e,t){return e.style.getPropertyValue(t)||Mp(e).getComputedStyle(e,null).getPropertyValue(t)}function D0(e){return function(){delete this[e]}}function I0(e,t){return function(){this[e]=t}}function R0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function k0(e,t){return arguments.length>1?this.each((t==null?D0:typeof t=="function"?R0:I0)(e,t)):this.node()[e]}function Tp(e){return e.trim().split(/^|\s+/)}function fu(e){return e.classList||new Pp(e)}function Pp(e){this._node=e,this._names=Tp(e.getAttribute("class")||"")}Pp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dp(e,t){for(var n=fu(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Ip(e,t){for(var n=fu(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function L0(e){return function(){Dp(this,e)}}function A0(e){return function(){Ip(this,e)}}function q0(e,t){return function(){(t.apply(this,arguments)?Dp:Ip)(this,e)}}function $0(e,t){var n=Tp(e+"");if(arguments.length<2){for(var r=fu(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?q0:t?L0:A0)(n,t))}function F0(){this.textContent=""}function B0(e){return function(){this.textContent=e}}function z0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function j0(e){return arguments.length?this.each(e==null?F0:(typeof e=="function"?z0:B0)(e)):this.node().textContent}function H0(){this.innerHTML=""}function U0(e){return function(){this.innerHTML=e}}function V0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function G0(e){return arguments.length?this.each(e==null?H0:(typeof e=="function"?V0:U0)(e)):this.node().innerHTML}function Y0(){this.nextSibling&&this.parentNode.appendChild(this)}function X0(){return this.each(Y0)}function K0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z0(){return this.each(K0)}function W0(e){var t=typeof e=="function"?e:Ep(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Q0(){return null}function J0(e,t){var n=typeof e=="function"?e:Ep(e),r=t==null?Q0:typeof t=="function"?t:du(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ew(){var e=this.parentNode;e&&e.removeChild(this)}function tw(){return this.each(ew)}function nw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ow(e){return this.select(e?rw:nw)}function aw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function iw(e){return function(t){e.call(this,t,this.__data__)}}function sw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function uw(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function cw(e,t,n){return function(){var r=this.__on,o,a=iw(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function lw(e,t,n){var r=sw(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(o=0,c=s[u];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?cw:uw,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function Rp(e,t,n){var r=Mp(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function dw(e,t){return function(){return Rp(this,e,t)}}function fw(e,t){return function(){return Rp(this,e,t.apply(this,arguments))}}function hw(e,t){return this.each((typeof t=="function"?fw:dw)(e,t))}function*pw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var kp=[null];function Ye(e,t){this._groups=e,this._parents=t}function qn(){return new Ye([[document.documentElement]],kp)}function vw(){return this}Ye.prototype=qn.prototype={constructor:Ye,select:zb,selectAll:Vb,selectChild:Kb,selectChildren:Jb,filter:e0,data:i0,enter:t0,exit:u0,join:c0,merge:l0,selection:vw,order:d0,sort:f0,call:p0,nodes:v0,node:g0,size:m0,empty:y0,each:b0,attr:O0,style:P0,property:k0,classed:$0,text:j0,html:G0,raise:X0,lower:Z0,append:W0,insert:J0,remove:tw,clone:ow,datum:aw,on:lw,dispatch:hw,[Symbol.iterator]:pw};function Mt(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],kp)}function gw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ct(e,t){if(e=gw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const xs={capture:!0,passive:!1};function Cs(e){e.preventDefault(),e.stopImmediatePropagation()}function mw(e){var t=e.document.documentElement,n=Mt(e).on("dragstart.drag",Cs,xs);"onselectstart"in t?n.on("selectstart.drag",Cs,xs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yw(e,t){var n=e.document.documentElement,r=Mt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Cs,xs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function hu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $n(){}var En=.7,yr=1/En,tn="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bw=/^#([0-9a-f]{3,8})$/,ww=new RegExp("^rgb\\("+[tn,tn,tn]+"\\)$"),_w=new RegExp("^rgb\\("+[at,at,at]+"\\)$"),Sw=new RegExp("^rgba\\("+[tn,tn,tn,xn]+"\\)$"),Ew=new RegExp("^rgba\\("+[at,at,at,xn]+"\\)$"),xw=new RegExp("^hsl\\("+[xn,at,at]+"\\)$"),Cw=new RegExp("^hsla\\("+[xn,at,at,xn]+"\\)$"),nc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hu($n,Cn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rc,formatHex:rc,formatHsl:Ow,formatRgb:oc,toString:oc});function rc(){return this.rgb().formatHex()}function Ow(){return Ap(this).formatHsl()}function oc(){return this.rgb().formatRgb()}function Cn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ac(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ww.exec(e))?new Ve(t[1],t[2],t[3],1):(t=_w.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sw.exec(e))?Qn(t[1],t[2],t[3],t[4]):(t=Ew.exec(e))?Qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xw.exec(e))?uc(t[1],t[2]/100,t[3]/100,1):(t=Cw.exec(e))?uc(t[1],t[2]/100,t[3]/100,t[4]):nc.hasOwnProperty(e)?ac(nc[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function ac(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function Qn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ve(e,t,n,r)}function Nw(e){return e instanceof $n||(e=Cn(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function Os(e,t,n,r){return arguments.length===1?Nw(e):new Ve(e,t,n,r??1)}function Ve(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}hu(Ve,Os,Lp($n,{brighter:function(e){return e=e==null?yr:Math.pow(yr,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?En:Math.pow(En,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ic,formatHex:ic,formatRgb:sc,toString:sc}));function ic(){return"#"+po(this.r)+po(this.g)+po(this.b)}function sc(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function po(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function uc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rt(e,t,n,r)}function Ap(e){if(e instanceof rt)return new rt(e.h,e.s,e.l,e.opacity);if(e instanceof $n||(e=Cn(e)),!e)return new rt;if(e instanceof rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,u=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=u<.5?a+o:2-a-o,i*=60):s=u>0&&u<1?0:i,new rt(i,s,u,e.opacity)}function Mw(e,t,n,r){return arguments.length===1?Ap(e):new rt(e,t,n,r??1)}function rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hu(rt,Mw,Lp($n,{brighter:function(e){return e=e==null?yr:Math.pow(yr,e),new rt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?En:Math.pow(En,e),new rt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ve(vo(e>=240?e-240:e+120,o,r),vo(e,o,r),vo(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function vo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var qp=e=>()=>e;function Tw(e,t){return function(n){return e+n*t}}function Pw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dw(e){return(e=+e)==1?$p:function(t,n){return n-t?Pw(t,n,e):qp(isNaN(t)?n:t)}}function $p(e,t){var n=t-e;return n?Tw(e,n):qp(isNaN(e)?t:e)}var cc=function e(t){var n=Dw(t);function r(o,a){var i=n((o=Os(o)).r,(a=Os(a)).r),s=n(o.g,a.g),u=n(o.b,a.b),l=$p(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=s(c),o.b=u(c),o.opacity=l(c),o+""}}return r.gamma=e,r}(1);function Nt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,go=new RegExp(Ns.source,"g");function Iw(e){return function(){return e}}function Rw(e){return function(t){return e(t)+""}}function kw(e,t){var n=Ns.lastIndex=go.lastIndex=0,r,o,a,i=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Ns.exec(e))&&(o=go.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,u.push({i,x:Nt(r,o)})),n=go.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?u[0]?Rw(u[0].x):Iw(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}var lc=180/Math.PI,Ms={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fp(e,t,n,r,o,a){var i,s,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*lc,skewX:Math.atan(u)*lc,scaleX:i,scaleY:s}}var Jn;function Lw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ms:Fp(t.a,t.b,t.c,t.d,t.e,t.f)}function Aw(e){return e==null||(Jn||(Jn=document.createElementNS("http://www.w3.org/2000/svg","g")),Jn.setAttribute("transform",e),!(e=Jn.transform.baseVal.consolidate()))?Ms:(e=e.matrix,Fp(e.a,e.b,e.c,e.d,e.e,e.f))}function Bp(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,c,d,f,h,p){if(l!==d||c!==f){var v=h.push("translate(",null,t,null,n);p.push({i:v-4,x:Nt(l,d)},{i:v-2,x:Nt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function i(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Nt(l,c)})):c&&d.push(o(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Nt(l,c)}):c&&d.push(o(d)+"skewX("+c+r)}function u(l,c,d,f,h,p){if(l!==d||c!==f){var v=h.push(o(h)+"scale(",null,",",null,")");p.push({i:v-4,x:Nt(l,d)},{i:v-2,x:Nt(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,d,f),i(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var p=-1,v=f.length,g;++p<v;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var qw=Bp(Lw,"px, ","px)","deg)"),$w=Bp(Aw,", ",")",")"),Fw=1e-12;function dc(e){return((e=Math.exp(e))+1/e)/2}function Bw(e){return((e=Math.exp(e))-1/e)/2}function zw(e){return((e=Math.exp(2*e))-1)/(e+1)}var jw=function e(t,n,r){function o(a,i){var s=a[0],u=a[1],l=a[2],c=i[0],d=i[1],f=i[2],h=c-s,p=d-u,v=h*h+p*p,g,m;if(v<Fw)m=Math.log(f/l)/t,g=function(L){return[s+L*h,u+L*p,l*Math.exp(t*L*m)]};else{var x=Math.sqrt(v),N=(f*f-l*l+r*v)/(2*l*n*x),M=(f*f-l*l-r*v)/(2*f*n*x),C=Math.log(Math.sqrt(N*N+1)-N),q=Math.log(Math.sqrt(M*M+1)-M);m=(q-C)/t,g=function(L){var B=L*m,F=dc(C),A=l/(n*x)*(F*zw(t*B+C)-Bw(C));return[s+A*h,u+A*p,l*F/dc(t*B+C)]}}return g.duration=m*1e3*t/Math.SQRT2,g}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,u=s*s;return e(i,s,u)},o}(Math.SQRT2,2,4),an=0,mn=0,hn=0,zp=1e3,br,yn,wr=0,Yt=0,Ur=0,On=typeof performance=="object"&&performance.now?performance:Date,jp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pu(){return Yt||(jp(Hw),Yt=On.now()+Ur)}function Hw(){Yt=0}function _r(){this._call=this._time=this._next=null}_r.prototype=Hp.prototype={constructor:_r,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pu():+n)+(t==null?0:+t),!this._next&&yn!==this&&(yn?yn._next=this:br=this,yn=this),this._call=e,this._time=n,Ts()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ts())}};function Hp(e,t,n){var r=new _r;return r.restart(e,t,n),r}function Uw(){pu(),++an;for(var e=br,t;e;)(t=Yt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--an}function fc(){Yt=(wr=On.now())+Ur,an=mn=0;try{Uw()}finally{an=0,Gw(),Yt=0}}function Vw(){var e=On.now(),t=e-wr;t>zp&&(Ur-=t,wr=e)}function Gw(){for(var e,t=br,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:br=n);yn=e,Ts(r)}function Ts(e){if(!an){mn&&(mn=clearTimeout(mn));var t=e-Yt;t>24?(e<1/0&&(mn=setTimeout(fc,e-On.now()-Ur)),hn&&(hn=clearInterval(hn))):(hn||(wr=On.now(),hn=setInterval(Vw,zp)),an=1,jp(fc))}}function hc(e,t,n){var r=new _r;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Yw=lu("start","end","cancel","interrupt"),Xw=[],Up=0,pc=1,Ps=2,cr=3,vc=4,Ds=5,lr=6;function Vr(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Kw(e,n,{name:t,index:r,group:o,on:Yw,tween:Xw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Up})}function vu(e,t){var n=tt(e,t);if(n.state>Up)throw new Error("too late; already scheduled");return n}function st(e,t){var n=tt(e,t);if(n.state>cr)throw new Error("too late; already running");return n}function tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kw(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Hp(a,0,n.time);function a(l){n.state=pc,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var c,d,f,h;if(n.state!==pc)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===cr)return hc(i);h.state===vc?(h.state=lr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=lr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(hc(function(){n.state===cr&&(n.state=vc,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Ps,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ps){for(n.state=cr,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ds,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Ds&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=lr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function dr(e,t){var n=e.__transition,r,o,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Ps&&r.state<Ds,r.state=lr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function Zw(e){return this.each(function(){dr(this,e)})}function Ww(e,t){var n,r;return function(){var o=st(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function Qw(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=st(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=s;break}u===l&&o.push(s)}a.tween=o}}function Jw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tt(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Ww:Qw)(n,e,t))}function gu(e,t,n){var r=e._id;return e.each(function(){var o=st(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return tt(o,r).value[t]}}function Vp(e,t){var n;return(typeof t=="number"?Nt:t instanceof Cn?cc:(n=Cn(t))?(t=n,cc):kw)(e,t)}function e_(e){return function(){this.removeAttribute(e)}}function t_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n_(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function r_(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function o_(e,t,n){var r,o,a;return function(){var i,s=n(this),u;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),u=s+"",i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,s)))}}function a_(e,t,n){var r,o,a;return function(){var i,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),u=s+"",i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,s)))}}function i_(e,t){var n=Hr(e),r=n==="transform"?$w:Vp;return this.attrTween(e,typeof t=="function"?(n.local?a_:o_)(n,r,gu(this,"attr."+e,t)):t==null?(n.local?t_:e_)(n):(n.local?r_:n_)(n,r,t))}function s_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function u_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function c_(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&u_(e,a)),n}return o._value=t,o}function l_(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&s_(e,a)),n}return o._value=t,o}function d_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Hr(e);return this.tween(n,(r.local?c_:l_)(r,t))}function f_(e,t){return function(){vu(this,e).delay=+t.apply(this,arguments)}}function h_(e,t){return t=+t,function(){vu(this,e).delay=t}}function p_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?f_:h_)(t,e)):tt(this.node(),t).delay}function v_(e,t){return function(){st(this,e).duration=+t.apply(this,arguments)}}function g_(e,t){return t=+t,function(){st(this,e).duration=t}}function m_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?v_:g_)(t,e)):tt(this.node(),t).duration}function y_(e,t){if(typeof t!="function")throw new Error;return function(){st(this,e).ease=t}}function b_(e){var t=this._id;return arguments.length?this.each(y_(t,e)):tt(this.node(),t).ease}function w_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;st(this,e).ease=n}}function __(e){if(typeof e!="function")throw new Error;return this.each(w_(this._id,e))}function S_(e){typeof e!="function"&&(e=Cp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],u,l=0;l<i;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new mt(r,this._parents,this._name,this._id)}function E_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],c=u.length,d=i[s]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;s<r;++s)i[s]=t[s];return new mt(i,this._parents,this._name,this._id)}function x_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function C_(e,t,n){var r,o,a=x_(t)?vu:st;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function O_(e,t){var n=this._id;return arguments.length<2?tt(this.node(),n).on.on(e):this.each(C_(n,e,t))}function N_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function M_(){return this.on("end.remove",N_(this._id))}function T_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=du(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],u=s.length,l=a[i]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,Vr(l[f],t,n,f,l,tt(c,n)));return new mt(a,this._parents,t,n)}function P_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xp(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,p=tt(c,n),v=0,g=f.length;v<g;++v)(h=f[v])&&Vr(h,t,n,v,f,p);a.push(f),i.push(c)}return new mt(a,i,t,n)}var D_=qn.prototype.constructor;function I_(){return new D_(this._groups,this._parents)}function R_(e,t){var n,r,o;return function(){var a=on(this,e),i=(this.style.removeProperty(e),on(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function Gp(e){return function(){this.style.removeProperty(e)}}function k_(e,t,n){var r,o=n+"",a;return function(){var i=on(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function L_(e,t,n){var r,o,a;return function(){var i=on(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),on(this,e))),i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,s))}}function A_(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var u=st(this,e),l=u.on,c=u.value[a]==null?s||(s=Gp(t)):void 0;(l!==n||o!==c)&&(r=(n=l).copy()).on(i,o=c),u.on=r}}function q_(e,t,n){var r=(e+="")=="transform"?qw:Vp;return t==null?this.styleTween(e,R_(e,r)).on("end.style."+e,Gp(e)):typeof t=="function"?this.styleTween(e,L_(e,r,gu(this,"style."+e,t))).each(A_(this._id,e)):this.styleTween(e,k_(e,r,t),n).on("end.style."+e,null)}function $_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function F_(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&$_(e,i,n)),r}return a._value=t,a}function B_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,F_(e,t,n??""))}function z_(e){return function(){this.textContent=e}}function j_(e){return function(){var t=e(this);this.textContent=t??""}}function H_(e){return this.tween("text",typeof e=="function"?j_(gu(this,"text",e)):z_(e==null?"":e+""))}function U_(e){return function(t){this.textContent=e.call(this,t)}}function V_(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&U_(o)),t}return r._value=e,r}function G_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,V_(e))}function Y_(){for(var e=this._name,t=this._id,n=Yp(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,u,l=0;l<s;++l)if(u=i[l]){var c=tt(u,t);Vr(u,e,n,l,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mt(r,this._parents,e,n)}function X_(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},u={value:function(){--o===0&&a()}};n.each(function(){var l=st(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),o===0&&a()})}var K_=0;function mt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Yp(){return++K_}var lt=qn.prototype;mt.prototype={constructor:mt,select:T_,selectAll:P_,selectChild:lt.selectChild,selectChildren:lt.selectChildren,filter:S_,merge:E_,selection:I_,transition:Y_,call:lt.call,nodes:lt.nodes,node:lt.node,size:lt.size,empty:lt.empty,each:lt.each,on:O_,attr:i_,attrTween:d_,style:q_,styleTween:B_,text:H_,textTween:G_,remove:M_,tween:Jw,delay:p_,duration:m_,ease:b_,easeVarying:__,end:X_,[Symbol.iterator]:lt[Symbol.iterator]};function Z_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var W_={time:null,delay:0,duration:250,ease:Z_};function Q_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function J_(e){var t,n;e instanceof mt?(t=e._id,e=e._name):(t=Yp(),(n=W_).time=pu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,u,l=0;l<s;++l)(u=i[l])&&Vr(u,e,t,l,i,n||Q_(u,t));return new mt(r,this._parents,e,t)}qn.prototype.interrupt=Zw;qn.prototype.transition=J_;var er=e=>()=>e;function eS(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Dt(e,t,n){this.k=e,this.x=t,this.y=n}Dt.prototype={constructor:Dt,scale:function(e){return e===1?this:new Dt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Dt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jt=new Dt(1,0,0);function mo(e){e.stopImmediatePropagation()}function pn(e){e.preventDefault(),e.stopImmediatePropagation()}function tS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function gc(){return this.__zoom||jt}function rS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function oS(){return navigator.maxTouchPoints||"ontouchstart"in this}function aS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function iS(){var e=tS,t=nS,n=aS,r=rS,o=oS,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,u=jw,l=lu("start","zoom","end"),c,d,f,h=500,p=150,v=0,g=10;function m(_){_.property("__zoom",gc).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",K).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",oe).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,R,O,T){var j=_.selection?_.selection():_;j.property("__zoom",gc),_!==j?C(_,R,O,T):j.interrupt().each(function(){q(this,arguments).event(T).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},m.scaleBy=function(_,R,O,T){m.scaleTo(_,function(){var j=this.__zoom.k,U=typeof R=="function"?R.apply(this,arguments):R;return j*U},O,T)},m.scaleTo=function(_,R,O,T){m.transform(_,function(){var j=t.apply(this,arguments),U=this.__zoom,V=O==null?M(j):typeof O=="function"?O.apply(this,arguments):O,Y=U.invert(V),E=typeof R=="function"?R.apply(this,arguments):R;return n(N(x(U,E),V,Y),j,i)},O,T)},m.translateBy=function(_,R,O,T){m.transform(_,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),i)},null,T)},m.translateTo=function(_,R,O,T,j){m.transform(_,function(){var U=t.apply(this,arguments),V=this.__zoom,Y=T==null?M(U):typeof T=="function"?T.apply(this,arguments):T;return n(jt.translate(Y[0],Y[1]).scale(V.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof O=="function"?-O.apply(this,arguments):-O),U,i)},T,j)};function x(_,R){return R=Math.max(a[0],Math.min(a[1],R)),R===_.k?_:new Dt(R,_.x,_.y)}function N(_,R,O){var T=R[0]-O[0]*_.k,j=R[1]-O[1]*_.k;return T===_.x&&j===_.y?_:new Dt(_.k,T,j)}function M(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function C(_,R,O,T){_.on("start.zoom",function(){q(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(T).end()}).tween("zoom",function(){var j=this,U=arguments,V=q(j,U).event(T),Y=t.apply(j,U),E=O==null?M(Y):typeof O=="function"?O.apply(j,U):O,w=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),S=j.__zoom,P=typeof R=="function"?R.apply(j,U):R,I=u(S.invert(E).concat(w/S.k),P.invert(E).concat(w/P.k));return function(z){if(z===1)z=P;else{var X=I(z),k=w/X[2];z=new Dt(k,E[0]-X[0]*k,E[1]-X[1]*k)}V.zoom(null,z)}})}function q(_,R,O){return!O&&_.__zooming||new L(_,R)}function L(_,R){this.that=_,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,R),this.taps=0}L.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,R){return this.mouse&&_!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var R=Mt(this.that).datum();l.call(_,this.that,new eS(_,{sourceEvent:this.sourceEvent,target:m,type:_,transform:this.that.__zoom,dispatch:l}),R)}};function B(_,...R){if(!e.apply(this,arguments))return;var O=q(this,R).event(_),T=this.__zoom,j=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,r.apply(this,arguments)))),U=Ct(_);if(O.wheel)(O.mouse[0][0]!==U[0]||O.mouse[0][1]!==U[1])&&(O.mouse[1]=T.invert(O.mouse[0]=U)),clearTimeout(O.wheel);else{if(T.k===j)return;O.mouse=[U,T.invert(U)],dr(this),O.start()}pn(_),O.wheel=setTimeout(V,p),O.zoom("mouse",n(N(x(T,j),O.mouse[0],O.mouse[1]),O.extent,i));function V(){O.wheel=null,O.end()}}function F(_,...R){if(f||!e.apply(this,arguments))return;var O=_.currentTarget,T=q(this,R,!0).event(_),j=Mt(_.view).on("mousemove.zoom",E,!0).on("mouseup.zoom",w,!0),U=Ct(_,O),V=_.clientX,Y=_.clientY;mw(_.view),mo(_),T.mouse=[U,this.__zoom.invert(U)],dr(this),T.start();function E(S){if(pn(S),!T.moved){var P=S.clientX-V,I=S.clientY-Y;T.moved=P*P+I*I>v}T.event(S).zoom("mouse",n(N(T.that.__zoom,T.mouse[0]=Ct(S,O),T.mouse[1]),T.extent,i))}function w(S){j.on("mousemove.zoom mouseup.zoom",null),yw(S.view,T.moved),pn(S),T.event(S).end()}}function A(_,...R){if(!!e.apply(this,arguments)){var O=this.__zoom,T=Ct(_.changedTouches?_.changedTouches[0]:_,this),j=O.invert(T),U=O.k*(_.shiftKey?.5:2),V=n(N(x(O,U),T,j),t.apply(this,R),i);pn(_),s>0?Mt(this).transition().duration(s).call(C,V,T,_):Mt(this).call(m.transform,V,T,_)}}function K(_,...R){if(!!e.apply(this,arguments)){var O=_.touches,T=O.length,j=q(this,R,_.changedTouches.length===T).event(_),U,V,Y,E;for(mo(_),V=0;V<T;++V)Y=O[V],E=Ct(Y,this),E=[E,this.__zoom.invert(E),Y.identifier],j.touch0?!j.touch1&&j.touch0[2]!==E[2]&&(j.touch1=E,j.taps=0):(j.touch0=E,U=!0,j.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(j.taps<2&&(d=E[0],c=setTimeout(function(){c=null},h)),dr(this),j.start())}}function G(_,...R){if(!!this.__zooming){var O=q(this,R).event(_),T=_.changedTouches,j=T.length,U,V,Y,E;for(pn(_),U=0;U<j;++U)V=T[U],Y=Ct(V,this),O.touch0&&O.touch0[2]===V.identifier?O.touch0[0]=Y:O.touch1&&O.touch1[2]===V.identifier&&(O.touch1[0]=Y);if(V=O.that.__zoom,O.touch1){var w=O.touch0[0],S=O.touch0[1],P=O.touch1[0],I=O.touch1[1],z=(z=P[0]-w[0])*z+(z=P[1]-w[1])*z,X=(X=I[0]-S[0])*X+(X=I[1]-S[1])*X;V=x(V,Math.sqrt(z/X)),Y=[(w[0]+P[0])/2,(w[1]+P[1])/2],E=[(S[0]+I[0])/2,(S[1]+I[1])/2]}else if(O.touch0)Y=O.touch0[0],E=O.touch0[1];else return;O.zoom("touch",n(N(V,Y,E),O.extent,i))}}function oe(_,...R){if(!!this.__zooming){var O=q(this,R).event(_),T=_.changedTouches,j=T.length,U,V;for(mo(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),U=0;U<j;++U)V=T[U],O.touch0&&O.touch0[2]===V.identifier?delete O.touch0:O.touch1&&O.touch1[2]===V.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(V=Ct(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<g)){var Y=Mt(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:er(+_),m):r},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:er(!!_),m):e},m.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:er(!!_),m):o},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:er([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(a[0]=+_[0],a[1]=+_[1],m):[a[0],a[1]]},m.translateExtent=function(_){return arguments.length?(i[0][0]=+_[0][0],i[1][0]=+_[1][0],i[0][1]=+_[0][1],i[1][1]=+_[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(s=+_,m):s},m.interpolate=function(_){return arguments.length?(u=_,m):u},m.on=function(){var _=l.on.apply(l,arguments);return _===l?m:_},m.clickDistance=function(_){return arguments.length?(v=(_=+_)*_,m):Math.sqrt(v)},m.tapDistance=function(_){return arguments.length?(g=+_,m):g},m}var sS=function(e){var t=re(function(n){return n.updateSize});y.exports.useEffect(function(){var n,r=function(){if(!!e.current){var a=uu(e.current);(a.height===0||a.width===0)&&console.warn("The React Flow parent container needs a width and a height to render the graph."),t(a)}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])},Z;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Z||(Z={}));var mc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(mc||(mc={}));var sn;(function(e){e.Lines="lines",e.Dots="dots"})(sn||(sn={}));var un;(function(e){e.Strict="strict",e.Loose="loose"})(un||(un={}));var Ht;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"})(Ht||(Ht={}));var nn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nn||(nn={}));var uS=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},yo=function(t){return{x:t.x,y:t.y,zoom:t.k}},bo=function(t){return t.target.closest(".nowheel")},cS=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,u=s===void 0?!0:s,l=t.panOnScroll,c=l===void 0?!1:l,d=t.panOnScrollSpeed,f=d===void 0?.5:d,h=t.panOnScrollMode,p=h===void 0?nn.Free:h,v=t.zoomOnDoubleClick,g=v===void 0?!0:v,m=t.selectionKeyPressed,x=t.elementsSelectable,N=t.paneMoveable,M=N===void 0?!0:N,C=t.defaultPosition,q=C===void 0?[0,0]:C,L=t.defaultZoom,B=L===void 0?1:L,F=t.translateExtent,A=t.zoomActivationKeyCode,K=t.preventScrolling,G=K===void 0?!0:K,oe=t.children,_=y.exports.useRef(null),R=y.exports.useRef({x:0,y:0,zoom:0}),O=jr(),T=Q(function(w){return w.d3Zoom}),j=Q(function(w){return w.d3Selection}),U=Q(function(w){return w.d3ZoomHandler}),V=re(function(w){return w.initD3Zoom}),Y=re(function(w){return w.updateTransform}),E=gr(A);return sS(_),y.exports.useEffect(function(){if(_.current){var w=O.getState(),S=typeof F<"u"?F:w.translateExtent,P=iS().scaleExtent([w.minZoom,w.maxZoom]).translateExtent(S),I=Mt(_.current).call(P),z=en(q[0],S[0][0],S[1][0]),X=en(q[1],S[0][1],S[1][1]),k=en(B,w.minZoom,w.maxZoom),H=jt.translate(z,X).scale(k);P.transform(I,H),V({d3Zoom:P,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[z,X,k]})}},[]),y.exports.useEffect(function(){j&&T&&(c&&!E?j.on("wheel",function(w){if(bo(w))return!1;w.preventDefault(),w.stopImmediatePropagation();var S=j.property("__zoom").k||1;if(w.ctrlKey&&u){var P=Ct(w),I=-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)*10,z=S*Math.pow(2,I);T.scaleTo(j,z,P);return}var X=w.deltaMode===1?20:1,k=p===nn.Vertical?0:w.deltaX*X,H=p===nn.Horizontal?0:w.deltaY*X;T.translateBy(j,-(k/S)*f,-(H/S)*f)}).on("wheel.zoom",null):typeof U<"u"&&j.on("wheel",function(w){if(!G||bo(w))return null;w.preventDefault()}).on("wheel.zoom",U))},[c,p,j,T,U,E,u,G]),y.exports.useEffect(function(){T&&(m?T.on("zoom",null):T.on("zoom",function(w){if(Y([w.transform.x,w.transform.y,w.transform.k]),n){var S=yo(w.transform);n(S)}}))},[m,T,Y,n]),y.exports.useEffect(function(){T&&(r?T.on("start",function(w){var S=yo(w.transform);R.current=S,r(S)}):T.on("start",null))},[T,r]),y.exports.useEffect(function(){T&&(o?T.on("end",function(w){if(uS(R.current,w.transform)){var S=yo(w.transform);R.current=S,o(S)}}):T.on("end",null))},[T,o]),y.exports.useEffect(function(){T&&T.filter(function(w){var S=E||i,P=u&&w.ctrlKey;return!M&&!S&&!c&&!g&&!u||m||!g&&w.type==="dblclick"||bo(w)&&w.type==="wheel"||(w.target.closest(".react-flow__node")||w.target.closest(".react-flow__edge"))&&w.type!=="wheel"||w.target.closest(".react-flow__nodesselection")&&w.type!=="wheel"||!u&&w.ctrlKey&&w.type==="wheel"||!S&&!c&&!P&&w.type==="wheel"||!M&&(w.type==="mousedown"||w.type==="touchstart")?!1:(!w.ctrlKey||w.type==="wheel")&&!w.button})},[T,i,u,c,g,M,m,x,E]),D.createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:_},oe)};function yc(e){var t=e.target.closest(".react-flow");if(!!t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var lS=function(){var t=Q(function(n){return n.userSelectionRect});return t.draw?D.createElement("div",{className:"react-flow__selection",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null},dS=y.exports.memo(function(e){var t=e.selectionKeyPressed,n=Q(function(h){return h.selectionActive}),r=Q(function(h){return h.elementsSelectable}),o=re(function(h){return h.setUserSelection}),a=re(function(h){return h.updateUserSelection}),i=re(function(h){return h.unsetUserSelection}),s=re(function(h){return h.unsetNodesSelection}),u=n||t;if(!r||!u)return null;var l=function(p){var v=yc(p);!v||o(v)},c=function(p){if(!(!t||!n)){var v=yc(p);!v||a(v)}},d=function(){return i()},f=function(){i(),s()};return D.createElement("div",{className:"react-flow__selectionpane",onMouseDown:l,onMouseMove:c,onMouseUp:d,onMouseLeave:f},D.createElement(lS,null))}),Gr={exports:{}},Xp={};function Kp(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Kp(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function fS(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=Kp(t))&&(r&&(r+=" "),r+=n);return r}var hS=Object.freeze({__proto__:null,default:fS}),pS=dy(hS),we={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.findInArray=vS;ut.isFunction=gS;ut.isNum=mS;ut.int=yS;ut.dontSetMe=bS;function vS(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function gS(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function mS(e){return typeof e=="number"&&!isNaN(e)}function yS(e){return parseInt(e,10)}function bS(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getPrefix=Zp;Kt.browserPrefixToKey=Wp;Kt.browserPrefixToStyle=wS;Kt.default=void 0;var wo=["Moz","Webkit","O","ms"];function Zp(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var r=(e=window.document)===null||e===void 0||(t=e.documentElement)===null||t===void 0?void 0:t.style;if(!r||n in r)return"";for(var o=0;o<wo.length;o++)if(Wp(n,wo[o])in r)return wo[o];return""}function Wp(e,t){return t?"".concat(t).concat(_S(e)):e}function wS(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function _S(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}var SS=Zp();Kt.default=SS;function fr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fr=function(n){return typeof n}:fr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fr(e)}Object.defineProperty(we,"__esModule",{value:!0});we.matchesSelector=tv;we.matchesSelectorAndParentsTo=xS;we.addEvent=CS;we.removeEvent=OS;we.outerHeight=NS;we.outerWidth=MS;we.innerHeight=TS;we.innerWidth=PS;we.offsetXYFromParent=DS;we.createCSSTransform=IS;we.createSVGTransform=RS;we.getTranslation=mu;we.getTouch=kS;we.getTouchIdentifier=LS;we.addUserSelectStyles=AS;we.removeUserSelectStyles=qS;we.addClassName=nv;we.removeClassName=rv;var Ge=ut,bc=ES(Kt);function Qp(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Qp=function(o){return o?n:t})(e)}function ES(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||fr(e)!=="object"&&typeof e!="function")return{default:e};var n=Qp(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Jp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wc(Object(n),!0).forEach(function(r){ev(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tr="";function tv(e,t){return tr||(tr=(0,Ge.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ge.isFunction)(e[n])})),(0,Ge.isFunction)(e[tr])?e[tr](t):!1}function xS(e,t,n){var r=e;do{if(tv(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function CS(e,t,n,r){if(!!e){var o=Jp({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}}function OS(e,t,n,r){if(!!e){var o=Jp({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}}function NS(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Ge.int)(n.borderTopWidth),t+=(0,Ge.int)(n.borderBottomWidth),t}function MS(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Ge.int)(n.borderLeftWidth),t+=(0,Ge.int)(n.borderRightWidth),t}function TS(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Ge.int)(n.paddingTop),t-=(0,Ge.int)(n.paddingBottom),t}function PS(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Ge.int)(n.paddingLeft),t-=(0,Ge.int)(n.paddingRight),t}function DS(e,t,n){var r=t===t.ownerDocument.body,o=r?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-o.left)/n,i=(e.clientY+t.scrollTop-o.top)/n;return{x:a,y:i}}function IS(e,t){var n=mu(e,t,"px");return ev({},(0,bc.browserPrefixToKey)("transform",bc.default),n)}function RS(e,t){var n=mu(e,t,"");return n}function mu(e,t,n){var r=e.x,o=e.y,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var i="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(i,", ").concat(s,")")+a}return a}function kS(e,t){return e.targetTouches&&(0,Ge.findInArray)(e.targetTouches,function(n){return t===n.identifier})||e.changedTouches&&(0,Ge.findInArray)(e.changedTouches,function(n){return t===n.identifier})}function LS(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function AS(e){if(!!e){var t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&nv(e.body,"react-draggable-transparent-selection")}}function qS(e){if(!!e)try{if(e.body&&rv(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function nv(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function rv(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.getBoundPosition=$S;ct.snapToGrid=FS;ct.canDragX=BS;ct.canDragY=zS;ct.getControlPosition=jS;ct.createCoreData=HS;ct.createDraggableData=US;var He=ut,Qt=we;function $S(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r=typeof r=="string"?r:VS(r);var o=yu(e);if(typeof r=="string"){var a=o.ownerDocument,i=a.defaultView,s;if(r==="parent"?s=o.parentNode:s=a.querySelector(r),!(s instanceof i.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=s,l=i.getComputedStyle(o),c=i.getComputedStyle(u);r={left:-o.offsetLeft+(0,He.int)(c.paddingLeft)+(0,He.int)(l.marginLeft),top:-o.offsetTop+(0,He.int)(c.paddingTop)+(0,He.int)(l.marginTop),right:(0,Qt.innerWidth)(u)-(0,Qt.outerWidth)(o)-o.offsetLeft+(0,He.int)(c.paddingRight)-(0,He.int)(l.marginRight),bottom:(0,Qt.innerHeight)(u)-(0,Qt.outerHeight)(o)-o.offsetTop+(0,He.int)(c.paddingBottom)-(0,He.int)(l.marginBottom)}}return(0,He.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,He.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,He.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,He.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function FS(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}function BS(e){return e.props.axis==="both"||e.props.axis==="x"}function zS(e){return e.props.axis==="both"||e.props.axis==="y"}function jS(e,t,n){var r=typeof t=="number"?(0,Qt.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;var o=yu(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Qt.offsetXYFromParent)(r||e,a,n.props.scale)}function HS(e,t,n){var r=e.state,o=!(0,He.isNum)(r.lastX),a=yu(e);return o?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}}function US(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function VS(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function yu(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Yr={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=GS;function GS(){}function Sn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sn=function(n){return typeof n}:Sn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sn(e)}Object.defineProperty(Yr,"__esModule",{value:!0});Yr.default=void 0;var _o=XS(D),ze=bu(ou.exports),YS=bu(Kf),De=we,qt=ct,So=ut,vn=bu(Xr);function bu(e){return e&&e.__esModule?e:{default:e}}function ov(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(ov=function(o){return o?n:t})(e)}function XS(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Sn(e)!=="object"&&typeof e!="function")return{default:e};var n=ov(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function KS(e,t){return JS(e)||QS(e,t)||WS(e,t)||ZS()}function ZS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WS(e,t){if(!!e){if(typeof e=="string")return _c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _c(e,t)}}function _c(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QS(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(u){a=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function JS(e){if(Array.isArray(e))return e}function eE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tE(e,t,n){return t&&Sc(e.prototype,t),n&&Sc(e,n),e}function nE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Is(e,t)}function Is(e,t){return Is=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Is(e,t)}function rE(e){var t=aE();return function(){var r=Sr(e),o;if(t){var a=Sr(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return oE(this,o)}}function oE(e,t){if(t&&(Sn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(e)}function Ie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sr(e){return Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Sr(e)}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Et=Je.mouse,Kr=function(e){nE(n,e);var t=rE(n);function n(){var r;eE(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=t.call.apply(t,[this].concat(a)),Ke(Ie(r),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Ke(Ie(r),"mounted",!1),Ke(Ie(r),"handleDragStart",function(s){if(r.props.onMouseDown(s),!r.props.allowAnyClick&&typeof s.button=="number"&&s.button!==0)return!1;var u=r.findDOMNode();if(!u||!u.ownerDocument||!u.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var l=u.ownerDocument;if(!(r.props.disabled||!(s.target instanceof l.defaultView.Node)||r.props.handle&&!(0,De.matchesSelectorAndParentsTo)(s.target,r.props.handle,u)||r.props.cancel&&(0,De.matchesSelectorAndParentsTo)(s.target,r.props.cancel,u))){s.type==="touchstart"&&s.preventDefault();var c=(0,De.getTouchIdentifier)(s);r.setState({touchIdentifier:c});var d=(0,qt.getControlPosition)(s,c,Ie(r));if(d!=null){var f=d.x,h=d.y,p=(0,qt.createCoreData)(Ie(r),f,h);(0,vn.default)("DraggableCore: handleDragStart: %j",p),(0,vn.default)("calling",r.props.onStart);var v=r.props.onStart(s,p);v===!1||r.mounted===!1||(r.props.enableUserSelectHack&&(0,De.addUserSelectStyles)(l),r.setState({dragging:!0,lastX:f,lastY:h}),(0,De.addEvent)(l,Et.move,r.handleDrag),(0,De.addEvent)(l,Et.stop,r.handleDragStop))}}}),Ke(Ie(r),"handleDrag",function(s){var u=(0,qt.getControlPosition)(s,r.state.touchIdentifier,Ie(r));if(u!=null){var l=u.x,c=u.y;if(Array.isArray(r.props.grid)){var d=l-r.state.lastX,f=c-r.state.lastY,h=(0,qt.snapToGrid)(r.props.grid,d,f),p=KS(h,2);if(d=p[0],f=p[1],!d&&!f)return;l=r.state.lastX+d,c=r.state.lastY+f}var v=(0,qt.createCoreData)(Ie(r),l,c);(0,vn.default)("DraggableCore: handleDrag: %j",v);var g=r.props.onDrag(s,v);if(g===!1||r.mounted===!1){try{r.handleDragStop(new MouseEvent("mouseup"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(m)}return}r.setState({lastX:l,lastY:c})}}),Ke(Ie(r),"handleDragStop",function(s){if(!!r.state.dragging){var u=(0,qt.getControlPosition)(s,r.state.touchIdentifier,Ie(r));if(u!=null){var l=u.x,c=u.y,d=(0,qt.createCoreData)(Ie(r),l,c),f=r.props.onStop(s,d);if(f===!1||r.mounted===!1)return!1;var h=r.findDOMNode();h&&r.props.enableUserSelectHack&&(0,De.removeUserSelectStyles)(h.ownerDocument),(0,vn.default)("DraggableCore: handleDragStop: %j",d),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),h&&((0,vn.default)("DraggableCore: Removing handlers"),(0,De.removeEvent)(h.ownerDocument,Et.move,r.handleDrag),(0,De.removeEvent)(h.ownerDocument,Et.stop,r.handleDragStop))}}}),Ke(Ie(r),"onMouseDown",function(s){return Et=Je.mouse,r.handleDragStart(s)}),Ke(Ie(r),"onMouseUp",function(s){return Et=Je.mouse,r.handleDragStop(s)}),Ke(Ie(r),"onTouchStart",function(s){return Et=Je.touch,r.handleDragStart(s)}),Ke(Ie(r),"onTouchEnd",function(s){return Et=Je.touch,r.handleDragStop(s)}),r}return tE(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var o=this.findDOMNode();o&&(0,De.addEvent)(o,Je.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.findDOMNode();if(o){var a=o.ownerDocument;(0,De.removeEvent)(a,Je.mouse.move,this.handleDrag),(0,De.removeEvent)(a,Je.touch.move,this.handleDrag),(0,De.removeEvent)(a,Je.mouse.stop,this.handleDragStop),(0,De.removeEvent)(a,Je.touch.stop,this.handleDragStop),(0,De.removeEvent)(o,Je.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,De.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){var o,a,i;return(o=(a=this.props)===null||a===void 0||(i=a.nodeRef)===null||i===void 0?void 0:i.current)!==null&&o!==void 0?o:YS.default.findDOMNode(this)}},{key:"render",value:function(){return _o.cloneElement(_o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(_o.Component);Yr.default=Kr;Ke(Kr,"displayName","DraggableCore");Ke(Kr,"propTypes",{allowAnyClick:ze.default.bool,disabled:ze.default.bool,enableUserSelectHack:ze.default.bool,offsetParent:function(t,n){if(t[n]&&t[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ze.default.arrayOf(ze.default.number),handle:ze.default.string,cancel:ze.default.string,nodeRef:ze.default.object,onStart:ze.default.func,onDrag:ze.default.func,onStop:ze.default.func,onMouseDown:ze.default.func,scale:ze.default.number,className:So.dontSetMe,style:So.dontSetMe,transform:So.dontSetMe});Ke(Kr,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){function t(E){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(S){return typeof S}:t=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t(E)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var n=p(D),r=f(ou.exports),o=f(Kf),a=f(pS),i=we,s=ct,u=ut,l=f(Yr),c=f(Xr),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(E){return E&&E.__esModule?E:{default:E}}function h(E){if(typeof WeakMap!="function")return null;var w=new WeakMap,S=new WeakMap;return(h=function(I){return I?S:w})(E)}function p(E,w){if(!w&&E&&E.__esModule)return E;if(E===null||t(E)!=="object"&&typeof E!="function")return{default:E};var S=h(w);if(S&&S.has(E))return S.get(E);var P={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in E)if(z!=="default"&&Object.prototype.hasOwnProperty.call(E,z)){var X=I?Object.getOwnPropertyDescriptor(E,z):null;X&&(X.get||X.set)?Object.defineProperty(P,z,X):P[z]=E[z]}return P.default=E,S&&S.set(E,P),P}function v(){return v=Object.assign||function(E){for(var w=1;w<arguments.length;w++){var S=arguments[w];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(E[P]=S[P])}return E},v.apply(this,arguments)}function g(E,w){if(E==null)return{};var S=m(E,w),P,I;if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(E);for(I=0;I<z.length;I++)P=z[I],!(w.indexOf(P)>=0)&&(!Object.prototype.propertyIsEnumerable.call(E,P)||(S[P]=E[P]))}return S}function m(E,w){if(E==null)return{};var S={},P=Object.keys(E),I,z;for(z=0;z<P.length;z++)I=P[z],!(w.indexOf(I)>=0)&&(S[I]=E[I]);return S}function x(E,w){var S=Object.keys(E);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(E);w&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(E,I).enumerable})),S.push.apply(S,P)}return S}function N(E){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?x(Object(S),!0).forEach(function(P){V(E,P,S[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(S)):x(Object(S)).forEach(function(P){Object.defineProperty(E,P,Object.getOwnPropertyDescriptor(S,P))})}return E}function M(E,w){return F(E)||B(E,w)||q(E,w)||C()}function C(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(E,w){if(!!E){if(typeof E=="string")return L(E,w);var S=Object.prototype.toString.call(E).slice(8,-1);if(S==="Object"&&E.constructor&&(S=E.constructor.name),S==="Map"||S==="Set")return Array.from(E);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return L(E,w)}}function L(E,w){(w==null||w>E.length)&&(w=E.length);for(var S=0,P=new Array(w);S<w;S++)P[S]=E[S];return P}function B(E,w){var S=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(S!=null){var P=[],I=!0,z=!1,X,k;try{for(S=S.call(E);!(I=(X=S.next()).done)&&(P.push(X.value),!(w&&P.length===w));I=!0);}catch(H){z=!0,k=H}finally{try{!I&&S.return!=null&&S.return()}finally{if(z)throw k}}return P}}function F(E){if(Array.isArray(E))return E}function A(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function K(E,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}function G(E,w,S){return w&&K(E.prototype,w),S&&K(E,S),E}function oe(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),w&&_(E,w)}function _(E,w){return _=Object.setPrototypeOf||function(P,I){return P.__proto__=I,P},_(E,w)}function R(E){var w=j();return function(){var P=U(E),I;if(w){var z=U(this).constructor;I=Reflect.construct(P,arguments,z)}else I=P.apply(this,arguments);return O(this,I)}}function O(E,w){if(w&&(t(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(E)}function T(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U(E){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},U(E)}function V(E,w,S){return w in E?Object.defineProperty(E,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):E[w]=S,E}var Y=function(E){oe(S,E);var w=R(S);function S(P){var I;return A(this,S),I=w.call(this,P),V(T(I),"onDragStart",function(z,X){(0,c.default)("Draggable: onDragStart: %j",X);var k=I.props.onStart(z,(0,s.createDraggableData)(T(I),X));if(k===!1)return!1;I.setState({dragging:!0,dragged:!0})}),V(T(I),"onDrag",function(z,X){if(!I.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",X);var k=(0,s.createDraggableData)(T(I),X),H={x:k.x,y:k.y};if(I.props.bounds){var ie=H.x,ue=H.y;H.x+=I.state.slackX,H.y+=I.state.slackY;var pe=(0,s.getBoundPosition)(T(I),H.x,H.y),ve=M(pe,2),ne=ve[0],_e=ve[1];H.x=ne,H.y=_e,H.slackX=I.state.slackX+(ie-H.x),H.slackY=I.state.slackY+(ue-H.y),k.x=H.x,k.y=H.y,k.deltaX=H.x-I.state.x,k.deltaY=H.y-I.state.y}var $=I.props.onDrag(z,k);if($===!1)return!1;I.setState(H)}),V(T(I),"onDragStop",function(z,X){if(!I.state.dragging)return!1;var k=I.props.onStop(z,(0,s.createDraggableData)(T(I),X));if(k===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",X);var H={dragging:!1,slackX:0,slackY:0},ie=Boolean(I.props.position);if(ie){var ue=I.props.position,pe=ue.x,ve=ue.y;H.x=pe,H.y=ve}I.setState(H)}),I.state={dragging:!1,dragged:!1,x:P.position?P.position.x:P.defaultPosition.x,y:P.position?P.position.y:P.defaultPosition.y,prevPropsPosition:N({},P.position),slackX:0,slackY:0,isElementSVG:!1},P.position&&!(P.onDrag||P.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),I}return G(S,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var I,z,X;return(I=(z=this.props)===null||z===void 0||(X=z.nodeRef)===null||X===void 0?void 0:X.current)!==null&&I!==void 0?I:o.default.findDOMNode(this)}},{key:"render",value:function(){var I,z=this.props;z.axis,z.bounds;var X=z.children,k=z.defaultPosition,H=z.defaultClassName,ie=z.defaultClassNameDragging,ue=z.defaultClassNameDragged,pe=z.position,ve=z.positionOffset;z.scale;var ne=g(z,d),_e={},$=null,ye=Boolean(pe),Se=!ye||this.state.dragging,Be=pe||k,Me={x:(0,s.canDragX)(this)&&Se?this.state.x:Be.x,y:(0,s.canDragY)(this)&&Se?this.state.y:Be.y};this.state.isElementSVG?$=(0,i.createSVGTransform)(Me,ve):_e=(0,i.createCSSTransform)(Me,ve);var Ee=(0,a.default)(X.props.className||"",H,(I={},V(I,ie,this.state.dragging),V(I,ue,this.state.dragged),I));return n.createElement(l.default,v({},ne,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(X),{className:Ee,style:N(N({},X.props.style),_e),transform:$}))}}],[{key:"getDerivedStateFromProps",value:function(I,z){var X=I.position,k=z.prevPropsPosition;return X&&(!k||X.x!==k.x||X.y!==k.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:X,prevPropsPosition:k}),{x:X.x,y:X.y,prevPropsPosition:N({},X)}):null}}]),S}(n.Component);e.default=Y,V(Y,"displayName","Draggable"),V(Y,"propTypes",N(N({},l.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),V(Y,"defaultProps",N(N({},l.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(Xp);var av=Xp,iv=av.default,iE=av.DraggableCore;Gr.exports=iv;Gr.exports.default=iv;var sE=Gr.exports.DraggableCore=iE,uE=Gr.exports;function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ec(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cE=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,r=e.onSelectionDragStop,o=e.onSelectionContextMenu,a=Q(function(A){return A.transform}),i=Oe(a,3),s=i[0],u=i[1],l=i[2],c=Q(function(A){return A.selectedNodesBbox}),d=Q(function(A){return A.selectionActive}),f=Q(function(A){return A.selectedElements}),h=Q(function(A){return A.snapToGrid}),p=Q(function(A){return A.snapGrid}),v=Q(function(A){return A.nodes}),g=re(function(A){return A.updateNodePosDiff}),m=y.exports.useRef(null),x=y.exports.useMemo(function(){return h?p:[1,1]},[h,p]),N=y.exports.useMemo(function(){return f?f.filter(Rt).map(function(A){var K=v.find(function(G){return G.id===A.id});return xc(xc({},K),{},{position:K?.__rf.position})}):[]},[f,v]),M=y.exports.useMemo(function(){return{transform:"translate(".concat(s,"px,").concat(u,"px) scale(").concat(l,")")}},[s,u,l]),C=y.exports.useMemo(function(){return{width:c.width,height:c.height,top:c.y,left:c.x}},[c]),q=y.exports.useCallback(function(A){t?.(A,N)},[t,N]),L=y.exports.useCallback(function(A,K){n&&n(A,N),g({diff:{x:K.deltaX,y:K.deltaY},isDragging:!0})},[n,N,g]),B=y.exports.useCallback(function(A){g({isDragging:!1}),r?.(A,N)},[N,r]),F=y.exports.useCallback(function(A){var K=f?f.filter(Rt).map(function(G){return v.find(function(oe){return oe.id===G.id})}):[];o?.(A,K)},[o]);return!f||d?null:D.createElement("div",{className:"react-flow__nodesselection",style:M},D.createElement(uE,{scale:l,grid:x,onStart:function(K){return q(K)},onDrag:function(K,G){return L(K,G)},onStop:function(K){return B(K)},nodeRef:m,enableUserSelectHack:!1},D.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:F,style:C})))},sv=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,a=t.onPaneScroll,i=t.onElementsRemove,s=t.deleteKeyCode,u=t.onMove,l=t.onMoveStart,c=t.onMoveEnd,d=t.selectionKeyCode,f=t.multiSelectionKeyCode,h=t.zoomActivationKeyCode,p=t.elementsSelectable,v=t.zoomOnScroll,g=t.zoomOnPinch,m=t.panOnScroll,x=t.panOnScrollSpeed,N=t.panOnScrollMode,M=t.zoomOnDoubleClick,C=t.paneMoveable,q=t.defaultPosition,L=t.defaultZoom,B=t.translateExtent,F=t.preventScrolling,A=t.onSelectionDragStart,K=t.onSelectionDrag,G=t.onSelectionDragStop,oe=t.onSelectionContextMenu,_=re(function(Y){return Y.unsetNodesSelection}),R=re(function(Y){return Y.resetSelectedElements}),O=Q(function(Y){return Y.nodesSelectionActive}),T=gr(d);kb({onElementsRemove:i,deleteKeyCode:s,multiSelectionKeyCode:f});var j=y.exports.useCallback(function(Y){r?.(Y),_(),R()},[r]),U=y.exports.useCallback(function(Y){o?.(Y)},[o]),V=y.exports.useCallback(function(Y){a?.(Y)},[a]);return D.createElement(cS,{onMove:u,onMoveStart:l,onMoveEnd:c,selectionKeyPressed:T,elementsSelectable:p,zoomOnScroll:v,zoomOnPinch:g,panOnScroll:m,panOnScrollSpeed:x,panOnScrollMode:N,zoomOnDoubleClick:M,paneMoveable:C,defaultPosition:q,defaultZoom:L,translateExtent:B,zoomActivationKeyCode:h,preventScrolling:F},n,D.createElement(dS,{selectionKeyPressed:T}),O&&D.createElement(cE,{onSelectionDragStart:A,onSelectionDrag:K,onSelectionDragStop:G,onSelectionContextMenu:oe}),D.createElement("div",{className:"react-flow__pane",onClick:j,onContextMenu:U,onWheel:V}))};sv.displayName="FlowRenderer";var lE=y.exports.memo(sv),uv=function(t){var n=Q(function(p){return p.transform}),r=Q(function(p){return p.selectedElements}),o=Q(function(p){return p.nodesDraggable}),a=Q(function(p){return p.nodesConnectable}),i=Q(function(p){return p.elementsSelectable}),s=Q(function(p){return p.width}),u=Q(function(p){return p.height}),l=Q(function(p){return p.nodes}),c=re(function(p){return p.updateNodeDimensions}),d=t.onlyRenderVisibleElements?wp(l,{x:0,y:0,width:s,height:u},n,!0):l,f=y.exports.useMemo(function(){return{transform:"translate(".concat(n[0],"px,").concat(n[1],"px) scale(").concat(n[2],")")}},[n[0],n[1],n[2]]),h=y.exports.useMemo(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(p){var v=p.map(function(g){return{id:g.target.getAttribute("data-id"),nodeElement:g.target}});c(v)})},[]);return D.createElement("div",{className:"react-flow__nodes",style:f},d.map(function(p){var v=p.type||"default",g=t.nodeTypes[v]||t.nodeTypes.default;t.nodeTypes[v]||console.warn('Node type "'.concat(v,'" not found. Using fallback type "default".'));var m=!!(p.draggable||o&&typeof p.draggable>"u"),x=!!(p.selectable||i&&typeof p.selectable>"u"),N=!!(p.connectable||a&&typeof p.connectable>"u");return D.createElement(g,{key:p.id,id:p.id,className:p.className,style:p.style,type:v,data:p.data,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,isHidden:p.isHidden,xPos:p.__rf.position.x,yPos:p.__rf.position.y,isDragging:p.__rf.isDragging,isInitialized:p.__rf.width!==null&&p.__rf.height!==null,snapGrid:t.snapGrid,snapToGrid:t.snapToGrid,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onElementClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onNodeDoubleClick:t.onNodeDoubleClick,onNodeDragStart:t.onNodeDragStart,onNodeDrag:t.onNodeDrag,onNodeDragStop:t.onNodeDragStop,scale:n[2],selected:r?.some(function(M){var C=M.id;return C===p.id})||!1,isDraggable:m,isSelectable:x,isConnectable:N,resizeObserver:h,dragHandle:p.dragHandle})}))};uv.displayName="NodeRenderer";var dE=y.exports.memo(uv),fE=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pE=function(t){var n=t.x,r=t.y,o=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,u=s===void 0?!0:s,l=t.labelBgStyle,c=l===void 0?{}:l,d=t.labelBgPadding,f=d===void 0?[2,4]:d,h=t.labelBgBorderRadius,p=h===void 0?2:h,v=t.children,g=t.className,m=Dr(t,fE),x=y.exports.useRef(null),N=y.exports.useState({x:0,y:0,width:0,height:0}),M=Oe(N,2),C=M[0],q=M[1],L=Ze(["react-flow__edge-textwrapper",g]);return y.exports.useEffect(function(){if(x.current){var B=x.current.getBBox();q({x:B.x,y:B.y,width:B.width,height:B.height})}},[o]),typeof o>"u"||!o?null:D.createElement("g",hE({transform:"translate(".concat(n-C.width/2," ").concat(r-C.height/2,")"),className:L},m),u&&D.createElement("rect",{width:C.width+2*f[0],x:-f[0],y:-f[1],height:C.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:p,ry:p}),D.createElement("text",{className:"react-flow__edge-text",y:C.height/2,dy:"0.3em",ref:x,style:i},o),v)},wu=y.exports.memo(pE),Zr=function(t,n){return typeof n<"u"&&n?"url(#".concat(n,")"):typeof t<"u"?"url(#react-flow__".concat(t,")"):"none"},Oc=[Z.Left,Z.Right],Fn=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?Z.Bottom:i,u=t.targetPosition,l=u===void 0?Z.Top:u,c=Oc.includes(s),d=Oc.includes(l),f=c&&!d||d&&!c;if(f){var h=c?Math.abs(o-n):0,p=n>o?n-h:n+h,v=c?0:Math.abs(a-r),g=r<a?r+v:r-v;return[p,g,h,v]}var m=Math.abs(o-n)/2,x=o<n?o+m:o-m,N=Math.abs(a-r)/2,M=a<r?a+N:a-N;return[x,M,m,N]};function _u(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?Z.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,u=s===void 0?Z.Top:s,l=e.centerX,c=e.centerY,d=Fn({sourceX:t,sourceY:n,targetX:a,targetY:i}),f=Oe(d,2),h=f[0],p=f[1],v=[Z.Left,Z.Right],g=typeof l<"u"?l:h,m=typeof c<"u"?c:p,x="M".concat(t,",").concat(n," C").concat(t,",").concat(m," ").concat(a,",").concat(m," ").concat(a,",").concat(i);return v.includes(o)&&v.includes(u)?x="M".concat(t,",").concat(n," C").concat(g,",").concat(n," ").concat(g,",").concat(i," ").concat(a,",").concat(i):v.includes(u)?x="M".concat(t,",").concat(n," Q").concat(t,",").concat(i," ").concat(a,",").concat(i):v.includes(o)&&(x="M".concat(t,",").concat(n," Q").concat(a,",").concat(n," ").concat(a,",").concat(i)),x}var Rs=y.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?Z.Bottom:a,s=e.targetPosition,u=s===void 0?Z.Top:s,l=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,p=e.labelBgBorderRadius,v=e.style,g=e.arrowHeadType,m=e.markerEndId,x=Fn({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:i,targetPosition:u}),N=Oe(x,2),M=N[0],C=N[1],q=_u({sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:u}),L=l?D.createElement(wu,{x:M,y:C,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null,B=Zr(g,m);return D.createElement(D.Fragment,null,D.createElement("path",{style:v,d:q,className:"react-flow__edge-path",markerEnd:B}),L)}),Eo=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},xo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Co=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Oo=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},No=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Mo=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},To=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Po=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function ks(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?Z.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,u=s===void 0?Z.Top:s,l=e.borderRadius,c=l===void 0?5:l,d=e.centerX,f=e.centerY,h=Fn({sourceX:t,sourceY:n,targetX:a,targetY:i}),p=Oe(h,4),v=p[0],g=p[1],m=p[2],x=p[3],N=Math.min(c,Math.abs(a-t)),M=Math.min(c,Math.abs(i-n)),C=Math.min(N,M,m,x),q=[Z.Left,Z.Right],L=typeof d<"u"?d:v,B=typeof f<"u"?f:g,F=null,A=null;return t<=a?(F=n<=i?Eo(t,B,C):Mo(t,B,C),A=n<=i?Po(a,B,C):Oo(a,B,C)):(F=n<i?Co(t,B,C):To(t,B,C),A=n<i?No(a,B,C):xo(a,B,C)),q.includes(o)&&q.includes(u)?t<=a?(F=n<=i?Po(L,n,C):Oo(L,n,C),A=n<=i?Eo(L,i,C):Mo(L,i,C)):(o===Z.Right&&u===Z.Left||o===Z.Left&&u===Z.Right||o===Z.Left&&u===Z.Left)&&(F=n<=i?No(L,n,C):xo(L,n,C),A=n<=i?Co(L,i,C):To(L,i,C)):q.includes(o)&&!q.includes(u)?(t<=a?F=n<=i?Po(a,n,C):Oo(a,n,C):F=n<=i?No(a,n,C):xo(a,n,C),A=""):!q.includes(o)&&q.includes(u)&&(t<=a?F=n<=i?Eo(t,i,C):Mo(t,i,C):F=n<=i?Co(t,i,C):To(t,i,C),A=""),"M ".concat(t,",").concat(n).concat(F).concat(A,"L ").concat(a,",").concat(i)}var Su=y.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,u=e.labelBgStyle,l=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,h=f===void 0?Z.Bottom:f,p=e.targetPosition,v=p===void 0?Z.Top:p,g=e.arrowHeadType,m=e.markerEndId,x=e.borderRadius,N=x===void 0?5:x,M=Fn({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:h,targetPosition:v}),C=Oe(M,2),q=C[0],L=C[1],B=ks({sourceX:t,sourceY:n,sourcePosition:h,targetX:r,targetY:o,targetPosition:v,borderRadius:N}),F=Zr(g,m),A=a?D.createElement(wu,{x:q,y:L,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:c}):null;return D.createElement(D.Fragment,null,D.createElement("path",{style:d,className:"react-flow__edge-path",d:B,markerEnd:F}),A)}),vE=function(t,n,r){var o=r==="source"?"target":"source",a=n.__rf.handleBounds[r]||n.__rf.handleBounds[o];return t?a.find(function(i){return i.id===t}):a[0]},gE=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,r=e.connectionHandleType,o=e.connectionLineStyle,a=e.connectionPositionX,i=e.connectionPositionY,s=e.connectionLineType,u=s===void 0?Ht.Bezier:s,l=e.nodes,c=l===void 0?[]:l,d=e.transform,f=e.isConnectable,h=e.CustomConnectionLineComponent,p=y.exports.useState(null),v=Oe(p,2),g=v[0],m=v[1],x=t,N=n;if(y.exports.useEffect(function(){var _=c.find(function(R){return R.id===x})||null;m(_)},[]),!g||!f)return null;var M=vE(N,g,r),C=M?M.x+M.width/2:g.__rf.width/2,q=M?M.y+M.height/2:g.__rf.height,L=g.__rf.position.x+C,B=g.__rf.position.y+q,F=(a-d[0])/d[2],A=(i-d[1])/d[2],K=M?.position===Z.Left||M?.position===Z.Right,G=K?Z.Left:Z.Top;if(h)return D.createElement("g",{className:"react-flow__connection"},D.createElement(h,{sourceX:L,sourceY:B,sourcePosition:M?.position,targetX:F,targetY:A,targetPosition:G,connectionLineType:u,connectionLineStyle:o,sourceNode:g,sourceHandle:M}));var oe="";return u===Ht.Bezier?oe=_u({sourceX:L,sourceY:B,sourcePosition:M?.position,targetX:F,targetY:A,targetPosition:G}):u===Ht.Step?oe=ks({sourceX:L,sourceY:B,sourcePosition:M?.position,targetX:F,targetY:A,targetPosition:G,borderRadius:0}):u===Ht.SmoothStep?oe=ks({sourceX:L,sourceY:B,sourcePosition:M?.position,targetX:F,targetY:A,targetPosition:G}):oe="M".concat(L,",").concat(B," ").concat(F,",").concat(A),D.createElement("g",{className:"react-flow__connection"},D.createElement("path",{d:oe,className:"react-flow__connection-path",style:o}))},Nc=function(t){var n=t.id,r=t.children;return D.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},r)},cv=function(t){var n=t.color;return D.createElement("defs",null,D.createElement(Nc,{id:"react-flow__arrowclosed"},D.createElement("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:n,points:"-5,-4 0,0 -5,4 -5,-4"})),D.createElement(Nc,{id:"react-flow__arrow"},D.createElement("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};cv.displayName="MarkerDefinitions";function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Tc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lv=y.exports.memo(function(e){return D.createElement(Su,Tc(Tc({},e),{},{borderRadius:0}))}),dv=y.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,u=e.labelBgStyle,l=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.arrowHeadType,h=e.markerEndId,p=Math.abs(o-n)/2,v=o<n?o+p:o-p,g=Math.abs(r-t)/2,m=r<t?r+g:r-g,x=Zr(f,h),N=a?D.createElement(wu,{x:m,y:v,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:c}):null;return D.createElement(D.Fragment,null,D.createElement("path",{style:d,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),markerEnd:x}),N)});function Pc(e,t,n,r,o,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),u=s?.classList.contains("target")||!1,l=s?.classList.contains("source")||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(u||l)){c.isHoveringHandle=!0;var d=t===un.Strict?n&&l||!n&&u:!0;if(d){var f=s.getAttribute("data-nodeid"),h=s.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:h,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:h};c.connection=p,c.isValid=a(p)}}return c}function Dc(e){e?.classList.remove("react-flow__handle-valid"),e?.classList.remove("react-flow__handle-connecting")}function fv(e,t,n,r,o,a,i,s,u,l,c,d,f,h){var p=e.target.closest(".react-flow"),v=Ob(e.target);if(!v)return;var g=v.elementFromPoint(e.clientX,e.clientY),m=g?.classList.contains("target"),x=g?.classList.contains("source");if(!p||!m&&!x&&!l)return;var N=l||(m?"target":"source"),M=p.getBoundingClientRect(),C;o({x:e.clientX-M.left,y:e.clientY-M.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:N}),d?.(e,{nodeId:n,handleId:t,handleType:N});function q(B){o({x:B.clientX-M.left,y:B.clientY-M.top});var F=Pc(B,u,i,n,t,s,v),A=F.connection,K=F.elementBelow,G=F.isValid,oe=F.isHoveringHandle;if(!oe)return Dc(C);var _=A.source===A.target;!_&&K&&(C=K,K.classList.add("react-flow__handle-connecting"),K.classList.toggle("react-flow__handle-valid",G))}function L(B){var F=Pc(B,u,i,n,t,s,v),A=F.connection,K=F.isValid;f?.(B),K&&a?.(A),h?.(B),l&&c&&c(B),Dc(C),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",q),v.removeEventListener("mouseup",L)}v.addEventListener("mousemove",q),v.addEventListener("mouseup",L)}var mE=function(t,n,r){return r===Z.Left?t-n:r===Z.Right?t+n:t},yE=function(t,n,r){return r===Z.Top?t-n:r===Z.Bottom?t+n:t},Ic=function(t){var n=t.className,r=t.position,o=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return D.createElement("circle",{className:Ze(["react-flow__edgeupdater",n]),cx:mE(o,s,r),cy:yE(a,s,r),r:s,stroke:"transparent",fill:"transparent"})},gn=function(e){var t=function(r){var o=r.id,a=r.className,i=r.type,s=r.data,u=r.onClick,l=r.onEdgeDoubleClick,c=r.selected,d=r.animated,f=r.label,h=r.labelStyle,p=r.labelShowBg,v=r.labelBgStyle,g=r.labelBgPadding,m=r.labelBgBorderRadius,x=r.style,N=r.arrowHeadType,M=r.source,C=r.target,q=r.sourceX,L=r.sourceY,B=r.targetX,F=r.targetY,A=r.sourcePosition,K=r.targetPosition,G=r.elementsSelectable,oe=r.markerEndId,_=r.isHidden,R=r.sourceHandleId,O=r.targetHandleId,T=r.handleEdgeUpdate,j=r.onConnectEdge,U=r.onContextMenu,V=r.onMouseEnter,Y=r.onMouseMove,E=r.onMouseLeave,w=r.edgeUpdaterRadius,S=r.onEdgeUpdateStart,P=r.onEdgeUpdateEnd,I=re(function(ee){return ee.addSelectedElements}),z=re(function(ee){return ee.setConnectionNodeId}),X=re(function(ee){return ee.unsetNodesSelection}),k=re(function(ee){return ee.setConnectionPosition}),H=Q(function(ee){return ee.connectionMode}),ie=y.exports.useState(!1),ue=Oe(ie,2),pe=ue[0],ve=ue[1],ne=!G&&!u,_e=Ze(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:c,animated:d,inactive:ne,updating:pe}]),$=y.exports.useMemo(function(){var ee={id:o,source:M,target:C,type:i};return R&&(ee.sourceHandle=R),O&&(ee.targetHandle=O),typeof s<"u"&&(ee.data=s),ee},[o,M,C,i,R,O,s]),ye=y.exports.useCallback(function(ee){G&&(X(),I($)),u?.(ee,$)},[G,$,u]),Se=y.exports.useCallback(function(ee){l?.(ee,$)},[$,l]),Be=y.exports.useCallback(function(ee){U?.(ee,$)},[$,U]),Me=y.exports.useCallback(function(ee){V?.(ee,$)},[$,U]),Ee=y.exports.useCallback(function(ee){Y?.(ee,$)},[$,U]),ge=y.exports.useCallback(function(ee){E?.(ee,$)},[$,U]),J=y.exports.useCallback(function(ee,Qe){var wt=Qe?C:M,_t=Qe?O:R,Ae=function(){return!0},$e=Qe;S?.(ee,$);var dn=P?function(At){return P(At,$)}:void 0;fv(ee,_t,wt,z,k,j,$e,Ae,H,Qe?"target":"source",dn)},[o,M,C,i,R,O,z,k,$,j]),ce=y.exports.useCallback(function(ee){J(ee,!0)},[o,M,R,J]),be=y.exports.useCallback(function(ee){J(ee,!1)},[o,C,O,J]),Te=y.exports.useCallback(function(){return ve(!0)},[ve]),xe=y.exports.useCallback(function(){return ve(!1)},[ve]);return _?null:D.createElement("g",{className:_e,onClick:ye,onDoubleClick:Se,onContextMenu:Be,onMouseEnter:Me,onMouseMove:Ee,onMouseLeave:ge},D.createElement(e,{id:o,source:M,target:C,selected:c,animated:d,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:g,labelBgBorderRadius:m,data:s,style:x,arrowHeadType:N,sourceX:q,sourceY:L,targetX:B,targetY:F,sourcePosition:A,targetPosition:K,markerEndId:oe,sourceHandleId:R,targetHandleId:O}),T&&D.createElement("g",{onMouseDown:ce,onMouseEnter:Te,onMouseOut:xe},D.createElement(Ic,{position:A,centerX:q,centerY:L,radius:w})),T&&D.createElement("g",{onMouseDown:be,onMouseEnter:Te,onMouseOut:xe},D.createElement(Ic,{position:K,centerX:B,centerY:F,radius:w})))};return t.displayName="EdgeWrapper",y.exports.memo(t)};function Rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bE(e){var t={default:gn(e.default||Rs),straight:gn(e.bezier||dv),step:gn(e.step||lv),smoothstep:gn(e.step||Su)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,a){return o[a]=gn(e[a]||Rs),o},n);return kc(kc({},t),r)}function Lc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=(n?.x||0)+t.__rf.position.x,o=(n?.y||0)+t.__rf.position.y,a=n?.width||t.__rf.width,i=n?.height||t.__rf.height;switch(e){case Z.Top:return{x:r+a/2,y:o};case Z.Right:return{x:r+a,y:o+i/2};case Z.Bottom:return{x:r+a/2,y:o+i};case Z.Left:return{x:r,y:o+i/2}}}function Ac(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var wE=function(t,n,r,o,a,i){var s=Lc(r,t,n),u=Lc(i,o,a);return{sourceX:s.x,sourceY:s.y,targetX:u.x,targetY:u.y}};function _E(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,a=e.transform,i={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);var s=rn({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:r/a[2],height:o/a[2]}),u=Math.max(0,Math.min(s.x2,i.x2)-Math.max(s.x,i.x)),l=Math.max(0,Math.min(s.y2,i.y2)-Math.max(s.y,i.y)),c=Math.ceil(u*l);return c>0}var SE=function(t,n){return n.reduce(function(r,o){return o.id===t.source&&(r.sourceNode=o),o.id===t.target&&(r.targetNode=o),r},{sourceNode:null,targetNode:null})},EE=function(t){var n=t.edge,r=t.props,o=t.nodes,a=t.selectedElements,i=t.elementsSelectable,s=t.transform,u=t.width,l=t.height,c=t.onlyRenderVisibleElements,d=t.connectionMode,f=n.sourceHandle||null,h=n.targetHandle||null,p=SE(n,o),v=p.sourceNode,g=p.targetNode,m=y.exports.useCallback(function(T){var j;(j=r.onEdgeUpdate)===null||j===void 0||j.call(r,n,T)},[n,r.onEdgeUpdate]);if(!v)return console.warn("couldn't create edge for source id: ".concat(n.source,"; edge id: ").concat(n.id)),null;if(!g)return console.warn("couldn't create edge for target id: ".concat(n.target,"; edge id: ").concat(n.id)),null;if(!v.__rf.width||!g.__rf.width)return null;var x=n.type||"default",N=r.edgeTypes[x]||r.edgeTypes.default,M=g.__rf.handleBounds,C=d===un.Strict?M.target:M.target||M.source,q=Ac(v.__rf.handleBounds.source,f),L=Ac(C,h),B=q?q.position:Z.Bottom,F=L?L.position:Z.Top;if(!q)return console.warn("couldn't create edge for source handle id: ".concat(f,"; edge id: ").concat(n.id)),null;if(!L)return console.warn("couldn't create edge for target handle id: ".concat(h,"; edge id: ").concat(n.id)),null;var A=wE(v,q,B,g,L,F),K=A.sourceX,G=A.sourceY,oe=A.targetX,_=A.targetY,R=c?_E({sourcePos:{x:K,y:G},targetPos:{x:oe,y:_},width:u,height:l,transform:s}):!0;if(!R)return null;var O=a?.some(function(T){return gp(T)&&T.id===n.id})||!1;return D.createElement(N,{key:n.id,id:n.id,className:n.className,type:n.type,data:n.data,onClick:r.onElementClick,selected:O,animated:n.animated,label:n.label,labelStyle:n.labelStyle,labelShowBg:n.labelShowBg,labelBgStyle:n.labelBgStyle,labelBgPadding:n.labelBgPadding,labelBgBorderRadius:n.labelBgBorderRadius,style:n.style,arrowHeadType:n.arrowHeadType,source:n.source,target:n.target,sourceHandleId:f,targetHandleId:h,sourceX:K,sourceY:G,targetX:oe,targetY:_,sourcePosition:B,targetPosition:F,elementsSelectable:i,markerEndId:r.markerEndId,isHidden:n.isHidden,onConnectEdge:m,handleEdgeUpdate:typeof r.onEdgeUpdate<"u",onContextMenu:r.onEdgeContextMenu,onMouseEnter:r.onEdgeMouseEnter,onMouseMove:r.onEdgeMouseMove,onMouseLeave:r.onEdgeMouseLeave,edgeUpdaterRadius:r.edgeUpdaterRadius,onEdgeDoubleClick:r.onEdgeDoubleClick,onEdgeUpdateStart:r.onEdgeUpdateStart,onEdgeUpdateEnd:r.onEdgeUpdateEnd})},hv=function(t){var n=Q(function(C){return C.transform}),r=Q(function(C){return C.nodes}),o=Q(function(C){return C.edges}),a=Q(function(C){return C.connectionNodeId}),i=Q(function(C){return C.connectionHandleId}),s=Q(function(C){return C.connectionHandleType}),u=Q(function(C){return C.connectionPosition}),l=Q(function(C){return C.selectedElements}),c=Q(function(C){return C.nodesConnectable}),d=Q(function(C){return C.elementsSelectable}),f=Q(function(C){return C.width}),h=Q(function(C){return C.height});if(!f)return null;var p=t.connectionLineType,v=t.arrowHeadColor,g=t.connectionLineStyle,m=t.connectionLineComponent,x=t.onlyRenderVisibleElements,N="translate(".concat(n[0],"px,").concat(n[1],"px) scale(").concat(n[2],")"),M=a&&s;return D.createElement("svg",{width:f,height:h,className:"react-flow__edges"},D.createElement(cv,{color:v}),D.createElement("g",{style:{transform:N}},o.map(function(C){return D.createElement(EE,{key:C.id,edge:C,props:t,nodes:r,selectedElements:l,elementsSelectable:d,transform:n,width:f,height:h,onlyRenderVisibleElements:x})}),M&&D.createElement(gE,{nodes:r,connectionNodeId:a,connectionHandleId:i,connectionHandleType:s,connectionPositionX:u.x,connectionPositionY:u.y,transform:n,connectionLineStyle:g,connectionLineType:p,isConnectable:c,CustomConnectionLineComponent:m})))};hv.displayName="EdgeRenderer";var xE=y.exports.memo(hv),Do=.1,CE={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},transform:function(t){},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},$t=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)},pv=function(){var t=jr(),n=Q(function(a){return a.d3Zoom}),r=Q(function(a){return a.d3Selection}),o=y.exports.useMemo(function(){return r&&n?{zoomIn:function(i){return n.scaleBy($t(r,i),1.2)},zoomOut:function(i){return n.scaleBy($t(r,i),1/1.2)},zoomTo:function(i,s){return n.scaleTo($t(r,s),i)},transform:function(i,s){var u=jt.translate(i.x,i.y).scale(i.zoom);n.transform($t(r,s),u)},fitView:function(){var i,s,u,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{padding:Do,includeHiddenNodes:!1,duration:0},c=t.getState(),d=c.nodes,f=c.width,h=c.height,p=c.minZoom,v=c.maxZoom;if(!!d.length){var g=cu(l.includeHiddenNodes?d:d.filter(function(L){return!L.isHidden})),m=Ju(g,f,h,(i=l.minZoom)!==null&&i!==void 0?i:p,(s=l.maxZoom)!==null&&s!==void 0?s:v,(u=l.padding)!==null&&u!==void 0?u:Do),x=Oe(m,3),N=x[0],M=x[1],C=x[2],q=jt.translate(N,M).scale(C);n.transform($t(r,l.duration),q)}},setCenter:function(i,s,u,l){var c=t.getState(),d=c.width,f=c.height,h=c.maxZoom,p=typeof u<"u"?u:h,v=d/2-i*p,g=f/2-s*p,m=jt.translate(v,g).scale(p);n.transform($t(r,l),m)},fitBounds:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Do,u=arguments.length>2?arguments[2]:void 0,l=t.getState(),c=l.width,d=l.height,f=l.minZoom,h=l.maxZoom,p=Ju(i,c,d,f,h,s),v=Oe(p,3),g=v[0],m=v[1],x=v[2],N=jt.translate(g,m).scale(x);n.transform($t(r,u),N)},project:function(i){var s=t.getState(),u=s.transform,l=s.snapToGrid,c=s.snapGrid;return mp(i,u,l,c)},initialized:!0}:CE},[n,r]);return o},vv=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onLoad,u=t.onElementClick,l=t.onNodeDoubleClick,c=t.onEdgeDoubleClick,d=t.onNodeMouseEnter,f=t.onNodeMouseMove,h=t.onNodeMouseLeave,p=t.onNodeContextMenu,v=t.onNodeDragStart,g=t.onNodeDrag,m=t.onNodeDragStop,x=t.onSelectionDragStart,N=t.onSelectionDrag,M=t.onSelectionDragStop,C=t.onSelectionContextMenu,q=t.connectionMode,L=t.connectionLineType,B=t.connectionLineStyle,F=t.connectionLineComponent,A=t.selectionKeyCode,K=t.multiSelectionKeyCode,G=t.zoomActivationKeyCode,oe=t.onElementsRemove,_=t.deleteKeyCode,R=t.onConnect,O=t.onConnectStart,T=t.onConnectStop,j=t.onConnectEnd,U=t.snapToGrid,V=t.snapGrid,Y=t.onlyRenderVisibleElements,E=t.nodesDraggable,w=t.nodesConnectable,S=t.elementsSelectable,P=t.selectNodesOnDrag,I=t.minZoom,z=t.maxZoom,X=t.defaultZoom,k=t.defaultPosition,H=t.translateExtent,ie=t.preventScrolling,ue=t.nodeExtent,pe=t.arrowHeadColor,ve=t.markerEndId,ne=t.zoomOnScroll,_e=t.zoomOnPinch,$=t.panOnScroll,ye=t.panOnScrollSpeed,Se=t.panOnScrollMode,Be=t.zoomOnDoubleClick,Me=t.paneMoveable,Ee=t.onPaneClick,ge=t.onPaneScroll,J=t.onPaneContextMenu,ce=t.onEdgeUpdate,be=t.onEdgeContextMenu,Te=t.onEdgeMouseEnter,xe=t.onEdgeMouseMove,ee=t.onEdgeMouseLeave,Qe=t.edgeUpdaterRadius,wt=t.onEdgeUpdateStart,_t=t.onEdgeUpdateEnd,Ae=y.exports.useRef(!1),$e=re(function(fe){return fe.setOnConnect}),dn=re(function(fe){return fe.setOnConnectStart}),At=re(function(fe){return fe.setOnConnectStop}),ro=re(function(fe){return fe.setOnConnectEnd}),zn=re(function(fe){return fe.setSnapGrid}),oo=re(function(fe){return fe.setSnapToGrid}),jn=re(function(fe){return fe.setNodesDraggable}),ao=re(function(fe){return fe.setNodesConnectable}),Hn=re(function(fe){return fe.setElementsSelectable}),io=re(function(fe){return fe.setMinZoom}),Un=re(function(fe){return fe.setMaxZoom}),so=re(function(fe){return fe.setTranslateExtent}),Vn=re(function(fe){return fe.setNodeExtent}),uo=re(function(fe){return fe.setConnectionMode}),fn=jr(),St=pv(),Gn=St.zoomIn,Yn=St.zoomOut,Xn=St.zoomTo,Kn=St.transform,Zn=St.fitView,Wn=St.initialized;return y.exports.useEffect(function(){!Ae.current&&Wn&&(s&&s({fitView:function(){var co=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{padding:.1};return Zn(co)},zoomIn:Gn,zoomOut:Yn,zoomTo:Xn,setTransform:Kn,project:Mb(fn),getElements:Ib(fn),toObject:Rb(fn)}),Ae.current=!0)},[s,Gn,Yn,Xn,Kn,Zn,Wn]),y.exports.useEffect(function(){R&&$e(R)},[R]),y.exports.useEffect(function(){O&&dn(O)},[O]),y.exports.useEffect(function(){T&&At(T)},[T]),y.exports.useEffect(function(){j&&ro(j)},[j]),y.exports.useEffect(function(){typeof U<"u"&&oo(U)},[U]),y.exports.useEffect(function(){typeof V<"u"&&zn(V)},[V]),y.exports.useEffect(function(){typeof E<"u"&&jn(E)},[E]),y.exports.useEffect(function(){typeof w<"u"&&ao(w)},[w]),y.exports.useEffect(function(){typeof S<"u"&&Hn(S)},[S]),y.exports.useEffect(function(){typeof I<"u"&&io(I)},[I]),y.exports.useEffect(function(){typeof z<"u"&&Un(z)},[z]),y.exports.useEffect(function(){typeof H<"u"&&so(H)},[H]),y.exports.useEffect(function(){typeof ue<"u"&&Vn(ue)},[ue]),y.exports.useEffect(function(){typeof q<"u"&&uo(q)},[q]),D.createElement(lE,{onPaneClick:Ee,onPaneContextMenu:J,onPaneScroll:ge,onElementsRemove:oe,deleteKeyCode:_,selectionKeyCode:A,multiSelectionKeyCode:K,zoomActivationKeyCode:G,elementsSelectable:S,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:ne,zoomOnPinch:_e,zoomOnDoubleClick:Be,panOnScroll:$,panOnScrollSpeed:ye,panOnScrollMode:Se,paneMoveable:Me,defaultPosition:k,defaultZoom:X,translateExtent:H,onSelectionDragStart:x,onSelectionDrag:N,onSelectionDragStop:M,onSelectionContextMenu:C,preventScrolling:ie},D.createElement(dE,{nodeTypes:n,onElementClick:u,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onNodeDragStop:m,onNodeDrag:g,onNodeDragStart:v,selectNodesOnDrag:P,snapToGrid:U,snapGrid:V,onlyRenderVisibleElements:Y}),D.createElement(xE,{edgeTypes:r,onElementClick:u,onEdgeDoubleClick:c,connectionLineType:L,connectionLineStyle:B,connectionLineComponent:F,connectionMode:q,arrowHeadColor:pe,markerEndId:ve,onEdgeUpdate:ce,onlyRenderVisibleElements:Y,onEdgeContextMenu:be,onEdgeMouseEnter:Te,onEdgeMouseMove:xe,onEdgeMouseLeave:ee,onEdgeUpdateStart:wt,onEdgeUpdateEnd:_t,edgeUpdaterRadius:Qe}))};vv.displayName="GraphView";var OE=y.exports.memo(vv),NE=function(t){var n=t.elements,r=re(function(o){return o.setElements});return y.exports.useEffect(function(){r(n)},[n]),null},Eu=y.exports.createContext(null),ME=Eu.Provider;Eu.Consumer;var TE=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function PE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var DE=function(){return!0},gv=y.exports.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,a=o===void 0?Z.Top:o,i=e.isValidConnection,s=i===void 0?DE:i,u=e.isConnectable,l=u===void 0?!0:u,c=e.id,d=e.onConnect,f=e.children,h=e.className,p=Dr(e,TE),v=y.exports.useContext(Eu),g=re(function(G){return G.setConnectionPosition}),m=re(function(G){return G.setConnectionNodeId}),x=Q(function(G){return G.onConnect}),N=Q(function(G){return G.onConnectStart}),M=Q(function(G){return G.onConnectStop}),C=Q(function(G){return G.onConnectEnd}),q=Q(function(G){return G.connectionMode}),L=c||null,B=r==="target",F=y.exports.useCallback(function(G){x?.(G),d?.(G)},[x,d]),A=y.exports.useCallback(function(G){fv(G,L,v,m,g,F,B,s,q,void 0,void 0,N,M,C)},[L,v,m,g,F,B,s,q,N,M,C]),K=Ze(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",h,{source:!B,target:B,connectable:l}]);return D.createElement("div",PE({"data-handleid":L,"data-nodeid":v,"data-handlepos":a,className:K,onMouseDown:A,ref:t},p),f)});gv.displayName="Handle";var kt=y.exports.memo(gv),mv=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?Z.Top:o,i=t.sourcePosition,s=i===void 0?Z.Bottom:i;return D.createElement(D.Fragment,null,D.createElement(kt,{type:"target",position:a,isConnectable:r}),n.label,D.createElement(kt,{type:"source",position:s,isConnectable:r}))};mv.displayName="DefaultNode";var Ls=y.exports.memo(mv),yv=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,a=o===void 0?Z.Bottom:o;return D.createElement(D.Fragment,null,n.label,D.createElement(kt,{type:"source",position:a,isConnectable:r}))};yv.displayName="InputNode";var bv=y.exports.memo(yv),wv=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?Z.Top:o;return D.createElement(D.Fragment,null,D.createElement(kt,{type:"target",position:a,isConnectable:r}),n.label)};wv.displayName="OutputNode";var _v=y.exports.memo(wv);function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function IE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$c(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var nr=function(e){var t=function(r){var o=r.id,a=r.type,i=r.data,s=r.scale,u=r.xPos,l=r.yPos,c=r.selected,d=r.onClick,f=r.onMouseEnter,h=r.onMouseMove,p=r.onMouseLeave,v=r.onContextMenu,g=r.onNodeDoubleClick,m=r.onNodeDragStart,x=r.onNodeDrag,N=r.onNodeDragStop,M=r.style,C=r.className,q=r.isDraggable,L=r.isSelectable,B=r.isConnectable,F=r.selectNodesOnDrag,A=r.sourcePosition,K=r.targetPosition,G=r.isHidden,oe=r.isInitialized,_=r.snapToGrid,R=r.snapGrid,O=r.isDragging,T=r.resizeObserver,j=r.dragHandle,U=re(function($){return $.updateNodeDimensions}),V=re(function($){return $.addSelectedElements}),Y=re(function($){return $.updateNodePosDiff}),E=re(function($){return $.unsetNodesSelection}),w=y.exports.useRef(null),S=y.exports.useMemo(function(){return{id:o,type:a,position:{x:u,y:l},data:i}},[o,a,u,l,i]),P=y.exports.useMemo(function(){return _?R:[1,1]},[_,R]),I=y.exports.useMemo(function(){return IE({zIndex:c?10:3,transform:"translate(".concat(u,"px,").concat(l,"px)"),pointerEvents:L||q||d||f||h||p?"all":"none",opacity:oe?1:0},M)},[c,u,l,L,q,d,oe,M,f,h,p]),z=y.exports.useMemo(function(){if(!(!f||O))return function($){return f($,S)}},[f,O,S]),X=y.exports.useMemo(function(){if(!(!h||O))return function($){return h($,S)}},[h,O,S]),k=y.exports.useMemo(function(){if(!(!p||O))return function($){return p($,S)}},[p,O,S]),H=y.exports.useMemo(function(){if(!!v)return function($){return v($,S)}},[v,S]),ie=y.exports.useCallback(function($){q||(L&&(E(),c||V(S)),d?.($,S))},[L,c,q,d,S]),ue=y.exports.useCallback(function($){m?.($,S),F&&L?(E(),c||V(S)):!F&&!c&&L&&(E(),V([]))},[S,c,F,L,m]),pe=y.exports.useCallback(function($,ye){x&&(S.position.x+=ye.deltaX,S.position.y+=ye.deltaY,x($,S)),Y({id:o,diff:{x:ye.deltaX,y:ye.deltaY},isDragging:!0})},[o,S,x]),ve=y.exports.useCallback(function($){if(!O){L&&!F&&!c&&V(S),d?.($,S);return}Y({id:S.id,isDragging:!1}),N?.($,S)},[S,L,F,d,N,O,c]),ne=y.exports.useCallback(function($){g?.($,S)},[S,g]);if(y.exports.useLayoutEffect(function(){w.current&&!G&&U([{id:o,nodeElement:w.current,forceUpdate:!0}])},[o,G,A,K]),y.exports.useEffect(function(){if(w.current){var $=w.current;return T?.observe($),function(){return T?.unobserve($)}}},[]),G)return null;var _e=Ze(["react-flow__node","react-flow__node-".concat(a),C,{selected:c,selectable:L}]);return D.createElement(sE,{onStart:ue,onDrag:pe,onStop:ve,scale:s,disabled:!q,cancel:".nodrag",nodeRef:w,grid:P,enableUserSelectHack:!1,handle:j},D.createElement("div",{className:_e,ref:w,style:I,onMouseEnter:z,onMouseMove:X,onMouseLeave:k,onContextMenu:H,onClick:ie,onDoubleClick:ne,"data-id":o},D.createElement(ME,{value:o},D.createElement(e,{id:o,data:i,type:a,xPos:u,yPos:l,selected:c,isConnectable:B,sourcePosition:A,targetPosition:K,isDragging:O,dragHandle:j}))))};return t.displayName="NodeWrapper",y.exports.memo(t)};function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RE(e){var t={input:nr(e.input||bv),default:nr(e.default||Ls),output:nr(e.output||_v)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output"].includes(o)}).reduce(function(o,a){return o[a]=nr(e[a]||Ls),o},n);return Bc(Bc({},t),r)}var kE=function(e){var t=e.onSelectionChange,n=Q(function(r){return r.selectedElements});return y.exports.useEffect(function(){t(n)},[n]),null},Io=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;o--!==0;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n};function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function LE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var AE=function(t,n){var r=t.getBoundingClientRect();return{source:jc(".source",t,r,n),target:jc(".target",t,r,n)}},jc=function(t,n,r,o){var a=n.querySelectorAll(t);if(!a||!a.length)return null;var i=Array.from(a);return i.map(function(s){var u=s.getBoundingClientRect(),l=uu(s),c=s.getAttribute("data-handleid"),d=s.getAttribute("data-handlepos");return LE({id:c,position:d,x:(u.left-r.left)/o,y:(u.top-r.top)/o},l)})};function Hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bh:{var n=t.payload,r={nextNodes:[],nextEdges:[]},o=n.reduce(function(J,ce){if(Rt(ce)){var be=e.nodes.find(function(ee){return ee.id===ce.id});if(be){var Te=W(W({},be),ce);(be.position.x!==ce.position.x||be.position.y!==ce.position.y)&&(Te.__rf.position=ce.position),typeof ce.type<"u"&&ce.type!==be.type&&(Te.__rf.width=null),J.nextNodes.push(Te)}else J.nextNodes.push(Tb(ce,e.nodeExtent))}else if(gp(ce)){var xe=e.edges.find(function(ee){return ee.id===ce.id});xe?J.nextEdges.push(W(W({},xe),ce)):J.nextEdges.push(Pb(ce))}return J},r),a=o.nextNodes,i=o.nextEdges;return W(W({},e),{},{nodes:a,edges:i})}case zh:{var s=e.nodes.map(function(J){var ce=t.payload.find(function(ee){return ee.id===J.id});if(ce){var be=uu(ce.nodeElement),Te=be.width&&be.height&&(J.__rf.width!==be.width||J.__rf.height!==be.height||ce.forceUpdate);if(Te){var xe=AE(ce.nodeElement,e.transform[2]);return W(W({},J),{},{__rf:W(W(W({},J.__rf),be),{},{handleBounds:xe})})}}return J});return W(W({},e),{},{nodes:s})}case jh:{var u=t.payload,l=u.id,c=u.pos,d=c;if(e.snapToGrid){var f=Oe(e.snapGrid,2),h=f[0],p=f[1];d={x:h*Math.round(c.x/h),y:p*Math.round(c.y/p)}}var v=e.nodes.map(function(J){return J.id===l?W(W({},J),{},{__rf:W(W({},J.__rf),{},{position:d})}):J});return W(W({},e),{},{nodes:v})}case Hh:{var g=t.payload,m=g.id,x=g.diff,N=g.isDragging,M=e.nodes.map(function(J){var ce;if(m===J.id||(ce=e.selectedElements)!==null&&ce!==void 0&&ce.find(function(Te){return Te.id===J.id})){var be=W(W({},J),{},{__rf:W(W({},J.__rf),{},{isDragging:N})});return x&&(be.__rf.position={x:J.__rf.position.x+x.x,y:J.__rf.position.y+x.y}),be}return J});return W(W({},e),{},{nodes:M})}case Uh:{var C=t.payload;return W(W({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:C.x,startY:C.y,x:C.x,y:C.y,draw:!0}})}case Vh:{var q,L,B=t.payload,F=(q=e.userSelectionRect.startX)!==null&&q!==void 0?q:0,A=(L=e.userSelectionRect.startY)!==null&&L!==void 0?L:0,K=W(W({},e.userSelectionRect),{},{x:B.x<F?B.x:F,y:B.y<A?B.y:A,width:Math.abs(B.x-F),height:Math.abs(B.y-A)}),G=wp(e.nodes,K,e.transform,!1,!0),oe=_p(G,e.edges),_=[].concat(Pt(G),Pt(oe)),R=!Io(_,e.selectedElements),O=R?{selectedElements:_.length>0?_:null}:{};return W(W(W({},e),O),{},{userSelectionRect:K})}case Gh:{var T,j=(T=e.selectedElements)===null||T===void 0?void 0:T.filter(function(J){return Rt(J)&&J.__rf}),U=W(W({},e),{},{selectionActive:!1,userSelectionRect:W(W({},e.userSelectionRect),{},{draw:!1})});if(!j||j.length===0)U.selectedElements=null,U.nodesSelectionActive=!1;else{var V=cu(j);U.selectedNodesBbox=V,U.nodesSelectionActive=!0}return U}case Xh:{var Y=t.payload,E=Array.isArray(Y)?Y:[Y],w=!Io(E,e.selectedElements),S=w?E:e.selectedElements;return W(W({},e),{},{selectedElements:S})}case Zh:{var P=e.multiSelectionActive,I=e.selectedElements,z=t.payload,X=Array.isArray(z)?z:[z],k=X;P&&(k=I?[].concat(Pt(I),Pt(X)):X);var H=!Io(k,e.selectedElements),ie=H?k:e.selectedElements;return W(W({},e),{},{selectedElements:ie})}case Jh:{var ue=t.payload,pe=ue.d3Zoom,ve=ue.d3Selection,ne=ue.d3ZoomHandler,_e=ue.transform;return W(W({},e),{},{d3Zoom:pe,d3Selection:ve,d3ZoomHandler:ne,transform:_e})}case ep:{var $,ye=t.payload;return($=e.d3Zoom)===null||$===void 0||$.scaleExtent([ye,e.maxZoom]),W(W({},e),{},{minZoom:ye})}case tp:{var Se,Be=t.payload;return(Se=e.d3Zoom)===null||Se===void 0||Se.scaleExtent([e.minZoom,Be]),W(W({},e),{},{maxZoom:Be})}case np:{var Me,Ee=t.payload;return(Me=e.d3Zoom)===null||Me===void 0||Me.translateExtent(Ee),W(W({},e),{},{translateExtent:Ee})}case hp:{var ge=t.payload;return W(W({},e),{},{nodeExtent:ge,nodes:e.nodes.map(function(J){return W(W({},J),{},{__rf:W(W({},J.__rf),{},{position:vp(J.__rf.position,ge)})})})})}case Ah:case qh:case $h:case Fh:case Kh:case Yh:case Wh:case Qh:case rp:case op:case ap:case ip:case sp:case up:case cp:case lp:case dp:case fp:return W(W({},e),t.payload);default:return e}}function $E(e){var t=xh(qE,e);return t}var Sv={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:un.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.7.4"},FE=$E(Sv),Ev=function(t){var n=t.children,r=y.exports.useContext(gt),o=y.exports.useMemo(function(){var a,i;return r==null||(a=r.store)===null||a===void 0||(i=a.getState())===null||i===void 0?void 0:i.reactFlowVersion},[r]);return o?D.createElement(D.Fragment,null,n):D.createElement(Ty,{store:FE},n)};Ev.displayName="ReactFlowWrapper";function xv(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var BE=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}";xv(BE);var zE=".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}";xv(zE);var jE=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var HE={input:bv,default:Ls,output:_v},UE={default:Rs,straight:dv,step:lv,smoothstep:Su},Cv=y.exports.forwardRef(function(e,t){var n=e.elements,r=n===void 0?[]:n,o=e.className,a=e.nodeTypes,i=a===void 0?HE:a,s=e.edgeTypes,u=s===void 0?UE:s,l=e.onElementClick,c=e.onLoad,d=e.onMove,f=e.onMoveStart,h=e.onMoveEnd,p=e.onElementsRemove,v=e.onConnect,g=e.onConnectStart,m=e.onConnectStop,x=e.onConnectEnd,N=e.onNodeMouseEnter,M=e.onNodeMouseMove,C=e.onNodeMouseLeave,q=e.onNodeContextMenu,L=e.onNodeDoubleClick,B=e.onNodeDragStart,F=e.onNodeDrag,A=e.onNodeDragStop,K=e.onSelectionChange,G=e.onSelectionDragStart,oe=e.onSelectionDrag,_=e.onSelectionDragStop,R=e.onSelectionContextMenu,O=e.connectionMode,T=O===void 0?un.Strict:O,j=e.connectionLineType,U=j===void 0?Ht.Bezier:j,V=e.connectionLineStyle,Y=e.connectionLineComponent,E=e.deleteKeyCode,w=E===void 0?"Backspace":E,S=e.selectionKeyCode,P=S===void 0?"Shift":S,I=e.multiSelectionKeyCode,z=I===void 0?"Meta":I,X=e.zoomActivationKeyCode,k=X===void 0?"Meta":X,H=e.snapToGrid,ie=H===void 0?!1:H,ue=e.snapGrid,pe=ue===void 0?[15,15]:ue,ve=e.onlyRenderVisibleElements,ne=ve===void 0?!1:ve,_e=e.selectNodesOnDrag,$=_e===void 0?!0:_e,ye=e.nodesDraggable,Se=e.nodesConnectable,Be=e.elementsSelectable,Me=e.minZoom,Ee=e.maxZoom,ge=e.defaultZoom,J=ge===void 0?1:ge,ce=e.defaultPosition,be=ce===void 0?[0,0]:ce,Te=e.translateExtent,xe=e.preventScrolling,ee=xe===void 0?!0:xe,Qe=e.nodeExtent,wt=e.arrowHeadColor,_t=wt===void 0?"#b1b1b7":wt,Ae=e.markerEndId,$e=e.zoomOnScroll,dn=$e===void 0?!0:$e,At=e.zoomOnPinch,ro=At===void 0?!0:At,zn=e.panOnScroll,oo=zn===void 0?!1:zn,jn=e.panOnScrollSpeed,ao=jn===void 0?.5:jn,Hn=e.panOnScrollMode,io=Hn===void 0?nn.Free:Hn,Un=e.zoomOnDoubleClick,so=Un===void 0?!0:Un,Vn=e.paneMoveable,uo=Vn===void 0?!0:Vn,fn=e.onPaneClick,St=e.onPaneScroll,Gn=e.onPaneContextMenu,Yn=e.children,Xn=e.onEdgeUpdate,Kn=e.onEdgeContextMenu,Zn=e.onEdgeDoubleClick,Wn=e.onEdgeMouseEnter,fe=e.onEdgeMouseMove,co=e.onEdgeMouseLeave,Dg=e.onEdgeUpdateStart,Ig=e.onEdgeUpdateEnd,Ru=e.edgeUpdaterRadius,Rg=Ru===void 0?10:Ru,ku=e.nodeTypesId,kg=ku===void 0?"1":ku,Lu=e.edgeTypesId,Lg=Lu===void 0?"1":Lu,Ag=Dr(e,jE),qg=y.exports.useMemo(function(){return RE(i)},[kg]),$g=y.exports.useMemo(function(){return bE(u)},[Lg]),Fg=Ze(["react-flow",o]);return D.createElement("div",Vc(Vc({},Ag),{},{ref:t,className:Fg}),D.createElement(Ev,null,D.createElement(OE,{onLoad:c,onMove:d,onMoveStart:f,onMoveEnd:h,onElementClick:l,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:C,onNodeContextMenu:q,onNodeDoubleClick:L,onNodeDragStart:B,onNodeDrag:F,onNodeDragStop:A,nodeTypes:qg,edgeTypes:$g,connectionMode:T,connectionLineType:U,connectionLineStyle:V,connectionLineComponent:Y,selectionKeyCode:P,onElementsRemove:p,deleteKeyCode:w,multiSelectionKeyCode:z,zoomActivationKeyCode:k,onConnect:v,onConnectStart:g,onConnectStop:m,onConnectEnd:x,snapToGrid:ie,snapGrid:pe,onlyRenderVisibleElements:ne,nodesDraggable:ye,nodesConnectable:Se,elementsSelectable:Be,selectNodesOnDrag:$,minZoom:Me,maxZoom:Ee,defaultZoom:J,defaultPosition:be,translateExtent:Te,preventScrolling:ee,nodeExtent:Qe,arrowHeadColor:_t,markerEndId:Ae,zoomOnScroll:dn,zoomOnPinch:ro,zoomOnDoubleClick:so,panOnScroll:oo,panOnScrollSpeed:ao,panOnScrollMode:io,paneMoveable:uo,onPaneClick:fn,onPaneScroll:St,onPaneContextMenu:Gn,onSelectionDragStart:G,onSelectionDrag:oe,onSelectionDragStop:_,onSelectionContextMenu:R,onEdgeUpdate:Xn,onEdgeContextMenu:Kn,onEdgeDoubleClick:Zn,onEdgeMouseEnter:Wn,onEdgeMouseMove:fe,onEdgeMouseLeave:co,onEdgeUpdateStart:Dg,onEdgeUpdateEnd:Ig,edgeUpdaterRadius:Rg}),D.createElement(NE,{elements:r}),K&&D.createElement(kE,{onSelectionChange:K}),Yn))});Cv.displayName="ReactFlow";var Ov=function(t){var n=t.x,r=t.y,o=t.width,a=t.height,i=t.style,s=t.color,u=t.strokeColor,l=t.strokeWidth,c=t.className,d=t.borderRadius,f=t.shapeRendering,h=i||{},p=h.background,v=h.backgroundColor,g=s||p||v;return D.createElement("rect",{className:Ze(["react-flow__minimap-node",c]),x:n,y:r,rx:d,ry:d,width:o,height:a,fill:g,stroke:u,strokeWidth:l,shapeRendering:f})};Ov.displayName="MiniMapNode";var VE=y.exports.memo(Ov),GE=200,YE=150,Nv=function(t){var n=t.style,r=t.className,o=t.nodeStrokeColor,a=o===void 0?"#555":o,i=t.nodeColor,s=i===void 0?"#fff":i,u=t.nodeClassName,l=u===void 0?"":u,c=t.nodeBorderRadius,d=c===void 0?5:c,f=t.nodeStrokeWidth,h=f===void 0?2:f,p=t.maskColor,v=p===void 0?"rgb(240, 242, 243, 0.7)":p,g=Q(function(k){return k.width}),m=Q(function(k){return k.height}),x=Q(function(k){return k.transform}),N=Oe(x,3),M=N[0],C=N[1],q=N[2],L=Q(function(k){return k.nodes}),B=Ze(["react-flow__minimap",r]),F=n?.width||GE,A=n?.height||YE,K=s instanceof Function?s:function(){return s},G=a instanceof Function?a:function(){return a},oe=l instanceof Function?l:function(){return l},_=L&&L.length,R=cu(L),O={x:-M/q,y:-C/q,width:g/q,height:m/q},T=_?Db(R,O):O,j=T.width/F,U=T.height/A,V=Math.max(j,U),Y=V*F,E=V*A,w=5*V,S=T.x-(Y-T.width)/2-w,P=T.y-(E-T.height)/2-w,I=Y+w*2,z=E+w*2,X=typeof window>"u"||!!window.chrome?"crispEdges":"geometricPrecision";return D.createElement("svg",{width:F,height:A,viewBox:"".concat(S," ").concat(P," ").concat(I," ").concat(z),style:n,className:B},L.filter(function(k){return!k.isHidden}).map(function(k){return D.createElement(VE,{key:k.id,x:k.__rf.position.x,y:k.__rf.position.y,width:k.__rf.width,height:k.__rf.height,style:k.style,className:oe(k),color:K(k),borderRadius:d,strokeColor:G(k),strokeWidth:h,shapeRendering:X})}),D.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(S-w,",").concat(P-w,"h").concat(I+w*2,"v").concat(z+w*2,"h").concat(-I-w*2,`z
        M`).concat(O.x,",").concat(O.y,"h").concat(O.width,"v").concat(O.height,"h").concat(-O.width,"z"),fill:v,fillRule:"evenodd"}))};Nv.displayName="MiniMap";var XE=y.exports.memo(Nv),Gc;function As(){return As=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},As.apply(this,arguments)}var KE=function(t){return y.exports.createElement("svg",As({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t),Gc||(Gc=y.exports.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))},Yc;function qs(){return qs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qs.apply(this,arguments)}var ZE=function(t){return y.exports.createElement("svg",qs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},t),Yc||(Yc=y.exports.createElement("path",{d:"M0 0h32v4.2H0z"})))},Xc;function $s(){return $s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$s.apply(this,arguments)}var WE=function(t){return y.exports.createElement("svg",$s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},t),Xc||(Xc=y.exports.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))},Kc;function Fs(){return Fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fs.apply(this,arguments)}var QE=function(t){return y.exports.createElement("svg",Fs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},t),Kc||(Kc=y.exports.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))},Zc;function Bs(){return Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bs.apply(this,arguments)}var JE=function(t){return y.exports.createElement("svg",Bs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},t),Zc||(Zc=y.exports.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"})))},e1=["children","className"];function Wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function t1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var rr=function(t){var n=t.children,r=t.className,o=Dr(t,e1);return D.createElement("button",t1({type:"button",className:Ze(["react-flow__controls-button",r])},o),n)},Mv=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,u=s===void 0?!0:s,l=t.fitViewParams,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,h=t.onInteractiveChange,p=t.className,v=t.children,g=y.exports.useState(!1),m=Oe(g,2),x=m[0],N=m[1],M=re(function(R){return R.setInteractive}),C=pv(),q=C.zoomIn,L=C.zoomOut,B=C.fitView,F=Q(function(R){return R.nodesDraggable&&R.nodesConnectable&&R.elementsSelectable}),A=Ze(["react-flow__controls",p]),K=y.exports.useCallback(function(){q?.(),c?.()},[q,c]),G=y.exports.useCallback(function(){L?.(),d?.()},[L,d]),oe=y.exports.useCallback(function(){B?.(l),f?.()},[B,l,f]),_=y.exports.useCallback(function(){M?.(!F),h?.(!F)},[F,M,h]);return y.exports.useEffect(function(){N(!0)},[]),x?D.createElement("div",{className:A,style:n},o&&D.createElement(D.Fragment,null,D.createElement(rr,{onClick:K,className:"react-flow__controls-zoomin"},D.createElement(KE,null)),D.createElement(rr,{onClick:G,className:"react-flow__controls-zoomout"},D.createElement(ZE,null))),i&&D.createElement(rr,{className:"react-flow__controls-fitview",onClick:oe},D.createElement(WE,null)),u&&D.createElement(rr,{className:"react-flow__controls-interactive",onClick:_},F?D.createElement(JE,null):D.createElement(QE,null)),v):null};Mv.displayName="Controls";var n1=y.exports.memo(Mv),r1=function(t,n,r){return D.createElement("path",{stroke:r,strokeWidth:n,d:"M".concat(t/2," 0 V").concat(t," M0 ").concat(t/2," H").concat(t)})},o1=function(t,n){return D.createElement("circle",{cx:t,cy:t,r:t,fill:n})},or;function Qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qc(Object(n),!0).forEach(function(r){qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var a1=(or={},qe(or,sn.Dots,"#81818a"),qe(or,sn.Lines,"#eee"),or),Tv=function(t){var n=t.variant,r=n===void 0?sn.Dots:n,o=t.gap,a=o===void 0?15:o,i=t.size,s=i===void 0?.4:i,u=t.color,l=t.style,c=t.className,d=Q(function(B){return B.transform}),f=Oe(d,3),h=f[0],p=f[1],v=f[2],g=y.exports.useMemo(function(){return"pattern-".concat(Math.floor(Math.random()*1e5))},[]),m=Ze(["react-flow__background",c]),x=a*v,N=h%x,M=p%x,C=r===sn.Lines,q=u||a1[r],L=C?r1(x,s,q):o1(s*v,q);return D.createElement("svg",{className:m,style:Jc(Jc({},l),{},{width:"100%",height:"100%"})},D.createElement("pattern",{id:g,x:N,y:M,width:x,height:x,patternUnits:"userSpaceOnUse"},L),D.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(g,")")}))};Tv.displayName="Background";var i1=y.exports.memo(Tv);const s1=({data:{label:e},prefix:t,selected:n})=>se(ke,{children:[b(kt,{position:Z.Right,type:"source"}),b("div",{className:`react-flow__node-default keycloak__authentication__subflow_node ${n?"selected":""}`,children:se("div",{children:[t," ",e]})}),b(kt,{position:Z.Left,type:"target"})]}),Pv=y.exports.memo(s1),u1=({...e})=>b(Pv,{...e,prefix:"Start"}),c1=({...e})=>b(Pv,{...e,prefix:"End"}),l1=({data:e,selected:t})=>se(ke,{children:[b(kt,{position:Z.Right,type:"source"}),b("div",{className:`react-flow__node-default keycloak__authentication__conditional_node ${t?"selected":""}`,children:b("div",{children:e.label})}),b(kt,{position:Z.Left,type:"target"})]}),d1=y.exports.memo(l1),ar=33,f1=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:a,targetPosition:i,style:s={},arrowHeadType:u,markerEndId:l,selected:c,data:{onEdgeClick:d}})=>{const f=_u({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:o,targetPosition:i}),h=Zr(u,l),[p,v]=Fn({sourceX:t,sourceY:n,targetX:r,targetY:o});return se(ke,{children:[b("path",{id:e,style:s,className:"react-flow__edge-path",d:f,markerEnd:h}),c&&b("foreignObject",{width:ar,height:ar,x:p-ar/2,y:v-ar/2,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:b("button",{className:"edgebutton",onClick:g=>d(g,e),children:b(sh,{})})})]})};var Ro,el;function xu(){if(el)return Ro;el=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o&&n(t[r],r,t)!==!1;);return t}return Ro=e,Ro}var ko,tl;function h1(){if(tl)return ko;tl=1;var e=Tr,t=Xt();function n(r,o){return r&&e(o,t(o),r)}return ko=n,ko}var Lo,nl;function p1(){if(nl)return Lo;nl=1;var e=Tr,t=Rn;function n(r,o){return r&&e(o,t(o),r)}return Lo=n,Lo}var Ao,rl;function v1(){if(rl)return Ao;rl=1;var e=Tr,t=Zf();function n(r,o){return e(r,t(r),o)}return Ao=n,Ao}var qo,ol;function Dv(){if(ol)return qo;ol=1;var e=Wf(),t=uh,n=Zf(),r=im(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return qo=a,qo}var $o,al;function g1(){if(al)return $o;al=1;var e=Tr,t=Dv();function n(r,o){return e(r,t(r),o)}return $o=n,$o}var Fo,il;function m1(){if(il)return Fo;il=1;var e=sm(),t=Dv(),n=Rn;function r(o){return e(o,n,t)}return Fo=r,Fo}var Bo,sl;function y1(){if(sl)return Bo;sl=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var o=r.length,a=new r.constructor(o);return o&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Bo=n,Bo}var zo,ul;function b1(){if(ul)return zo;ul=1;var e=ch;function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}return zo=t,zo}var jo,cl;function w1(){if(cl)return jo;cl=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return jo=t,jo}var Ho,ll;function _1(){if(ll)return Ho;ll=1;var e=Xs,t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(o){return n?Object(n.call(o)):{}}return Ho=r,Ho}var Uo,dl;function S1(){if(dl)return Uo;dl=1;var e=ch,t=b1(),n=w1(),r=_1(),o=Mm,a="[object Boolean]",i="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",p="[object DataView]",v="[object Float32Array]",g="[object Float64Array]",m="[object Int8Array]",x="[object Int16Array]",N="[object Int32Array]",M="[object Uint8Array]",C="[object Uint8ClampedArray]",q="[object Uint16Array]",L="[object Uint32Array]";function B(F,A,K){var G=F.constructor;switch(A){case h:return e(F);case a:case i:return new G(+F);case p:return t(F,K);case v:case g:case m:case x:case N:case M:case C:case q:case L:return o(F,K);case s:return new G;case u:case d:return new G(F);case l:return n(F);case c:return new G;case f:return r(F)}}return Uo=B,Uo}var Vo,fl;function E1(){if(fl)return Vo;fl=1;var e=Tn(),t=Pr,n="[object Map]";function r(o){return t(o)&&e(o)==n}return Vo=r,Vo}var Go,hl;function x1(){if(hl)return Go;hl=1;var e=E1(),t=Ks(),n=lh.exports,r=n&&n.isMap,o=r?t(r):e;return Go=o,Go}var Yo,pl;function C1(){if(pl)return Yo;pl=1;var e=Tn(),t=Pr,n="[object Set]";function r(o){return t(o)&&e(o)==n}return Yo=r,Yo}var Xo,vl;function O1(){if(vl)return Xo;vl=1;var e=C1(),t=Ks(),n=lh.exports,r=n&&n.isSet,o=r?t(r):e;return Xo=o,Xo}var Ko,gl;function Iv(){if(gl)return Ko;gl=1;var e=dh,t=xu(),n=Zs(),r=h1(),o=p1(),a=Tm.exports,i=Pm,s=v1(),u=g1(),l=um(),c=m1(),d=Tn(),f=y1(),h=S1(),p=Dm,v=Le(),g=Ws.exports,m=x1(),x=kn,N=O1(),M=Xt(),C=Rn,q=1,L=2,B=4,F="[object Arguments]",A="[object Array]",K="[object Boolean]",G="[object Date]",oe="[object Error]",_="[object Function]",R="[object GeneratorFunction]",O="[object Map]",T="[object Number]",j="[object Object]",U="[object RegExp]",V="[object Set]",Y="[object String]",E="[object Symbol]",w="[object WeakMap]",S="[object ArrayBuffer]",P="[object DataView]",I="[object Float32Array]",z="[object Float64Array]",X="[object Int8Array]",k="[object Int16Array]",H="[object Int32Array]",ie="[object Uint8Array]",ue="[object Uint8ClampedArray]",pe="[object Uint16Array]",ve="[object Uint32Array]",ne={};ne[F]=ne[A]=ne[S]=ne[P]=ne[K]=ne[G]=ne[I]=ne[z]=ne[X]=ne[k]=ne[H]=ne[O]=ne[T]=ne[j]=ne[U]=ne[V]=ne[Y]=ne[E]=ne[ie]=ne[ue]=ne[pe]=ne[ve]=!0,ne[oe]=ne[_]=ne[w]=!1;function _e($,ye,Se,Be,Me,Ee){var ge,J=ye&q,ce=ye&L,be=ye&B;if(Se&&(ge=Me?Se($,Be,Me,Ee):Se($)),ge!==void 0)return ge;if(!x($))return $;var Te=v($);if(Te){if(ge=f($),!J)return i($,ge)}else{var xe=d($),ee=xe==_||xe==R;if(g($))return a($,J);if(xe==j||xe==F||ee&&!Me){if(ge=ce||ee?{}:p($),!J)return ce?u($,o(ge,$)):s($,r(ge,$))}else{if(!ne[xe])return Me?$:{};ge=h($,xe,J)}}Ee||(Ee=new e);var Qe=Ee.get($);if(Qe)return Qe;Ee.set($,ge),N($)?$.forEach(function(Ae){ge.add(_e(Ae,ye,Se,Ae,$,Ee))}):m($)&&$.forEach(function(Ae,$e){ge.set($e,_e(Ae,ye,Se,$e,$,Ee))});var wt=be?ce?c:l:ce?C:M,_t=Te?void 0:wt($);return t(_t||$,function(Ae,$e){_t&&($e=Ae,Ae=$[$e]),n(ge,$e,_e(Ae,ye,Se,$e,$,Ee))}),ge}return Ko=_e,Ko}var Zo,ml;function N1(){if(ml)return Zo;ml=1;var e=Iv(),t=4;function n(r){return e(r,t)}return Zo=n,Zo}var Wo={exports:{}},Qo,yl;function Cu(){if(yl)return Qo;yl=1;var e=fh,t=Xt();function n(r,o){return r&&e(r,o,t)}return Qo=n,Qo}var Jo,bl;function M1(){if(bl)return Jo;bl=1;var e=Ln;function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,u=Object(o);(r?s--:++s<i)&&a(u[s],s,u)!==!1;);return o}}return Jo=t,Jo}var ea,wl;function Wr(){if(wl)return ea;wl=1;var e=Cu(),t=M1(),n=t(e);return ea=n,ea}var ta,_l;function Rv(){if(_l)return ta;_l=1;var e=An;function t(n){return typeof n=="function"?n:e}return ta=t,ta}var na,Sl;function kv(){if(Sl)return na;Sl=1;var e=xu(),t=Wr(),n=Rv(),r=Le();function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return na=o,na}var El;function Lv(){return El||(El=1,function(e){e.exports=kv()}(Wo)),Wo.exports}var ra,xl;function T1(){if(xl)return ra;xl=1;var e=Wr();function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return ra=t,ra}var oa,Cl;function P1(){if(Cl)return oa;Cl=1;var e=dh,t=Qf,n=1,r=2;function o(a,i,s,u){var l=s.length,c=l,d=!u;if(a==null)return!c;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<c;){f=s[l];var h=f[0],p=a[h],v=f[1];if(d&&f[2]){if(p===void 0&&!(h in a))return!1}else{var g=new e;if(u)var m=u(p,v,h,a,i,g);if(!(m===void 0?t(v,p,n|r,u,g):m))return!1}}return!0}return oa=o,oa}var aa,Ol;function Av(){if(Ol)return aa;Ol=1;var e=kn;function t(n){return n===n&&!e(n)}return aa=t,aa}var ia,Nl;function D1(){if(Nl)return ia;Nl=1;var e=Av(),t=Xt();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return ia=n,ia}var sa,Ml;function qv(){if(Ml)return sa;Ml=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return sa=e,sa}var ua,Tl;function I1(){if(Tl)return ua;Tl=1;var e=P1(),t=D1(),n=qv();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return ua=r,ua}var ca,Pl;function ln(){if(Pl)return ca;Pl=1;var e=hh,t=Pr,n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return ca=r,ca}var la,Dl;function Ou(){if(Dl)return la;Dl=1;var e=Le(),t=ln(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return la=o,la}var da,Il;function R1(){if(Il)return da;Il=1;var e=Im,t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],u=a.cache;if(u.has(s))return u.get(s);var l=r.apply(this,i);return a.cache=u.set(s,l)||u,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,da=n,da}var fa,Rl;function k1(){if(Rl)return fa;Rl=1;var e=R1(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return fa=n,fa}var ha,kl;function L1(){if(kl)return ha;kl=1;var e=k1(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,u,l){a.push(u?l.replace(n,"$1"):s||i)}),a});return ha=r,ha}var pa,Ll;function Qr(){if(Ll)return pa;Ll=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return pa=e,pa}var va,Al;function A1(){if(Al)return va;Al=1;var e=Xs,t=Qr(),n=Le(),r=ln(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(u){if(typeof u=="string")return u;if(n(u))return t(u,s)+"";if(r(u))return i?i.call(u):"";var l=u+"";return l=="0"&&1/u==-o?"-0":l}return va=s,va}var ga,ql;function $v(){if(ql)return ga;ql=1;var e=A1();function t(n){return n==null?"":e(n)}return ga=t,ga}var ma,$l;function Jr(){if($l)return ma;$l=1;var e=Le(),t=Ou(),n=L1(),r=$v();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return ma=o,ma}var ya,Fl;function Bn(){if(Fl)return ya;Fl=1;var e=ln(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return ya=n,ya}var ba,Bl;function eo(){if(Bl)return ba;Bl=1;var e=Jr(),t=Bn();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return ba=n,ba}var wa,zl;function q1(){if(zl)return wa;zl=1;var e=eo();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return wa=t,wa}var _a,jl;function $1(){if(jl)return _a;jl=1;function e(t,n){return t!=null&&n in Object(t)}return _a=e,_a}var Sa,Hl;function Fv(){if(Hl)return Sa;Hl=1;var e=Jr(),t=Qs,n=Le(),r=ph,o=Rm,a=Bn();function i(s,u,l){u=e(u,s);for(var c=-1,d=u.length,f=!1;++c<d;){var h=a(u[c]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++c!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(h,d)&&(n(s)||t(s)))}return Sa=i,Sa}var Ea,Ul;function Bv(){if(Ul)return Ea;Ul=1;var e=$1(),t=Fv();function n(r,o){return r!=null&&t(r,o,e)}return Ea=n,Ea}var xa,Vl;function F1(){if(Vl)return xa;Vl=1;var e=Qf,t=q1(),n=Bv(),r=Ou(),o=Av(),a=qv(),i=Bn(),s=1,u=2;function l(c,d){return r(c)&&o(d)?a(i(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,s|u)}}return xa=l,xa}var Ca,Gl;function zv(){if(Gl)return Ca;Gl=1;function e(t){return function(n){return n?.[t]}}return Ca=e,Ca}var Oa,Yl;function B1(){if(Yl)return Oa;Yl=1;var e=eo();function t(n){return function(r){return e(r,n)}}return Oa=t,Oa}var Na,Xl;function z1(){if(Xl)return Na;Xl=1;var e=zv(),t=B1(),n=Ou(),r=Bn();function o(a){return n(a)?e(r(a)):t(a)}return Na=o,Na}var Ma,Kl;function bt(){if(Kl)return Ma;Kl=1;var e=I1(),t=F1(),n=An,r=Le(),o=z1();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return Ma=a,Ma}var Ta,Zl;function jv(){if(Zl)return Ta;Zl=1;var e=cm(),t=T1(),n=bt(),r=Le();function o(a,i){var s=r(a)?e:t;return s(a,n(i,3))}return Ta=o,Ta}var Pa,Wl;function j1(){if(Wl)return Pa;Wl=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return Pa=n,Pa}var Da,Ql;function Hv(){if(Ql)return Da;Ql=1;var e=j1(),t=Fv();function n(r,o){return r!=null&&t(r,o,e)}return Da=n,Da}var Ia,Jl;function H1(){if(Jl)return Ia;Jl=1;var e=Jf(),t=Tn(),n=Qs,r=Le(),o=Ln,a=Ws.exports,i=km,s=vh,u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(o(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||n(h)))return!h.length;var p=t(h);if(p==u||p==l)return!h.size;if(i(h))return!e(h).length;for(var v in h)if(d.call(h,v))return!1;return!0}return Ia=f,Ia}var Ra,ed;function Uv(){if(ed)return Ra;ed=1;function e(t){return t===void 0}return Ra=e,Ra}var ka,td;function Vv(){if(td)return ka;td=1;var e=Wr(),t=Ln;function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,u,l){i[++a]=o(s,u,l)}),i}return ka=n,ka}var La,nd;function Gv(){if(nd)return La;nd=1;var e=Qr(),t=bt(),n=Vv(),r=Le();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return La=o,La}var Aa,rd;function U1(){if(rd)return Aa;rd=1;function e(t,n,r,o){var a=-1,i=t==null?0:t.length;for(o&&i&&(r=t[++a]);++a<i;)r=n(r,t[a],a,t);return r}return Aa=e,Aa}var qa,od;function V1(){if(od)return qa;od=1;function e(t,n,r,o,a){return a(t,function(i,s,u){r=o?(o=!1,i):n(r,i,s,u)}),r}return qa=e,qa}var $a,ad;function Yv(){if(ad)return $a;ad=1;var e=U1(),t=Wr(),n=bt(),r=V1(),o=Le();function a(i,s,u){var l=o(i)?e:r,c=arguments.length<3;return l(i,n(s,4),u,c,t)}return $a=a,$a}var Fa,id;function G1(){if(id)return Fa;id=1;var e=hh,t=Le(),n=Pr,r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Fa=o,Fa}var Ba,sd;function Y1(){if(sd)return Ba;sd=1;var e=zv(),t=e("length");return Ba=t,Ba}var za,ud;function X1(){if(ud)return za;ud=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function u(l){return s.test(l)}return za=u,za}var ja,cd;function K1(){if(cd)return ja;cd=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",p=l+"?",v="["+a+"]?",g="(?:"+h+"(?:"+[c,d,f].join("|")+")"+v+p+")*",m=v+p+g,x="(?:"+[c+s+"?",s,d,f,i].join("|")+")",N=RegExp(u+"(?="+u+")|"+x+m,"g");function M(C){for(var q=N.lastIndex=0;N.test(C);)++q;return q}return ja=M,ja}var Ha,ld;function Z1(){if(ld)return Ha;ld=1;var e=Y1(),t=X1(),n=K1();function r(o){return t(o)?n(o):e(o)}return Ha=r,Ha}var Ua,dd;function W1(){if(dd)return Ua;dd=1;var e=Jf(),t=Tn(),n=Ln,r=G1(),o=Z1(),a="[object Map]",i="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?o(u):u.length;var l=t(u);return l==a||l==i?u.size:e(u).length}return Ua=s,Ua}var Va,fd;function Q1(){if(fd)return Va;fd=1;var e=xu(),t=Lm,n=Cu(),r=bt(),o=uh,a=Le(),i=Ws.exports,s=gh,u=kn,l=vh;function c(d,f,h){var p=a(d),v=p||i(d)||l(d);if(f=r(f,4),h==null){var g=d&&d.constructor;v?h=p?new g:[]:u(d)?h=s(g)?t(o(d)):{}:h={}}return(v?e:n)(d,function(m,x,N){return f(h,m,x,N)}),h}return Va=c,Va}var Ga,hd;function J1(){if(hd)return Ga;hd=1;var e=Xs,t=Qs,n=Le(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Ga=o,Ga}var Ya,pd;function Nu(){if(pd)return Ya;pd=1;var e=Wf(),t=J1();function n(r,o,a,i,s){var u=-1,l=r.length;for(a||(a=t),s||(s=[]);++u<l;){var c=r[u];o>0&&a(c)?o>1?n(c,o-1,a,i,s):e(s,c):i||(s[s.length]=c)}return s}return Ya=n,Ya}var Xa,vd;function Xv(){if(vd)return Xa;vd=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return Xa=e,Xa}var Ka,gd;function ex(){if(gd)return Ka;gd=1;function e(t){return t!==t}return Ka=e,Ka}var Za,md;function tx(){if(md)return Za;md=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Za=e,Za}var Wa,yd;function nx(){if(yd)return Wa;yd=1;var e=Xv(),t=ex(),n=tx();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Wa=r,Wa}var Qa,bd;function rx(){if(bd)return Qa;bd=1;var e=nx();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return Qa=t,Qa}var Ja,wd;function ox(){if(wd)return Ja;wd=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return Ja=e,Ja}var ei,_d;function ax(){if(_d)return ei;_d=1;function e(){}return ei=e,ei}var ti,Sd;function ix(){if(Sd)return ti;Sd=1;var e=lm(),t=ax(),n=eh,r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return ti=o,ti}var ni,Ed;function sx(){if(Ed)return ni;Ed=1;var e=dm,t=rx(),n=ox(),r=fm,o=ix(),a=eh,i=200;function s(u,l,c){var d=-1,f=t,h=u.length,p=!0,v=[],g=v;if(c)p=!1,f=n;else if(h>=i){var m=l?null:o(u);if(m)return a(m);p=!1,f=r,g=new e}else g=l?[]:v;e:for(;++d<h;){var x=u[d],N=l?l(x):x;if(x=c||x!==0?x:0,p&&N===N){for(var M=g.length;M--;)if(g[M]===N)continue e;l&&g.push(N),v.push(x)}else f(g,N,c)||(g!==v&&g.push(N),v.push(x))}return v}return ni=s,ni}var ri,xd;function ux(){if(xd)return ri;xd=1;var e=Nu(),t=Js,n=sx(),r=Am,o=t(function(a){return n(e(a,1,r,!0))});return ri=o,ri}var oi,Cd;function cx(){if(Cd)return oi;Cd=1;var e=Qr();function t(n,r){return e(r,function(o){return n[o]})}return oi=t,oi}var ai,Od;function Kv(){if(Od)return ai;Od=1;var e=cx(),t=Xt();function n(r){return r==null?[]:e(r,t(r))}return ai=n,ai}var ii,Nd;function We(){if(Nd)return ii;Nd=1;var e;if(typeof Ys=="function")try{e={clone:N1(),constant:mh(),each:Lv(),filter:jv(),has:Hv(),isArray:Le(),isEmpty:H1(),isFunction:gh,isUndefined:Uv(),keys:Xt(),map:Gv(),reduce:Yv(),size:W1(),transform:Q1(),union:ux(),values:Kv()}}catch{}return e||(e=window._),ii=e,ii}var si,Md;function Mu(){if(Md)return si;Md=1;var e=We();si=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},o.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(p){f.length>1?h.setNode(p,d):h.setNode(p)}),this},o.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},o.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},o.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},o.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},o.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(v,g){c(g)&&d.setNode(g,v)}),e.each(this._edgeObjs,function(v){d.hasNode(v.v)&&d.hasNode(v.w)&&d.setEdge(v,f.edge(v))});var h={};function p(v){var g=f.parent(v);return g===void 0||d.hasNode(g)?(h[v]=g,g):g in h?h[g]:p(g)}return this._isCompound&&e.each(d.nodes(),function(v){d.setParent(v,p(v))}),d},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(p,v){return h.length>1?f.setEdge(p,v,d):f.setEdge(p,v),v}),this},o.prototype.setEdge=function(){var c,d,f,h,p=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(c=v.v,d=v.w,f=v.name,arguments.length===2&&(h=arguments[1],p=!0)):(c=v,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,g))return p&&(this._edgeLabels[g]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[g]=p?h:this._defaultEdgeLabelFn(c,d,f);var m=u(this._isDirected,c,d,f);return c=m.v,d=m.w,Object.freeze(m),this._edgeObjs[g]=m,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][g]=m,this._out[c][g]=m,this._edgeCount++,this},o.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[h]},o.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},o.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),p=this._edgeObjs[h];return p&&(c=p.v,d=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],i(this._preds[d],c),i(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},o.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(p){return p.v===d}):h}},o.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(p){return p.w===d}):h}},o.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function i(c,d){--c[d]||delete c[d]}function s(c,d,f,h){var p=""+d,v=""+f;if(!c&&p>v){var g=p;p=v,v=g}return p+r+v+r+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var p=""+d,v=""+f;if(!c&&p>v){var g=p;p=v,v=g}var m={v:p,w:v};return h&&(m.name=h),m}function l(c,d){return s(c,d.v,d.w,d.name)}return si}var ui,Td;function lx(){return Td||(Td=1,ui="2.1.8"),ui}var ci,Pd;function dx(){return Pd||(Pd=1,ci={Graph:Mu(),version:lx()}),ci}var li,Dd;function fx(){if(Dd)return li;Dd=1;var e=We(),t=Mu();li={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var u=i.node(s),l=i.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function o(i){return e.map(i.edges(),function(s){var u=i.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(i.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return li}var di,Id;function hx(){if(Id)return di;Id=1;var e=We();di=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return di}var fi,Rd;function Zv(){if(Rd)return fi;Rd=1;var e=We();fi=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},fi}var hi,kd;function Wv(){if(kd)return hi;kd=1;var e=We(),t=Zv();hi=r;var n=e.constant(1);function r(a,i,s,u){return o(a,String(i),s||n,u||function(l){return a.outEdges(l)})}function o(a,i,s,u){var l={},c=new t,d,f,h=function(p){var v=p.v!==d?p.v:p.w,g=l[v],m=s(p),x=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+m);x<g.distance&&(g.distance=x,g.predecessor=d,c.decrease(v,x))};for(a.nodes().forEach(function(p){var v=p===i?0:Number.POSITIVE_INFINITY;l[p]={distance:v},c.add(p,v)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return hi}var pi,Ld;function px(){if(Ld)return pi;Ld=1;var e=Wv(),t=We();pi=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return pi}var vi,Ad;function Qv(){if(Ad)return vi;Ad=1;var e=We();vi=t;function t(n){var r=0,o=[],a={},i=[];function s(u){var l=a[u]={onStack:!0,lowlink:r,index:r++};if(o.push(u),n.successors(u).forEach(function(f){e.has(a,f)?a[f].onStack&&(l.lowlink=Math.min(l.lowlink,a[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,a[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=o.pop(),a[d].onStack=!1,c.push(d);while(u!==d);i.push(c)}}return n.nodes().forEach(function(u){e.has(a,u)||s(u)}),i}return vi}var gi,qd;function vx(){if(qd)return gi;qd=1;var e=We(),t=Qv();gi=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return gi}var mi,$d;function gx(){if($d)return mi;$d=1;var e=We();mi=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},u=o.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),i(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=a(c);s[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var f=s[d];u.forEach(function(h){var p=f[l],v=c[h],g=f[h],m=p.distance+v.distance;m<g.distance&&(g.distance=m,g.predecessor=v.predecessor)})})}),s}return mi}var yi,Fd;function Jv(){if(Fd)return yi;Fd=1;var e=We();yi=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(u){if(e.has(a,u))throw new n;e.has(o,u)||(a[u]=!0,o[u]=!0,e.each(r.predecessors(u),s),delete a[u],i.push(u))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,yi}var bi,Bd;function mx(){if(Bd)return bi;Bd=1;var e=Jv();bi=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return bi}var wi,zd;function eg(){if(zd)return wi;zd=1;var e=We();wi=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(o,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,a==="post",u,i,s)}),s}function n(r,o,a,i,s,u){e.has(i,o)||(i[o]=!0,a||u.push(o),e.each(s(o),function(l){n(r,l,a,i,s,u)}),a&&u.push(o))}return wi}var _i,jd;function yx(){if(jd)return _i;jd=1;var e=eg();_i=t;function t(n,r){return e(n,r,"post")}return _i}var Si,Hd;function bx(){if(Hd)return Si;Hd=1;var e=eg();Si=t;function t(n,r){return e(n,r,"pre")}return Si}var Ei,Ud;function wx(){if(Ud)return Ei;Ud=1;var e=We(),t=Mu(),n=Zv();Ei=r;function r(o,a){var i=new t,s={},u=new n,l;function c(f){var h=f.v===l?f.w:f.v,p=u.priority(h);if(p!==void 0){var v=a(f);v<p&&(s[h]=l,u.decrease(h,v))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),i.setNode(f)}),u.decrease(o.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))i.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+o);d=!0}o.nodeEdges(l).forEach(c)}return i}return Ei}var xi,Vd;function _x(){return Vd||(Vd=1,xi={components:hx(),dijkstra:Wv(),dijkstraAll:px(),findCycles:vx(),floydWarshall:gx(),isAcyclic:mx(),postorder:yx(),preorder:bx(),prim:wx(),tarjan:Qv(),topsort:Jv()}),xi}var Ci,Gd;function Sx(){if(Gd)return Ci;Gd=1;var e=dx();return Ci={Graph:e.Graph,json:fx(),alg:_x(),version:e.version},Ci}var Er;if(typeof Ys=="function")try{Er=Sx()}catch{}Er||(Er=window.graphlib);var nt=Er,Oi,Yd;function Ex(){if(Yd)return Oi;Yd=1;var e=Iv(),t=1,n=4;function r(o){return e(o,t|n)}return Oi=r,Oi}var Ni,Xd;function xx(){if(Xd)return Ni;Xd=1;var e=Js,t=qm(),n=eu,r=Rn,o=Object.prototype,a=o.hasOwnProperty,i=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var f=u[l],h=r(f),p=-1,v=h.length;++p<v;){var g=h[p],m=s[g];(m===void 0||t(m,o[g])&&!a.call(s,g))&&(s[g]=f[g])}return s});return Ni=i,Ni}var Mi,Kd;function Cx(){if(Kd)return Mi;Kd=1;var e=bt(),t=Ln,n=Xt();function r(o){return function(a,i,s){var u=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(u[d],d,u)}}var c=o(a,i,s);return c>-1?u[l?a[c]:c]:void 0}}return Mi=r,Mi}var Ti,Zd;function Ox(){if(Zd)return Ti;Zd=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Ti=t,Ti}var Pi,Wd;function Nx(){if(Wd)return Pi;Wd=1;var e=Ox(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Pi=n,Pi}var Di,Qd;function Mx(){if(Qd)return Di;Qd=1;var e=Nx(),t=kn,n=ln(),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return Di=u,Di}var Ii,Jd;function tg(){if(Jd)return Ii;Jd=1;var e=Mx(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return Ii=r,Ii}var Ri,ef;function Tx(){if(ef)return Ri;ef=1;var e=tg();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Ri=t,Ri}var ki,tf;function Px(){if(tf)return ki;tf=1;var e=Xv(),t=bt(),n=Tx(),r=Math.max;function o(a,i,s){var u=a==null?0:a.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(a,t(i,3),l)}return ki=o,ki}var Li,nf;function Dx(){if(nf)return Li;nf=1;var e=Cx(),t=Px(),n=e(t);return Li=n,Li}var Ai,rf;function ng(){if(rf)return Ai;rf=1;var e=Nu();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Ai=t,Ai}var qi,of;function Ix(){if(of)return qi;of=1;var e=fh,t=Rv(),n=Rn;function r(o,a){return o==null?o:e(o,t(a),n)}return qi=r,qi}var $i,af;function Rx(){if(af)return $i;af=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return $i=e,$i}var Fi,sf;function kx(){if(sf)return Fi;sf=1;var e=$m(),t=Cu(),n=bt();function r(o,a){var i={};return a=n(a,3),t(o,function(s,u,l){e(i,u,a(s,u,l))}),i}return Fi=r,Fi}var Bi,uf;function Tu(){if(uf)return Bi;uf=1;var e=ln();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):o(u,l)))var l=u,c=s}return c}return Bi=t,Bi}var zi,cf;function Lx(){if(cf)return zi;cf=1;function e(t,n){return t>n}return zi=e,zi}var ji,lf;function Ax(){if(lf)return ji;lf=1;var e=Tu(),t=Lx(),n=An;function r(o){return o&&o.length?e(o,n,t):void 0}return ji=r,ji}var Hi,df;function qx(){if(df)return Hi;df=1;var e=Bm,t=Fm,n=t(function(r,o,a){e(r,o,a)});return Hi=n,Hi}var Ui,ff;function rg(){if(ff)return Ui;ff=1;function e(t,n){return t<n}return Ui=e,Ui}var Vi,hf;function $x(){if(hf)return Vi;hf=1;var e=Tu(),t=rg(),n=An;function r(o){return o&&o.length?e(o,n,t):void 0}return Vi=r,Vi}var Gi,pf;function Fx(){if(pf)return Gi;pf=1;var e=Tu(),t=bt(),n=rg();function r(o,a){return o&&o.length?e(o,t(a,2),n):void 0}return Gi=r,Gi}var Yi,vf;function Bx(){if(vf)return Yi;vf=1;var e=zm(),t=function(){return e.Date.now()};return Yi=t,Yi}var Xi,gf;function zx(){if(gf)return Xi;gf=1;var e=Zs(),t=Jr(),n=ph,r=kn,o=Bn();function a(i,s,u,l){if(!r(i))return i;s=t(s,i);for(var c=-1,d=s.length,f=d-1,h=i;h!=null&&++c<d;){var p=o(s[c]),v=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return i;if(c!=f){var g=h[p];v=l?l(g,p,h):void 0,v===void 0&&(v=r(g)?g:n(s[c+1])?[]:{})}e(h,p,v),h=h[p]}return i}return Xi=a,Xi}var Ki,mf;function jx(){if(mf)return Ki;mf=1;var e=eo(),t=zx(),n=Jr();function r(o,a,i){for(var s=-1,u=a.length,l={};++s<u;){var c=a[s],d=e(o,c);i(d,c)&&t(l,n(c,o),d)}return l}return Ki=r,Ki}var Zi,yf;function Hx(){if(yf)return Zi;yf=1;var e=jx(),t=Bv();function n(r,o){return e(r,o,function(a,i){return t(r,i)})}return Zi=n,Zi}var Wi,bf;function Ux(){if(bf)return Wi;bf=1;var e=ng(),t=jm,n=Hm;function r(o){return n(t(o,void 0,e),o+"")}return Wi=r,Wi}var Qi,wf;function Vx(){if(wf)return Qi;wf=1;var e=Hx(),t=Ux(),n=t(function(r,o){return r==null?{}:e(r,o)});return Qi=n,Qi}var Ji,_f;function Gx(){if(_f)return Ji;_f=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,u=t(e((o-r)/(a||1)),0),l=Array(u);u--;)l[i?u:++s]=r,r+=a;return l}return Ji=n,Ji}var es,Sf;function Yx(){if(Sf)return es;Sf=1;var e=Gx(),t=eu,n=tg();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return es=r,es}var ts,Ef;function Xx(){if(Ef)return ts;Ef=1;var e=Yx(),t=e();return ts=t,ts}var ns,xf;function Kx(){if(xf)return ns;xf=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return ns=e,ns}var rs,Cf;function Zx(){if(Cf)return rs;Cf=1;var e=ln();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||a&&u&&c||!o&&c||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!u&&i||!c)return-1}return 0}return rs=t,rs}var os,Of;function Wx(){if(Of)return os;Of=1;var e=Zx();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,u=i.length,l=o.length;++a<u;){var c=e(i[a],s[a]);if(c){if(a>=l)return c;var d=o[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return os=t,os}var as,Nf;function Qx(){if(Nf)return as;Nf=1;var e=Qr(),t=eo(),n=bt(),r=Vv(),o=Kx(),a=Ks(),i=Wx(),s=An,u=Le();function l(c,d,f){d.length?d=e(d,function(v){return u(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):d=[s];var h=-1;d=e(d,a(n));var p=r(c,function(v,g,m){var x=e(d,function(N){return N(v)});return{criteria:x,index:++h,value:v}});return o(p,function(v,g){return i(v,g,f)})}return as=l,as}var is,Mf;function Jx(){if(Mf)return is;Mf=1;var e=Nu(),t=Qx(),n=Js,r=eu,o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return is=o,is}var ss,Tf;function eC(){if(Tf)return ss;Tf=1;var e=$v(),t=0;function n(r){var o=++t;return e(r)+o}return ss=n,ss}var us,Pf;function tC(){if(Pf)return us;Pf=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var u=o<i?n[o]:void 0;r(s,t[o],u)}return s}return us=e,us}var cs,Df;function nC(){if(Df)return cs;Df=1;var e=Zs(),t=tC();function n(r,o){return t(r||[],o||[],e)}return cs=n,cs}var xr;if(typeof Ys=="function")try{xr={cloneDeep:Ex(),constant:mh(),defaults:xx(),each:Lv(),filter:jv(),find:Dx(),flatten:ng(),forEach:kv(),forIn:Ix(),has:Hv(),isUndefined:Uv(),last:Rx(),map:Gv(),mapValues:kx(),max:Ax(),merge:qx(),min:$x(),minBy:Fx(),now:Bx(),pick:Vx(),range:Xx(),reduce:Yv(),sortBy:Jx(),uniqueId:eC(),values:Kv(),zipObject:nC()}}catch{}xr||(xr=window._);var me=xr,rC=to;function to(){var e={};e._next=e._prev=e,this._sentinel=e}to.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return og(t),t};to.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&og(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};to.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,oC)),n=n._prev;return"["+e.join(", ")+"]"};function og(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function oC(e,t){if(e!=="_next"&&e!=="_prev")return t}var ft=me,aC=nt.Graph,iC=rC,sC=cC,uC=ft.constant(1);function cC(e,t){if(e.nodeCount()<=1)return[];var n=dC(e,t||uC),r=lC(n.graph,n.buckets,n.zeroIdx);return ft.flatten(ft.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function lC(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)ls(e,t,n,i);for(;i=o.dequeue();)ls(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(ls(e,t,n,i,!0));break}}}return r}function ls(e,t,n,r,o){var a=o?[]:void 0;return ft.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),u=e.node(i.v);o&&a.push({v:i.v,w:i.w}),u.out-=s,zs(t,n,u)}),ft.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),u=i.w,l=e.node(u);l.in-=s,zs(t,n,l)}),e.removeNode(r.v),a}function dC(e,t){var n=new aC,r=0,o=0;ft.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),ft.forEach(e.edges(),function(s){var u=n.edge(s.v,s.w)||0,l=t(s),c=u+l;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=l),r=Math.max(r,n.node(s.w).in+=l)});var a=ft.range(o+r+3).map(function(){return new iC}),i=r+1;return ft.forEach(n.nodes(),function(s){zs(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function zs(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ut=me,fC=sC,hC={run:pC,undo:gC};function pC(e){var t=e.graph().acyclicer==="greedy"?fC(e,n(e)):vC(e);Ut.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,Ut.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function vC(e){var t=[],n={},r={};function o(a){Ut.has(r,a)||(r[a]=!0,n[a]=!0,Ut.forEach(e.outEdges(a),function(i){Ut.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return Ut.forEach(e.nodes(),o),t}function gC(e){Ut.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=me,ag=nt.Graph,Fe={addDummyNode:ig,simplify:mC,asNonCompoundGraph:yC,successorWeights:bC,predecessorWeights:wC,intersectRect:_C,buildLayerMatrix:SC,normalizeRanks:EC,removeEmptyRanks:xC,addBorderNode:CC,maxRank:sg,partition:OC,time:NC,notime:MC};function ig(e,t,n,r){var o;do o=de.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function mC(e){var t=new ag().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function yC(e){var t=new ag({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function bC(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function wC(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function _C(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),u=s*o/a,l=s):(o<0&&(i=-i),u=i,l=i*a/o),{x:n+u,y:r+l}}function SC(e){var t=de.map(de.range(sg(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;de.isUndefined(o)||(t[o][r.order]=n)}),t}function EC(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function xC(e){var t=de.min(de.map(e.nodes(),function(a){return e.node(a).rank})),n=[];de.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;de.forEach(n,function(a,i){de.isUndefined(a)&&i%o!==0?--r:r&&de.forEach(a,function(s){e.node(s).rank+=r})})}function CC(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),ig(e,"border",o,t)}function sg(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function OC(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function NC(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function MC(e,t){return t()}var ug=me,TC=Fe,PC={run:DC,undo:RC};function DC(e){e.graph().dummyChains=[],ug.forEach(e.edges(),function(t){IC(e,t)})}function IC(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),u=s.labelRank;if(a!==r+1){e.removeEdge(t);var l,c,d;for(d=0,++r;r<a;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=TC.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},i),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,o,{weight:s.weight},i)}}function RC(e){ug.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var ir=me,no={longestPath:kC,slack:LC};function kC(e){var t={};function n(r){var o=e.node(r);if(ir.has(t,r))return o.rank;t[r]=!0;var a=ir.min(ir.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}ir.forEach(e.sources(),n)}function LC(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Cr=me,AC=nt.Graph,Or=no.slack,cg=qC;function qC(e){var t=new AC({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;$C(t,e)<r;)o=FC(t,e),a=t.hasNode(o.v)?Or(e,o):-Or(e,o),BC(t,e,a);return t}function $C(e,t){function n(r){Cr.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!Or(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Cr.forEach(e.nodes(),n),e.nodeCount()}function FC(e,t){return Cr.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Or(t,n)})}function BC(e,t,n){Cr.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var yt=me,zC=cg,jC=no.slack,HC=no.longestPath,UC=nt.alg.preorder,VC=nt.alg.postorder,GC=Fe.simplify,YC=Zt;Zt.initLowLimValues=Du;Zt.initCutValues=Pu;Zt.calcCutValue=lg;Zt.leaveEdge=fg;Zt.enterEdge=hg;Zt.exchangeEdges=pg;function Zt(e){e=GC(e),HC(e);var t=zC(e);Du(t),Pu(t,e);for(var n,r;n=fg(t);)r=hg(t,e,n),pg(t,e,n,r)}function Pu(e,t){var n=VC(e,e.nodes());n=n.slice(0,n.length-1),yt.forEach(n,function(r){XC(e,t,r)})}function XC(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=lg(e,t,n)}function lg(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,yt.forEach(t.nodeEdges(n),function(u){var l=u.v===n,c=l?u.w:u.v;if(c!==o){var d=l===a,f=t.edge(u).weight;if(s+=d?f:-f,ZC(e,n,c)){var h=e.edge(n,c).cutvalue;s+=d?-h:h}}}),s}function Du(e,t){arguments.length<2&&(t=e.nodes()[0]),dg(e,{},1,t)}function dg(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,yt.forEach(e.neighbors(r),function(s){yt.has(t,s)||(n=dg(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function fg(e){return yt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function hg(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,u=!1;a.lim>i.lim&&(s=i,u=!0);var l=yt.filter(t.edges(),function(c){return u===If(e,e.node(c.v),s)&&u!==If(e,e.node(c.w),s)});return yt.minBy(l,function(c){return jC(t,c)})}function pg(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),Du(e),Pu(e,t),KC(e,t)}function KC(e,t){var n=yt.find(e.nodes(),function(o){return!t.node(o).parent}),r=UC(e,n);r=r.slice(1),yt.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function ZC(e,t,n){return e.hasEdge(t,n)}function If(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var WC=no,vg=WC.longestPath,QC=cg,JC=YC,eO=tO;function tO(e){switch(e.graph().ranker){case"network-simplex":Rf(e);break;case"tight-tree":rO(e);break;case"longest-path":nO(e);break;default:Rf(e)}}var nO=vg;function rO(e){vg(e),QC(e)}function Rf(e){JC(e)}var js=me,oO=aO;function aO(e){var t=sO(e);js.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=iO(e,t,o.v,o.w),i=a.path,s=a.lca,u=0,l=i[u],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(l=i[u])!==s&&e.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<i.length-1&&e.node(l=i[u+1]).minRank<=r.rank;)u++;l=i[u]}e.setParent(n,l),n=e.successors(n)[0]}})}function iO(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),u,l;u=n;do u=e.parent(u),o.push(u);while(u&&(t[u].low>i||s>t[u].lim));for(l=u,u=r;(u=e.parent(u))!==l;)a.push(u);return{path:o.concat(a.reverse()),lca:l}}function sO(e){var t={},n=0;function r(o){var a=n;js.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return js.forEach(e.children(),r),t}var ht=me,Hs=Fe,uO={run:cO,cleanup:fO};function cO(e){var t=Hs.addDummyNode(e,"root",{},"_root"),n=lO(e),r=ht.max(ht.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,ht.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=dO(e)+1;ht.forEach(e.children(),function(i){gg(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function gg(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var u=Hs.addBorderNode(e,"_bt"),l=Hs.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(u,i),c.borderTop=u,e.setParent(l,i),c.borderBottom=l,ht.forEach(s,function(d){gg(e,t,n,r,o,a,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,p=f.borderBottom?f.borderBottom:d,v=f.borderTop?r:2*r,g=h!==p?1:o-a[i]+1;e.setEdge(u,h,{weight:v,minlen:g,nestingEdge:!0}),e.setEdge(p,l,{weight:v,minlen:g,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,u,{weight:0,minlen:o+a[i]})}function lO(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&ht.forEach(a,function(i){n(i,o+1)}),t[r]=o}return ht.forEach(e.children(),function(r){n(r,1)}),t}function dO(e){return ht.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function fO(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,ht.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var ds=me,hO=Fe,pO=vO;function vO(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&ds.forEach(r,t),ds.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)kf(e,"borderLeft","_bl",n,o,a),kf(e,"borderRight","_br",n,o,a)}}ds.forEach(e.children(),t)}function kf(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],u=hO.addDummyNode(e,"border",i,n);o[t][a]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var ot=me,gO={adjust:mO,undo:yO};function mO(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&mg(e)}function yO(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&bO(e),(t==="lr"||t==="rl")&&(wO(e),mg(e))}function mg(e){ot.forEach(e.nodes(),function(t){Lf(e.node(t))}),ot.forEach(e.edges(),function(t){Lf(e.edge(t))})}function Lf(e){var t=e.width;e.width=e.height,e.height=t}function bO(e){ot.forEach(e.nodes(),function(t){fs(e.node(t))}),ot.forEach(e.edges(),function(t){var n=e.edge(t);ot.forEach(n.points,fs),ot.has(n,"y")&&fs(n)})}function fs(e){e.y=-e.y}function wO(e){ot.forEach(e.nodes(),function(t){hs(e.node(t))}),ot.forEach(e.edges(),function(t){var n=e.edge(t);ot.forEach(n.points,hs),ot.has(n,"x")&&hs(n)})}function hs(e){var t=e.x;e.x=e.y,e.y=t}var dt=me,_O=SO;function SO(e){var t={},n=dt.filter(e.nodes(),function(s){return!e.children(s).length}),r=dt.max(dt.map(n,function(s){return e.node(s).rank})),o=dt.map(dt.range(r+1),function(){return[]});function a(s){if(!dt.has(t,s)){t[s]=!0;var u=e.node(s);o[u.rank].push(s),dt.forEach(e.successors(s),a)}}var i=dt.sortBy(n,function(s){return e.node(s).rank});return dt.forEach(i,a),o}var xt=me,EO=xO;function xO(e,t){for(var n=0,r=1;r<t.length;++r)n+=CO(e,t[r-1],t[r]);return n}function CO(e,t,n){for(var r=xt.zipObject(n,xt.map(n,function(l,c){return c})),o=xt.flatten(xt.map(t,function(l){return xt.sortBy(xt.map(e.outEdges(l),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=xt.map(new Array(i),function(){return 0}),u=0;return xt.forEach(o.forEach(function(l){var c=l.pos+a;s[c]+=l.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*d})),u}var Af=me,OO=NO;function NO(e,t){return Af.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=Af.reduce(r,function(a,i){var s=e.edge(i),u=e.node(i.v);return{sum:a.sum+s.weight*u.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var Ue=me,MO=TO;function TO(e,t){var n={};Ue.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};Ue.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),Ue.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!Ue.isUndefined(a)&&!Ue.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=Ue.filter(n,function(o){return!o.indegree});return PO(r)}function PO(e){var t=[];function n(a){return function(i){i.merged||(Ue.isUndefined(i.barycenter)||Ue.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&DO(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),Ue.forEach(o.in.reverse(),n(o)),Ue.forEach(o.out,r(o))}return Ue.map(Ue.filter(t,function(a){return!a.merged}),function(a){return Ue.pick(a,["vs","i","barycenter","weight"])})}function DO(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var bn=me,IO=Fe,RO=kO;function kO(e,t){var n=IO.partition(e,function(c){return bn.has(c,"barycenter")}),r=n.lhs,o=bn.sortBy(n.rhs,function(c){return-c.i}),a=[],i=0,s=0,u=0;r.sort(LO(!!t)),u=qf(a,o,u),bn.forEach(r,function(c){u+=c.vs.length,a.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,u=qf(a,o,u)});var l={vs:bn.flatten(a,!0)};return s&&(l.barycenter=i/s,l.weight=s),l}function qf(e,t,n){for(var r;t.length&&(r=bn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function LO(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Tt=me,AO=OO,qO=MO,$O=RO,FO=yg;function yg(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,u={};i&&(o=Tt.filter(o,function(p){return p!==i&&p!==s}));var l=AO(e,o);Tt.forEach(l,function(p){if(e.children(p.v).length){var v=yg(e,p.v,n,r);u[p.v]=v,Tt.has(v,"barycenter")&&zO(p,v)}});var c=qO(l,n);BO(c,u);var d=$O(c,r);if(i&&(d.vs=Tt.flatten([i,d.vs,s],!0),e.predecessors(i).length)){var f=e.node(e.predecessors(i)[0]),h=e.node(e.predecessors(s)[0]);Tt.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function BO(e,t){Tt.forEach(e,function(n){n.vs=Tt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function zO(e,t){Tt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var wn=me,jO=nt.Graph,HO=UO;function UO(e,t,n){var r=VO(e),o=new jO({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return wn.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),wn.forEach(e[n](a),function(u){var l=u.v===a?u.w:u.v,c=o.edge(l,a),d=wn.isUndefined(c)?0:c.weight;o.setEdge(l,a,{weight:e.edge(u).weight+d})}),wn.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function VO(e){for(var t;e.hasNode(t=wn.uniqueId("_root")););return t}var GO=me,YO=XO;function XO(e,t,n){var r={},o;GO.forEach(n,function(a){for(var i=e.parent(a),s,u;i;){if(s=e.parent(i),s?(u=r[s],r[s]=i):(u=o,o=i),u&&u!==i){t.setEdge(u,i);return}i=s}})}var It=me,KO=_O,ZO=EO,WO=FO,QO=HO,JO=YO,eN=nt.Graph,$f=Fe,tN=nN;function nN(e){var t=$f.maxRank(e),n=Ff(e,It.range(1,t+1),"inEdges"),r=Ff(e,It.range(t-1,-1,-1),"outEdges"),o=KO(e);Bf(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,u=0;u<4;++s,++u){rN(s%2?n:r,s%4>=2),o=$f.buildLayerMatrix(e);var l=ZO(e,o);l<a&&(u=0,i=It.cloneDeep(o),a=l)}Bf(e,i)}function Ff(e,t,n){return It.map(t,function(r){return QO(e,r,n)})}function rN(e,t){var n=new eN;It.forEach(e,function(r){var o=r.graph().root,a=WO(r,o,n,t);It.forEach(a.vs,function(i,s){r.node(i).order=s}),JO(r,n,a.vs)})}function Bf(e,t){It.forEach(t,function(n){It.forEach(n,function(r,o){e.node(r).order=o})})}var te=me,oN=nt.Graph,aN=Fe,iN={positionX:cN,findType1Conflicts:bg,findType2Conflicts:wg,addConflict:Iu,hasConflict:_g,verticalAlignment:Sg,horizontalCompaction:Eg,alignCoordinates:Cg,findSmallestWidthAlignment:xg,balance:Og};function bg(e,t){var n={};function r(o,a){var i=0,s=0,u=o.length,l=te.last(a);return te.forEach(a,function(c,d){var f=sN(e,c),h=f?e.node(f).order:u;(f||c===l)&&(te.forEach(a.slice(s,d+1),function(p){te.forEach(e.predecessors(p),function(v){var g=e.node(v),m=g.order;(m<i||h<m)&&!(g.dummy&&e.node(p).dummy)&&Iu(n,v,p)})}),s=d+1,i=h)}),a}return te.reduce(t,r),n}function wg(e,t){var n={};function r(a,i,s,u,l){var c;te.forEach(te.range(i,s),function(d){c=a[d],e.node(c).dummy&&te.forEach(e.predecessors(c),function(f){var h=e.node(f);h.dummy&&(h.order<u||h.order>l)&&Iu(n,f,c)})})}function o(a,i){var s=-1,u,l=0;return te.forEach(i,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(u=e.node(f[0]).order,r(i,l,d,s,u),l=d,s=u)}r(i,l,i.length,u,a.length)}),i}return te.reduce(t,o),n}function sN(e,t){if(e.node(t).dummy)return te.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Iu(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function _g(e,t,n){if(t>n){var r=t;t=n,n=r}return te.has(e[t],n)}function Sg(e,t,n,r){var o={},a={},i={};return te.forEach(t,function(s){te.forEach(s,function(u,l){o[u]=u,a[u]=u,i[u]=l})}),te.forEach(t,function(s){var u=-1;te.forEach(s,function(l){var c=r(l);if(c.length){c=te.sortBy(c,function(v){return i[v]});for(var d=(c.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var p=c[f];a[l]===l&&u<i[p]&&!_g(n,l,p)&&(a[p]=l,a[l]=o[l]=o[p],u=i[p])}}})}),{root:o,align:a}}function Eg(e,t,n,r,o){var a={},i=uN(e,t,n,o),s=o?"borderLeft":"borderRight";function u(d,f){for(var h=i.nodes(),p=h.pop(),v={};p;)v[p]?d(p):(v[p]=!0,h.push(p),h=h.concat(f(p))),p=h.pop()}function l(d){a[d]=i.inEdges(d).reduce(function(f,h){return Math.max(f,a[h.v]+i.edge(h))},0)}function c(d){var f=i.outEdges(d).reduce(function(p,v){return Math.min(p,a[v.w]-i.edge(v))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(a[d]=Math.max(a[d],f))}return u(l,i.predecessors.bind(i)),u(c,i.successors.bind(i)),te.forEach(r,function(d){a[d]=a[n[d]]}),a}function uN(e,t,n,r){var o=new oN,a=e.graph(),i=lN(a.nodesep,a.edgesep,r);return te.forEach(t,function(s){var u;te.forEach(s,function(l){var c=n[l];if(o.setNode(c),u){var d=n[u],f=o.edge(d,c);o.setEdge(d,c,Math.max(i(e,l,u),f||0))}u=l})}),o}function xg(e,t){return te.minBy(te.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return te.forIn(n,function(a,i){var s=dN(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function Cg(e,t){var n=te.values(t),r=te.min(n),o=te.max(n);te.forEach(["u","d"],function(a){te.forEach(["l","r"],function(i){var s=a+i,u=e[s],l;if(u!==t){var c=te.values(u);l=i==="l"?r-te.min(c):o-te.max(c),l&&(e[s]=te.mapValues(u,function(d){return d+l}))}})})}function Og(e,t){return te.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=te.sortBy(te.map(e,r));return(o[1]+o[2])/2})}function cN(e){var t=aN.buildLayerMatrix(e),n=te.merge(bg(e,t),wg(e,t)),r={},o;te.forEach(["u","d"],function(i){o=i==="u"?t:te.values(t).reverse(),te.forEach(["l","r"],function(s){s==="r"&&(o=te.map(o,function(d){return te.values(d).reverse()}));var u=(i==="u"?e.predecessors:e.successors).bind(e),l=Sg(e,o,n,u),c=Eg(e,o,l.root,l.align,s==="r");s==="r"&&(c=te.mapValues(c,function(d){return-d})),r[i+s]=c})});var a=xg(e,r);return Cg(r,a),Og(r,e.graph().align)}function lN(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),u=0,l;if(u+=i.width/2,te.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":l=-i.width/2;break;case"r":l=i.width/2;break}if(l&&(u+=n?l:-l),l=0,u+=(i.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,te.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=n?l:-l),l=0,u}}function dN(e,t){return e.node(t).width}var _n=me,Ng=Fe,fN=iN.positionX,hN=pN;function pN(e){e=Ng.asNonCompoundGraph(e),vN(e),_n.forEach(fN(e),function(t,n){e.node(n).x=t})}function vN(e){var t=Ng.buildLayerMatrix(e),n=e.graph().ranksep,r=0;_n.forEach(t,function(o){var a=_n.max(_n.map(o,function(i){return e.node(i).height}));_n.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var ae=me,zf=hC,jf=PC,gN=eO,mN=Fe.normalizeRanks,yN=oO,bN=Fe.removeEmptyRanks,Hf=uO,wN=pO,Uf=gO,_N=tN,SN=hN,Lt=Fe,EN=nt.Graph,xN=CN;function CN(e,t){var n=t&&t.debugTiming?Lt.time:Lt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return AN(e)});n("  runLayout",function(){ON(r,n)}),n("  updateInputGraph",function(){NN(e,r)})})}function ON(e,t){t("    makeSpaceForEdgeLabels",function(){qN(e)}),t("    removeSelfEdges",function(){GN(e)}),t("    acyclic",function(){zf.run(e)}),t("    nestingGraph.run",function(){Hf.run(e)}),t("    rank",function(){gN(Lt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){$N(e)}),t("    removeEmptyRanks",function(){bN(e)}),t("    nestingGraph.cleanup",function(){Hf.cleanup(e)}),t("    normalizeRanks",function(){mN(e)}),t("    assignRankMinMax",function(){FN(e)}),t("    removeEdgeLabelProxies",function(){BN(e)}),t("    normalize.run",function(){jf.run(e)}),t("    parentDummyChains",function(){yN(e)}),t("    addBorderSegments",function(){wN(e)}),t("    order",function(){_N(e)}),t("    insertSelfEdges",function(){YN(e)}),t("    adjustCoordinateSystem",function(){Uf.adjust(e)}),t("    position",function(){SN(e)}),t("    positionSelfEdges",function(){XN(e)}),t("    removeBorderNodes",function(){VN(e)}),t("    normalize.undo",function(){jf.undo(e)}),t("    fixupEdgeLabelCoords",function(){HN(e)}),t("    undoCoordinateSystem",function(){Uf.undo(e)}),t("    translateGraph",function(){zN(e)}),t("    assignNodeIntersects",function(){jN(e)}),t("    reversePoints",function(){UN(e)}),t("    acyclic.undo",function(){zf.undo(e)})}function NN(e,t){ae.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),ae.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,ae.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var MN=["nodesep","edgesep","ranksep","marginx","marginy"],TN={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},PN=["acyclicer","ranker","rankdir","align"],DN=["width","height"],IN={width:0,height:0},RN=["minlen","weight","width","height","labeloffset"],kN={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},LN=["labelpos"];function AN(e){var t=new EN({multigraph:!0,compound:!0}),n=vs(e.graph());return t.setGraph(ae.merge({},TN,ps(n,MN),ae.pick(n,PN))),ae.forEach(e.nodes(),function(r){var o=vs(e.node(r));t.setNode(r,ae.defaults(ps(o,DN),IN)),t.setParent(r,e.parent(r))}),ae.forEach(e.edges(),function(r){var o=vs(e.edge(r));t.setEdge(r,ae.merge({},kN,ps(o,RN),ae.pick(o,LN)))}),t}function qN(e){var t=e.graph();t.ranksep/=2,ae.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function $N(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Lt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function FN(e){var t=0;ae.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ae.max(t,r.maxRank))}),e.graph().maxRank=t}function BN(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function zN(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function u(l){var c=l.x,d=l.y,f=l.width,h=l.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-h/2),o=Math.max(o,d+h/2)}ae.forEach(e.nodes(),function(l){u(e.node(l))}),ae.forEach(e.edges(),function(l){var c=e.edge(l);ae.has(c,"x")&&u(c)}),t-=i,r-=s,ae.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=t,c.y-=r}),ae.forEach(e.edges(),function(l){var c=e.edge(l);ae.forEach(c.points,function(d){d.x-=t,d.y-=r}),ae.has(c,"x")&&(c.x-=t),ae.has(c,"y")&&(c.y-=r)}),a.width=n-t+i,a.height=o-r+s}function jN(e){ae.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Lt.intersectRect(r,a)),n.points.push(Lt.intersectRect(o,i))})}function HN(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(ae.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function UN(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function VN(e){ae.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(ae.last(n.borderLeft)),i=e.node(ae.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),ae.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function GN(e){ae.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function YN(e){var t=Lt.buildLayerMatrix(e);ae.forEach(t,function(n){var r=0;ae.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,ae.forEach(i.selfEdges,function(s){Lt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function XN(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function ps(e,t){return ae.mapValues(ae.pick(e,t),Number)}function vs(e){var t={};return ae.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var sr=me,KN=Fe,ZN=nt.Graph,WN={debugOrdering:QN};function QN(e){var t=KN.buildLayerMatrix(e),n=new ZN({compound:!0,multigraph:!0}).setGraph({});return sr.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),sr.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),sr.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),sr.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var JN="0.8.5",Mg={graphlib:nt,layout:xN,debug:WN,util:{time:Fe.time,notime:Fe.notime},version:JN};const Wt=new Mg.graphlib.Graph;Wt.setDefaultEdgeLabel(()=>({}));const Vf=130,Gf=28,eM=(e,t="LR")=>{const n=t==="LR";return Wt.setGraph({rankdir:t}),e.forEach(r=>{Rt(r)?Wt.setNode(r.id,{width:Vf,height:Gf}):Wt.setEdge(r.source,r.target)}),Mg.layout(Wt),e.map(r=>{if(Rt(r)){const o=Wt.node(r.id);r.targetPosition=n?Z.Left:Z.Top,r.sourcePosition=n?Z.Right:Z.Bottom,r.position={x:o.x-Vf/2+Math.random()/1e3,y:o.y-Gf/2}}return r})};const Gt=(e,t)=>({id:`edge-${e}-to-${t}`,type:"buttonEdge",source:e,target:t,data:{onEdgeClick:(n,r)=>{n.stopPropagation(),alert(`hello ${r}`)}}}),Tg=e=>{let t;return e.executionList&&(t="startSubFlow"),Us(e)&&(t="conditional"),{id:e.id,type:t,sourcePosition:Z.Right,targetPosition:Z.Left,data:{label:e.displayName},position:{x:0,y:0}}},tM=(e,t,n)=>{const r=[];return r.push(Tg(t)),r.push(Gt(e.id,t.id)),r.push(Gt(t.id,n.id)),r},nM=(e,t,n,r,o,a)=>{const i=[];return i.push(Tg(t)),o?i.push(Gt(e.id,t.id)):i.push(Gt(r.id,t.id)),a&&i.push(Gt(t.id,n.id)),i},rM=(e,t,n,r)=>{const o=[];o.push({id:e.id,type:"startSubFlow",sourcePosition:Z.Right,targetPosition:Z.Left,data:{label:e.displayName},position:{x:0,y:0}});const a=`flow-end-${e.id}`;return o.push({id:a,type:"endSubFlow",sourcePosition:Z.Right,targetPosition:Z.Left,data:{label:e.displayName},position:{x:0,y:0}}),o.push(Gt(r&&r.requirement!=="ALTERNATIVE"?r.id:t.id,e.id)),o.push(Gt(a,n.id)),o.concat(Pg(e,e.executionList||[],{...e,id:a}))},Pg=(e,t,n)=>{let r=[];for(let o=0;o<t.length;o++){const a=t[o];a.executionList?r=r.concat(rM(a,e,n,t[o-1])):a.requirement==="ALTERNATIVE"||a.requirement==="DISABLED"?r=r.concat(tM(e,a,n)):r=r.concat(nM(e,a,n,t[o-1],o===0,o===t.length-1))}return r},oM=({executionList:{expandableList:e}})=>{let t=[{id:"start",sourcePosition:Z.Right,type:"input",data:{label:"Start"},position:{x:0,y:0},className:"keycloak__authentication__input_node"},{id:"end",targetPosition:Z.Left,type:"output",data:{label:"End"},position:{x:0,y:0},className:"keycloak__authentication__output_node"}];t=t.concat(Pg({id:"start"},e,{id:"end"}));const n=l=>l.fitView(),[r,o]=y.exports.useState(eM(t)),[a,i]=y.exports.useState(!1);return b(Yg,{isExpanded:a,onExpand:()=>i(!0),children:b(Xg,{panelContent:b(Kg,{children:se(Um,{children:[b("span",{tabIndex:a?0:-1,children:"drawer-panel"}),b(bh,{children:b(wh,{onClick:()=>i(!1)})})]})}),children:b(Zg,{children:se(Cv,{nodeTypes:{conditional:d1,startSubFlow:u1,endSubFlow:c1},edgeTypes:{buttonEdge:f1},onElementClick:(l,c)=>{Rt(c)&&i(!a)},onElementsRemove:l=>o(c=>Nb(l,c)),onLoad:n,elements:r,nodesConnectable:!1,children:[b(XE,{}),b(n1,{}),b(i1,{})]})})})})},aM=({flow:e,toggleDialog:t})=>{const{t:n}=et("authentication"),r=Mr({shouldUnregister:!1}),{reset:o,handleSubmit:a}=r,{adminClient:i}=cn(),{addAlert:s,addError:u}=Gs();y.exports.useEffect(()=>{o(e)},[e,o]);const l=async c=>{try{await i.authenticationManagement.updateFlow({flowId:e.id},{...e,...c}),s(n("updateFlowSuccess"),Ot.success)}catch(d){u("authentication:updateFlowError",d)}t()};return b(Pn,{title:n("editFlow"),isOpen:!0,onClose:t,variant:Dn.small,actions:[b(Ce,{id:"modal-confirm",onClick:a(l),"data-testid":"confirm",children:n("edit")},"confirm"),b(Ce,{"data-testid":"cancel",id:"modal-cancel",variant:vt.link,onClick:()=>{t()},children:n("common:cancel")},"cancel")],children:b(ah,{...r,children:b(In,{isHorizontal:!0,children:b(Ym,{})})})})},Us=e=>e.displayName?.startsWith("Condition ");function lT(){const{t:e}=et("authentication"),{adminClient:t}=cn(),{realm:n}=Wg(),{addAlert:r,addError:o}=Gs(),{id:a,usedBy:i,builtIn:s}=Qg(),u=Jg(),[l,c]=y.exports.useState(0),d=()=>c(new Date().getTime()),[f,h]=y.exports.useState(!0),[p,v]=y.exports.useState(),[g,m]=y.exports.useState(),[x,N]=y.exports.useState(),[M,C]=y.exports.useState(""),[q,L]=y.exports.useState(),[B,F]=y.exports.useState(),[A,K]=y.exports.useState(),[G,oe,_]=bs(),[R,O]=y.exports.useState(!1),[T,j]=bs();Mn(async()=>{const H=(await t.authenticationManagement.getFlows()).find(ue=>ue.id===a);if(!H)throw new Error(e("common:notFound"));const ie=await t.authenticationManagement.getExecutions({flow:H.alias});return{flow:H,executions:ie}},({flow:k,executions:H})=>{v(k),m(new ru(H))},[l]);const U=async(k,H)=>{try{let ie=k.id;"parent"in H&&(await t.authenticationManagement.delExecution({id:ie}),ie=(await t.authenticationManagement.addExecutionToFlow({flow:H.parent?.displayName||p?.alias,provider:k.providerId})).id);const ue=H.newIndex-H.oldIndex;for(let pe=0;pe<Math.abs(ue);pe++)ue>0?await t.authenticationManagement.lowerPriorityExecution({id:ie}):await t.authenticationManagement.raisePriorityExecution({id:ie});d(),r(e("updateFlowSuccess"),Ot.success)}catch(ie){o("authentication:updateFlowError",ie)}},V=async k=>{const{executionList:H,isCollapsed:ie,...ue}=k;try{await t.authenticationManagement.updateExecution({flow:p?.alias},ue),d(),r(e("updateFlowSuccess"),Ot.success)}catch(pe){o("authentication:updateFlowError",pe)}},Y=async(k,H)=>{try{await t.authenticationManagement.addExecutionToFlow({flow:k,provider:H.id}),d(),r(e("updateFlowSuccess"),Ot.success)}catch(ie){o("authentication:updateFlowError",ie)}},E=async(k,{name:H,description:ie="",type:ue,provider:pe})=>{try{await t.authenticationManagement.addFlowToFlow({flow:k,alias:H,description:ie,provider:pe,type:ue}),d(),r(e("updateFlowSuccess"),Ot.success)}catch(ve){o("authentication:updateFlowError",ve)}},[w,S]=$u({titleKey:"authentication:deleteConfirmExecution",children:se(Fu,{i18nKey:"authentication:deleteConfirmExecutionMessage",children:[" ",b("strong",{children:{name:A?.displayName}}),"."]}),continueButtonLabel:"common:delete",continueButtonVariant:vt.danger,onConfirm:async()=>{try{await t.authenticationManagement.delExecution({id:A?.id}),r(e("deleteExecutionSuccess"),Ot.success),d()}catch(k){o("authentication:deleteExecutionError",k)}}}),[P,I]=$u({titleKey:"authentication:deleteConfirmFlow",children:se(Fu,{i18nKey:"authentication:deleteConfirmFlowMessage",children:[" ",b("strong",{children:{flow:p?.alias||""}}),"."]}),continueButtonLabel:"common:delete",continueButtonVariant:vt.danger,onConfirm:async()=>{try{await t.authenticationManagement.deleteFlow({flowId:p.id}),u(em({realm:n})),r(e("deleteFlowSuccess"),Ot.success)}catch(k){o("authentication:deleteFlowError",k)}}}),z=g?.expandableList.length!==0,X=[...i!=="DEFAULT"?[b(Ft,{"data-testid":"set-as-default",onClick:j,children:e("bindFlow")},"default")]:[],b(Ft,{onClick:()=>_(!0),children:e("duplicate")},"duplicate"),...s?[]:[b(Ft,{"data-testid":"edit-flow",onClick:()=>O(!0),children:e("editInfo")},"edit"),b(Ft,{"data-testid":"delete-flow",onClick:()=>P(),children:e("common:delete")},"delete")]];return se(ke,{children:[T&&b(Vm,{flowAlias:p?.alias,onClose:()=>{j(),d()}}),G&&b(Gm,{name:p?.alias,description:p?.description,toggleDialog:oe,onComplete:()=>{d(),_(!1)}}),R&&b(aM,{flow:p,toggleDialog:()=>{O(!R),d()}}),b(I,{}),b(nm,{titleKey:p?.alias||"",badges:[{text:b(Au,{children:e(`used.${i}`)})},s?{text:b(Au,{className:"keycloak_authentication-section__usedby_label",icon:b(tm,{}),children:e("buildIn")}),id:"builtIn"}:{}],dropdownItems:X}),se(Xf,{variant:"light",children:[g&&z&&se(ke,{children:[b(wm,{id:"toolbar",children:se(_m,{children:[b(lo,{children:se(_h,{children:[b(vr,{icon:b(ey,{}),"aria-label":e("tableView"),buttonId:"tableView",isSelected:f,onChange:()=>h(!0)}),b(vr,{icon:b(Qm,{}),"aria-label":e("diagramView"),buttonId:"diagramView",isSelected:!f,onChange:()=>h(!1)})]})}),b(lo,{children:b(Ce,{"data-testid":"addStep",variant:"secondary",onClick:()=>L(!0),children:e("addStep")})}),b(lo,{children:b(Ce,{"data-testid":"addSubFlow",variant:"secondary",onClick:()=>F(!0),children:e("addSubFlow")})})]})}),b(S,{}),f&&se(vm,{"aria-label":e("flows"),onDragFinish:k=>{const H=k.slice(1);C(e("common:onDragFinish",{list:x?.displayName}));const ie=g.getChange(x,H);U(x,ie)},onDragStart:k=>{const H=g.findExecution(k);C(e("common:onDragStart",{item:H.displayName})),N(H),H.isCollapsed||(H.isCollapsed=!0,m(g.clone()))},onDragMove:()=>C(e("common:onDragMove",{item:x?.displayName})),onDragCancel:()=>C(e("common:onDragCancel")),itemOrder:["header",...g.order().map(k=>k.id)],children:[b(ry,{}),b(ke,{children:g.expandableList.map(k=>b(Sh,{builtIn:!!s,execution:k,onRowClick:H=>{H.isCollapsed=!H.isCollapsed,m(g.clone())},onRowChange:V,onAddExecution:(H,ie)=>Y(H.displayName,ie),onAddFlow:(H,ie)=>E(H.displayName,ie),onDelete:H=>{K(H),w()}},k.id))})]}),p&&se(ke,{children:[q&&b(tu,{name:p.alias,type:p.providerId==="client-flow"?"client":"basic",onSelect:k=>{k&&Y(p.alias,k),L(!1)}}),B&&b(nu,{name:p.alias,onCancel:()=>F(!1),onConfirm:k=>{E(p.alias,k),F(!1)}})]}),b("div",{className:"pf-screen-reader","aria-live":"assertive",children:M})]}),!f&&g?.expandableList&&b(oM,{executionList:g}),!g?.expandableList||p&&!z&&b(ny,{flow:p,onAddExecution:k=>Y(p.alias,k),onAddFlow:k=>E(p.alias,k)})]})]})}export{lT as default,Us as providerConditionFilter};
