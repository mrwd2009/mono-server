import{u as k,h as r,j as e,bR as C,aY as A,ay as S,l as V,az as F,aw as N,r as w,F as D,bO as p,P as H,s as b,b4 as L}from"./index.0cb2e516.js";import{u as M,C as f}from"./index.esm.6af887f8.js";import{b as j,F as O}from"./FormAccess.bee4f1e0.js";import{V as P}from"./ViewHeader.2586557f.js";import{H as h}from"./HelpItem.e440d5db.js";import{T as R}from"./TimeSelector.1a65a2e3.js";import{M as z,a as E}from"./Modal.6593dfcc.js";import{F as G,a as l,A as K}from"./FormGroup.3d5f3f16.js";import{N as B}from"./NumberInput.331c7b85.js";import"./copy-icon.cf10e1f5.js";import"./GridItem.0db472b0.js";import"./Text.c38ffb52.js";import"./Select.5a6b39aa.js";import"./check.51c67984.js";import"./star-icon.97692015.js";import"./plus-icon.407671b4.js";const Y=({token:t,toggleDialog:o})=>{const{t:n}=k("clients");return r(z,{title:n("initialAccessTokenDetails"),isOpen:!0,onClose:o,variant:E.medium,children:[e(C,{title:n("copyInitialAccessToken"),isInline:!0,variant:A.warning}),e(G,{className:"pf-u-mt-md",children:e(l,{label:n("initialAccessToken"),fieldId:"initialAccessToken",children:e(j,{id:"initialAccessToken",isReadOnly:!0,children:t})})})]})};function le(){const{t}=k("clients"),{handleSubmit:o,control:n,formState:{isValid:v,errors:c}}=M({mode:"onChange"}),{adminClient:x}=S(),{realm:s}=V(),{addAlert:T,addError:I}=F(),g=N(),[d,m]=w.exports.useState("");return r(D,{children:[d&&e(Y,{token:d,toggleDialog:()=>{m(""),T(t("tokenSaveSuccess"),A.success),g(p({realm:s,tab:"initial-access-token"}))}}),e(P,{titleKey:"clients:createToken",subKey:"clients-help:createToken"}),e(H,{variant:"light",children:r(O,{isHorizontal:!0,role:"create-client",onSubmit:o(async a=>{try{const i=await x.realms.createClientsInitialAccess({realm:s},a);m(i.token)}catch(i){I("clients:tokenSaveError",i)}}),children:[e(l,{label:t("expiration"),fieldId:"expiration",labelIcon:e(h,{helpText:"clients-help:expiration",fieldLabelId:"clients:expiration"}),helperTextInvalid:t("expirationValueNotValid"),validated:c.expiration?"error":"default",children:e(f,{name:"expiration",defaultValue:86400,control:n,rules:{min:1},render:({onChange:a,value:i})=>e(R,{"data-testid":"expiration",value:i,onChange:a,min:1,validated:c.expiration?"error":"default"})})}),e(l,{label:t("count"),fieldId:"count",labelIcon:e(h,{helpText:"clients-help:count",fieldLabelId:"clients:count"}),children:e(f,{name:"count",defaultValue:1,control:n,render:({onChange:a,value:i})=>e(B,{"data-testid":"count",inputName:"count",inputAriaLabel:t("count"),min:1,value:i,onPlus:()=>a(i+1),onMinus:()=>a(i-1),onChange:y=>{const u=Number(y.target.value);a(u<1?1:u)}})})}),r(K,{children:[e(b,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!v,children:t("common:save")}),e(b,{"data-testid":"cancel",variant:"link",component:a=>e(L,{...a,to:p({realm:s,tab:"initial-access-token"})}),children:t("common:cancel")})]})]})})]})}export{le as default};
