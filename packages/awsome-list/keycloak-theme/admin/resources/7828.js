"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7828],{3063:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Qe});var l=a(5863),n=a(3172),r=a(8798),i=a(2954),s=a(1576),o=a(3802),c=a(710),m=a(9766),d=a(7482),u=a(764),p=a(5914),P=a(1677),g=a(4326),E=a(8336),f=a(4839),Z=a(386),b=a(5669),h=a(1786),v=a(4687);const y=({callback:e})=>{const{t}=(0,o.$G)("groups"),{adminClient:a}=(0,r.K3)(),{whoAmI:n}=(0,v.kA)(),{register:i,handleSubmit:m,watch:d,formState:{errors:u}}=(0,s.cI)({defaultValues:{email:""}}),p=d("email",""),P=()=>e(!1);return l.ZP.createElement(c.u_,{variant:c.vE.small,title:t("realm-settings:provideEmailTitle"),isOpen:!0,onClose:P,actions:[l.ZP.createElement(c.zx,{"data-testid":"modal-test-connection-button",key:"confirm",variant:"primary",type:"submit",form:"email-form",isDisabled:!p},t("common:testConnection")),l.ZP.createElement(c.zx,{id:"modal-cancel","data-testid":"cancel",key:"cancel",variant:c.Wu.link,onClick:P},t("common:cancel"))]},l.ZP.createElement(c.wu,{className:"kc-provide-email-text"},t("realm-settings:provideEmail")),l.ZP.createElement(c.l0,{id:"email-form",isHorizontal:!0,onSubmit:m((async t=>{await a.users.update({id:n.getUserId()},t),e(!0)}))},l.ZP.createElement(c.cw,{className:"kc-email-form-group",name:"add-email-address",fieldId:"email-id",helperTextInvalid:t("users:emailInvalid"),validated:u.email?c.LD.error:c.LD.default,isRequired:!0},l.ZP.createElement(h.F,{"data-testid":"email-address-input",ref:i({required:!0,pattern:E.E9}),autoFocus:!0,type:"text",id:"add-email",name:"email",validated:u.email?c.LD.error:c.LD.default}))))},k=({realm:e})=>{const{t}=(0,o.$G)("realm-settings"),{adminClient:a}=(0,r.K3)(),{realm:n}=(0,u.PL)(),{addAlert:i,addError:m}=(0,g.Z7)(),{whoAmI:d}=(0,v.kA)(),[p,P]=(0,l.eJ)(e),[k,C]=(0,l.eJ)(),{register:T,control:S,handleSubmit:I,watch:x,reset:w,getValues:L,formState:{errors:N}}=(0,s.cI)({defaultValues:p}),K=x("smtpServer.from",""),A=x("smtpServer.host",""),M=(0,s.qo)({control:S,name:"smtpServer.auth",defaultValue:""}),O=async e=>{try{if(!await B())return;const l={...p,...e};await a.realms.update({realm:n},l),P(l),i(t("saveSuccess"),c.Ux.success)}catch(e){m("realm-settings:saveError",e)}},B=async()=>{const e=await a.users.findOne({id:d.getUserId()});if(!e)throw new Error("Unable to find user.");return!!e.email||new Promise((e=>{const t=t=>{C(void 0),e(t)};C((()=>t))}))};return l.ZP.createElement(l.ZP.Fragment,null,k&&l.ZP.createElement(y,{callback:k}),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(b.b,{title:t("template"),className:"kc-email-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:I(O)},l.ZP.createElement(c.cw,{label:t("from"),fieldId:"kc-display-name",isRequired:!0,validated:N.smtpServer?.from?"error":"default",helperTextInvalid:t("users:emailInvalid")},l.ZP.createElement(h.F,{type:"email",id:"kc-sender-email-address","data-testid":"sender-email-address",name:"smtpServer.from",ref:T({pattern:E.E9,required:!0}),placeholder:"Sender email address",validated:N.smtpServer?.from?"error":"default"})),l.ZP.createElement(c.cw,{label:t("fromDisplayName"),fieldId:"kc-from-display-name",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:fromDisplayName",fieldLabelId:"realm-settings:authentication"})},l.ZP.createElement(h.F,{type:"text",id:"kc-from-display-name","data-testid":"from-display-name",name:"smtpServer.fromDisplayName",ref:T,placeholder:"Display name for Sender email address"})),l.ZP.createElement(c.cw,{label:t("replyTo"),fieldId:"kc-reply-to",validated:N.smtpServer?.replyTo?"error":"default",helperTextInvalid:t("users:emailInvalid")},l.ZP.createElement(h.F,{type:"email",id:"kc-reply-to",name:"smtpServer.replyTo",ref:T({pattern:E.E9}),placeholder:"Reply to email address",validated:N.smtpServer?.replyTo?"error":"default"})),l.ZP.createElement(c.cw,{label:t("replyToDisplayName"),fieldId:"kc-reply-to-display-name",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:replyToDisplayName",fieldLabelId:"realm-settings:replyToDisplayName"})},l.ZP.createElement(h.F,{type:"text",id:"kc-reply-to-display-name",name:"smtpServer.replyToDisplayName",ref:T,placeholder:'Display name for "reply to" email address'})),l.ZP.createElement(c.cw,{label:t("envelopeFrom"),fieldId:"kc-envelope-from",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:envelopeFrom",fieldLabelId:"realm-settings:envelopeFrom"})},l.ZP.createElement(h.F,{type:"text",id:"kc-envelope-from",name:"smtpServer.envelopeFrom",ref:T,placeholder:"Sender envelope email address"})))),l.ZP.createElement(b.b,{className:"kc-email-connection",title:t("connectionAndAuthentication")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:I(O)},l.ZP.createElement(c.cw,{label:t("host"),fieldId:"kc-host",isRequired:!0,validated:N.smtpServer?.host?"error":"default",helperTextInvalid:t("common:required")},l.ZP.createElement(h.F,{type:"text",id:"kc-host",name:"smtpServer.host",ref:T({required:!0}),placeholder:"SMTP host",validated:N.smtpServer?.host?"error":"default"})),l.ZP.createElement(c.cw,{label:t("port"),fieldId:"kc-port"},l.ZP.createElement(h.F,{type:"text",id:"kc-port",name:"smtpServer.port",ref:T,placeholder:"SMTP port (defaults to 25)"})),l.ZP.createElement(c.cw,{label:t("encryption"),fieldId:"kc-html-display-name"},l.ZP.createElement(s.Qr,{name:"smtpServer.ssl",control:S,defaultValue:"false",render:({onChange:e,value:a})=>l.ZP.createElement(c.XZ,{id:"kc-enable-ssl","data-testid":"enable-ssl",label:t("enableSSL"),ref:T,isChecked:"true"===a,onChange:t=>e(""+t)})}),l.ZP.createElement(s.Qr,{name:"smtpServer.starttls",control:S,defaultValue:"false",render:({onChange:e,value:a})=>l.ZP.createElement(c.XZ,{id:"kc-enable-start-tls","data-testid":"enable-start-tls",label:t("enableStartTLS"),ref:T,isChecked:"true"===a,onChange:t=>e(""+t)})})),l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:t("authentication"),fieldId:"kc-authentication"},l.ZP.createElement(s.Qr,{name:"smtpServer.auth",control:S,defaultValue:"",render:({onChange:e,value:a})=>l.ZP.createElement(c.rs,{id:"kc-authentication-switch","data-testid":"email-authentication-switch",label:t("common:enabled"),labelOff:t("common:disabled"),isChecked:"true"===a,onChange:t=>{e(""+t)}})})),"true"===M&&l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.cw,{label:t("username"),fieldId:"kc-username",isRequired:!0,validated:N.smtpServer?.user?"error":"default",helperTextInvalid:t("common:required")},l.ZP.createElement(h.F,{type:"text",id:"kc-username","data-testid":"username-input",name:"smtpServer.user",ref:T({required:!0}),placeholder:"Login username",validated:N.smtpServer?.user?"error":"default"})),l.ZP.createElement(c.cw,{label:t("password"),fieldId:"kc-username",isRequired:!0,validated:N.smtpServer?.password?"error":"default",helperTextInvalid:t("common:required"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:password",fieldLabelId:"realm-settings:password"})},l.ZP.createElement(h.F,{type:"password",id:"kc-password","data-testid":"password-input",name:"smtpServer.password",ref:T({required:!0}),placeholder:"Login password",validated:N.smtpServer?.password?"error":"default"}))),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"email-tab-save"},t("common:save")),l.ZP.createElement(c.zx,{variant:"secondary",onClick:()=>(async()=>{const e=e=>e===(!0).toString(),l=new Map([["port",e=>Number(e)],["ssl",e],["starttls",e],["auth",e]]),n={...L().smtpServer};for(const[e,t]of l.entries())n[e]=t(n[e]);try{if(!await B())return;await a.realms.testSMTPConnection({realm:p.realm},n),i(t("testConnectionSuccess"),c.Ux.success)}catch(e){m("realm-settings:testConnectionError",e)}})(),"data-testid":"test-connection-button",isDisabled:!(E.E9.test(K)&&A)},t("common:testConnection")),l.ZP.createElement(c.zx,{variant:"link",onClick:()=>w(p)},t("common:revert")))))))};var C=a(3954);const T=({type:e,form:t,reset:a,clear:n})=>{const{t:r}=(0,o.$G)("realm-settings"),{control:i,watch:d,setValue:u,formState:{isDirty:p}}=t,P="admin"===e?"adminEventsEnabled":"eventsEnabled",g=d(P),[E,f]=(0,m.W)({titleKey:"realm-settings:events-disable-title",messageKey:"realm-settings:events-disable-confirm",continueButtonLabel:"realm-settings:confirm",onConfirm:()=>u(P,!1)});return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(f,null),l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:r("saveEvents"),fieldId:P,labelIcon:l.ZP.createElement(Z.B,{helpText:`realm-settings-help:save-${e}-events`,fieldLabelId:"realm-settings:saveEvents"})},l.ZP.createElement(s.Qr,{name:P,defaultValue:!1,control:i,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{"data-testid":P,id:`${P}-switch`,label:r("common:on"),labelOff:r("common:off"),isChecked:t,onChange:t=>{t?e(t):E()}})})),g&&l.ZP.createElement(l.ZP.Fragment,null,"admin"===e&&l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:r("includeRepresentation"),fieldId:"includeRepresentation",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:includeRepresentation",fieldLabelId:"realm-settings:includeRepresentation"})},l.ZP.createElement(s.Qr,{name:"adminEventsDetailsEnabled",defaultValue:!1,control:i,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{"data-testid":"includeRepresentation",id:"includeRepresentation",label:r("common:on"),labelOff:r("common:off"),isChecked:t,onChange:e})})),"user"===e&&l.ZP.createElement(c.cw,{label:r("expiration"),fieldId:"expiration",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:expiration",fieldLabelId:"realm-settings:expiration"})},l.ZP.createElement(s.Qr,{name:"eventsExpiration",defaultValue:"",control:i,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{value:t,onChange:e,units:["minute","hour","day"]})}))),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit",id:`save-${e}`,"data-testid":`save-${e}`,isDisabled:!p},r("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:a},r("common:revert"))),l.ZP.createElement(c.iz,null),l.ZP.createElement(c.cw,{label:r("user"===e?"clearUserEvents":"clearAdminEvents"),fieldId:`clear-${e}-events`,labelIcon:l.ZP.createElement(Z.B,{helpText:`realm-settings-help:${e}-clearEvents`,fieldLabelId:`realm-settings:clear-${e}-events`})},l.ZP.createElement(c.zx,{variant:"danger",id:`clear-${e}-events`,"data-testid":`clear-${e}-events`,onClick:()=>n()},r("user"===e?"clearUserEvents":"clearAdminEvents"))))};var S=a(192),I=a(1586);function x({loader:e,addTypes:t,onSelect:a,onDelete:n}){const{t:r}=(0,o.$G)("realm-settings");return l.ZP.createElement(S.B,{ariaLabelKey:"userEventsRegistered",searchPlaceholderKey:"realm-settings:searchEventType",loader:e,onSelect:a||void 0,canSelectAll:!!a,toolbarItem:t&&l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.zx,{id:"addTypes",onClick:t,"data-testid":"addTypes"},r("addSavedTypes"))),actions:n?[{title:r("common:delete"),onRowClick:n}]:[],columns:[{name:"id",displayKey:"realm-settings:eventType",cellFormatters:[e=>r(`eventTypes.${e}.name`)]},{name:"description",displayKey:"description",cellRenderer:e=>l.ZP.createElement(l.HY,{key:e.id},r(`eventTypes.${e.id}.description`))}],emptyState:l.ZP.createElement(I.M,{message:r("emptyEvents"),instructions:r("emptyEventsInstructions")})})}a(5623);var w=a(9280);const L=({onConfirm:e,onClose:t,configured:a})=>{const{t:n}=(0,o.$G)("realm-settings"),{enums:r}=(0,w.tN)(),[i,s]=(0,l.eJ)([]);return l.ZP.createElement(c.u_,{variant:c.vE.medium,title:n("addTypes"),isOpen:!0,onClose:t,actions:[l.ZP.createElement(c.zx,{"data-testid":"addEventTypeConfirm",key:"confirm",variant:"primary",onClick:()=>e(i)},n("common:add")),l.ZP.createElement(c.zx,{"data-testid":"moveCancel",key:"cancel",variant:"link",onClick:t},n("common:cancel"))]},l.ZP.createElement(x,{onSelect:e=>s(e),loader:()=>Promise.resolve(r.eventType.filter((e=>!a.includes(e))).map((e=>({id:e}))))}))},N=({form:e,reset:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{control:n,formState:{isDirty:r}}=e,[i,m]=(0,l.eJ)(!1),d=(0,w.tN)().providers?.eventsListener.providers;return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:a("eventListeners"),fieldId:"kc-eventListeners",labelIcon:l.ZP.createElement(Z.B,{helpText:a("eventListenersHelpText"),fieldLabelId:"realm-settings:eventListeners"})},l.ZP.createElement(s.Qr,{name:"eventsListeners",defaultValue:"",control:n,render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{name:"eventsListeners",className:"kc_eventListeners_select","data-testid":"eventListeners-select",chipGroupProps:{numChips:3,expandedText:a("common:hide"),collapsedText:a("common:showRemaining")},variant:c.TM.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:e=>m(e),selections:t,onSelect:(a,l)=>{const n=l.toString(),r=t.includes(n)?t.filter((e=>e!==n)):[...t,n];e(r)},onClear:t=>{t.stopPropagation(),e([])},isOpen:i,"aria-labelledby":"eventsListeners"},Object.keys(d).map((e=>l.ZP.createElement(c.$m,{key:e,value:e}))))})),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"saveEventListenerBtn",isDisabled:!r},a("common:save")),l.ZP.createElement(c.zx,{variant:"link","data-testid":"revertEventListenerBtn",onClick:t},a("common:revert"))))},K=()=>{const{t:e}=(0,o.$G)("realm-settings"),t=(0,s.cI)(),{setValue:a,handleSubmit:n,watch:i,reset:d}=t,[p,P]=(0,l.eJ)(0),[E,Z]=(0,l.eJ)(0),[b,h]=(0,l.eJ)("event"),[v,y]=(0,l.eJ)(),[k,C]=(0,l.eJ)(),[S,I]=(0,l.eJ)(!1),{adminClient:w}=(0,r.K3)(),{addAlert:K,addError:A}=(0,g.Z7)(),{realm:M}=(0,u.PL)(),O=e=>{d(e),y(e),Object.entries(e||{}).forEach((e=>a(e[0],e[1])))},B=async e=>{C(e),V()},[V,R]=(0,m.W)({titleKey:"realm-settings:deleteEvents",messageKey:"realm-settings:deleteEventsConfirm",continueButtonLabel:"common:clear",continueButtonVariant:c.Wu.danger,onConfirm:async()=>{try{switch(k){case"admin":await w.realms.clearAdminEvents({realm:M});break;case"user":await w.realms.clearEvents({realm:M})}K(e(`${k}-events-cleared`),c.Ux.success)}catch(e){A(`realm-settings:${k}-events-cleared-error`,e)}}});(0,r.ib)((()=>w.realms.getConfigEvents({realm:M})),(e=>{O(e),Z((new Date).getTime())}),[p]);const D=async t=>{const a=v?.eventsListeners!==t.eventsListeners;try{await w.realms.updateConfigEvents({realm:M},t),O({...v,...t}),K(e(a?"realm-settings:saveEventListenersSuccess":"realm-settings:eventConfigSuccessfully"),c.Ux.success)}catch(t){A(e(a?"realm-settings:saveEventListenersError":"realm-settings:eventConfigError"),t)}},z=async(e=[])=>{const a={...t.getValues(),enabledEventTypes:e};await D(a),I(!1),P((new Date).getTime())},$=i("eventsEnabled")||!1;return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(R,null),S&&l.ZP.createElement(L,{onConfirm:e=>(async e=>{const t=e.map((e=>e.id)),a=v.enabledEventTypes?.concat(t);await z(a)})(e),configured:v?.enabledEventTypes||[],onClose:()=>I(!1)}),l.ZP.createElement(c.mQ,{activeKey:b,onSelect:(e,t)=>h(t)},l.ZP.createElement(c.OK,{eventKey:"event",title:l.ZP.createElement(c.TP,null,e("eventListeners")),"data-testid":"rs-event-listeners-tab"},l.ZP.createElement(c.NP,null,l.ZP.createElement(f.N,{role:"manage-events",isHorizontal:!0,onSubmit:n(D)},l.ZP.createElement(N,{form:t,reset:()=>O(v)})))),l.ZP.createElement(c.OK,{eventKey:"user",title:l.ZP.createElement(c.TP,null,e("userEventsSettings")),"data-testid":"rs-events-tab"},l.ZP.createElement(c.NP,null,l.ZP.createElement(c.Dx,{headingLevel:"h1",size:"xl"},e("userEventsConfig"))),l.ZP.createElement(c.NP,null,l.ZP.createElement(f.N,{role:"manage-events",isHorizontal:!0,onSubmit:n(D)},l.ZP.createElement(T,{type:"user",form:t,reset:()=>O(v),clear:()=>B("user")}))),$&&l.ZP.createElement(c.NP,null,l.ZP.createElement(x,{key:E,addTypes:()=>I(!0),loader:()=>Promise.resolve(v?.enabledEventTypes?.map((e=>({id:e})))||[]),onDelete:e=>{const t=v?.enabledEventTypes?.filter((t=>t!==e.id));z(t),y({...v,enabledEventTypes:t})}}))),l.ZP.createElement(c.OK,{eventKey:"admin",title:l.ZP.createElement(c.TP,null,e("adminEventsSettings")),"data-testid":"rs-admin-events-tab"},l.ZP.createElement(c.NP,null,l.ZP.createElement(c.Dx,{headingLevel:"h4",size:"xl"},e("adminEventsConfig"))),l.ZP.createElement(c.NP,null,l.ZP.createElement(f.N,{role:"manage-events",isHorizontal:!0,onSubmit:n(D)},l.ZP.createElement(T,{type:"admin",form:t,reset:()=>O(v),clear:()=>B("admin")}))))))};var A;function M(){const{profileInfo:e}=(0,w.tN)(),t=e?.experimentalFeatures??[],a=e?.previewFeatures??[],l=e?.disabledFeatures??[],n=[...t,...a].filter((e=>!l.includes(e)));return function(e){return n.includes(e)}}(A||(A={})).DeclarativeUserProfile="DECLARATIVE_USER_PROFILE";var O=a(704),B=a(6179);const V=({realm:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{adminClient:n}=(0,r.K3)(),{realm:i}=(0,u.PL)(),m=(0,s.cI)({shouldUnregister:!1}),{register:d,control:p,handleSubmit:P,setValue:g,formState:{isDirty:b}}=m,v=M(),[y,k]=(0,l.eJ)(!1),C=["all","external","none"],T=()=>{if((0,E.Fz)(e,g),e.attributes?.["acr.loa.map"]){const t=Object.entries(JSON.parse(e.attributes["acr.loa.map"])).flatMap((([e,t])=>({key:e,value:t})));t.concat({key:"",value:""}),g("attributes.acr.loa.map",t)}};return(0,l.d4)(T,[]),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:P(t)},l.ZP.createElement(c.cw,{label:a("realmId"),fieldId:"kc-realm-id",isRequired:!0},l.ZP.createElement(s.Qr,{name:"realm",control:p,defaultValue:"",render:({onChange:e,value:t})=>l.ZP.createElement(c.M5,{"data-testid":"realmName",onChange:e},t)})),l.ZP.createElement(c.cw,{label:a("displayName"),fieldId:"kc-display-name"},l.ZP.createElement(h.F,{type:"text",id:"kc-display-name",name:"displayName",ref:d})),l.ZP.createElement(c.cw,{label:a("htmlDisplayName"),fieldId:"kc-html-display-name"},l.ZP.createElement(h.F,{type:"text",id:"kc-html-display-name",name:"displayNameHtml",ref:d})),l.ZP.createElement(c.cw,{label:a("frontendUrl"),fieldId:"kc-frontend-url",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:frontendUrl",fieldLabelId:"realm-settings:frontendUrl"})},l.ZP.createElement(h.F,{type:"text",id:"kc-frontend-url",name:"attributes.frontendUrl",ref:d})),l.ZP.createElement(c.cw,{label:a("requireSsl"),fieldId:"kc-require-ssl",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:requireSsl",fieldLabelId:"realm-settings:requireSsl"})},l.ZP.createElement(s.Qr,{name:"sslRequired",defaultValue:"none",control:p,render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-require-ssl",onToggle:()=>k(!y),onSelect:(t,a)=>{e(a),k(!1)},selections:t,variant:c.TM.single,"aria-label":a("requireSsl"),isOpen:y},C.map((e=>l.ZP.createElement(c.$m,{selected:e===t,key:e,value:e},a(`sslType.${e}`)))))})),l.ZP.createElement(c.cw,{label:a("clients:acrToLoAMapping"),fieldId:"acrToLoAMapping",labelIcon:l.ZP.createElement(Z.B,{helpText:"clients-help:acrToLoAMapping",fieldLabelId:"clients:acrToLoAMapping"})},l.ZP.createElement(s.RV,{...m},l.ZP.createElement(B.R,{name:"attributes.acr.loa.map"}))),l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:a("userManagedAccess"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:userManagedAccess",fieldLabelId:"realm-settings:userManagedAccess"}),fieldId:"kc-user-managed-access"},l.ZP.createElement(s.Qr,{name:"userManagedAccessAllowed",control:p,defaultValue:!1,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"kc-user-managed-access","data-testid":"user-managed-access-switch",label:a("common:on"),labelOff:a("common:off"),isChecked:t,onChange:e})})),v(A.DeclarativeUserProfile)&&l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:a("userProfileEnabled"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:userProfileEnabled",fieldLabelId:"realm-settings:userProfileEnabled"}),fieldId:"kc-user-profile-enabled"},l.ZP.createElement(s.Qr,{name:"attributes.userProfileEnabled",control:p,defaultValue:!1,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"kc-user-profile-enabled","data-testid":"user-profile-enabled-switch",label:a("common:on"),labelOff:a("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),l.ZP.createElement(c.cw,{label:a("endpoints"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:endpoints",fieldLabelId:"realm-settings:endpoints"}),fieldId:"kc-endpoints"},l.ZP.createElement(c.Kq,null,l.ZP.createElement(c.vO,null,l.ZP.createElement(O.n,{href:`${(0,E.mi)(n.baseUrl)}realms/${i}/.well-known/openid-configuration`,title:a("openIDEndpointConfiguration")})),l.ZP.createElement(c.vO,null,l.ZP.createElement(O.n,{href:`${(0,E.mi)(n.baseUrl)}realms/${i}/protocol/saml/descriptor`,title:a("samlIdentityProviderMetadata")})))),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"general-tab-save",isDisabled:!b},a("common:save")),l.ZP.createElement(c.zx,{"data-testid":"general-tab-revert",variant:"link",onClick:T},a("common:revert")))))},R=({realm:e,refresh:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{addAlert:n,addError:i}=(0,g.Z7)(),{adminClient:s}=(0,r.K3)(),{realm:m}=(0,u.PL)(),d=async l=>{const r=Array.isArray(l)?Object.keys(l[0])[0]:Object.keys(l)[0];try{await s.realms.update({realm:m},Array.isArray(l)?l.reduce(((e,t)=>Object.assign(e,t)),e):Object.assign(e,l)),n(a("enableSwitchSuccess",{switch:a(r)})),t()}catch(e){i(a("enableSwitchError"),e)}};return l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(b.b,{className:"kc-login-screen",title:a("loginScreenCustomization")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm"},l.ZP.createElement(c.cw,{label:a("registrationAllowed"),fieldId:"kc-user-reg",labelIcon:l.ZP.createElement(Z.B,{helpText:a("userRegistrationHelpText"),fieldLabelId:"realm-settings:registrationAllowed"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-user-reg-switch","data-testid":"user-reg-switch",value:e.registrationAllowed?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.registrationAllowed,onChange:e=>{d({registrationAllowed:e})}})),l.ZP.createElement(c.cw,{label:a("resetPasswordAllowed"),fieldId:"kc-forgot-pw",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:forgotPasswordHelpText",fieldLabelId:"realm-settings:resetPasswordAllowed"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-forgot-pw-switch","data-testid":"forgot-pw-switch",name:"resetPasswordAllowed",value:e.resetPasswordAllowed?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.resetPasswordAllowed,onChange:e=>{d({resetPasswordAllowed:e})}})),l.ZP.createElement(c.cw,{label:a("rememberMe"),fieldId:"kc-remember-me",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:rememberMeHelpText",fieldLabelId:"realm-settings:rememberMe"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-remember-me-switch","data-testid":"remember-me-switch",value:e.rememberMe?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.rememberMe,onChange:e=>{d({rememberMe:e})}})))),l.ZP.createElement(b.b,{className:"kc-email-settings",title:a("emailSettings")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm"},l.ZP.createElement(c.cw,{label:a("registrationEmailAsUsername"),fieldId:"kc-email-as-username",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:emailAsUsernameHelpText",fieldLabelId:"realm-settings:registrationEmailAsUsername"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-email-as-username-switch","data-testid":"email-as-username-switch",value:e.registrationEmailAsUsername?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.registrationEmailAsUsername,onChange:e=>{d([{registrationEmailAsUsername:e},{duplicateEmailsAllowed:!1}])}})),l.ZP.createElement(c.cw,{label:a("loginWithEmailAllowed"),fieldId:"kc-login-with-email",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:loginWithEmailHelpText",fieldLabelId:"realm-settings:loginWithEmailAllowed"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-login-with-email-switch","data-testid":"login-with-email-switch",value:e.loginWithEmailAllowed?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.loginWithEmailAllowed,onChange:e=>{d([{loginWithEmailAllowed:e},{duplicateEmailsAllowed:!1}])}})),l.ZP.createElement(c.cw,{label:a("duplicateEmailsAllowed"),fieldId:"kc-duplicate-emails",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:duplicateEmailsHelpText",fieldLabelId:"realm-settings:duplicateEmailsAllowed"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-duplicate-emails-switch","data-testid":"duplicate-emails-switch",label:a("common:on"),labelOff:a("common:off"),isChecked:e.duplicateEmailsAllowed||e.loginWithEmailAllowed||e.registrationEmailAsUsername,onChange:e=>{d({duplicateEmailsAllowed:e})},isDisabled:e.loginWithEmailAllowed||e.registrationEmailAsUsername})),l.ZP.createElement(c.cw,{label:a("verifyEmail"),fieldId:"kc-verify-email",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings:verifyEmailHelpText",fieldLabelId:"realm-settings:verifyEmail"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-verify-email-switch","data-testid":"verify-email-switch",name:"verifyEmail",value:e.verifyEmail?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.verifyEmail,onChange:e=>{d({verifyEmail:e})}})))),l.ZP.createElement(b.b,{className:"kc-user-info-settings",title:a("userInfoSettings")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm"},l.ZP.createElement(c.cw,{label:a("editUsernameAllowed"),fieldId:"kc-edit-username",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:editUsername",fieldLabelId:"realm-settings:editUsernameAllowed"}),hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"kc-edit-username-switch","data-testid":"edit-username-switch",value:e.editUsernameAllowed?"on":"off",label:a("common:on"),labelOff:a("common:off"),isChecked:e.editUsernameAllowed,onChange:e=>{d({editUsernameAllowed:e})}})))))},D=({fieldName:e,url:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{register:n}=(0,s.Gc)(),r=e.substr(e.indexOf(".")+1);return l.ZP.createElement(c.cw,{label:a(r),fieldId:r,labelIcon:l.ZP.createElement(Z.B,{helpText:l.ZP.createElement(o.cC,{i18nKey:`realm-settings-help:${r}`},"Default value prevents pages from being included",l.ZP.createElement(O.n,{href:t,title:a("common:learnMore")})),fieldLabelId:r})},l.ZP.createElement(h.F,{type:"text",id:r,name:e,ref:n}))},z=({realm:e,save:t})=>{const{t:a}=(0,o.$G)(),n=(0,s.cI)(),{setValue:r,formState:{isDirty:i},handleSubmit:m}=n,d=()=>(0,E.Fz)(e,r);return(0,l.d4)(d,[]),l.ZP.createElement(s.RV,{...n},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"keycloak__security-defences__form",onSubmit:m(t)},l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.xFrameOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.contentSecurityPolicy",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.contentSecurityPolicyReportOnly",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.xContentTypeOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.xRobotsTag",url:"https://developers.google.com/search/docs/advanced/robots/robots_meta_tag"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.xXSSProtection",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection"}),l.ZP.createElement(D,{fieldName:"browserSecurityHeaders.strictTransportSecurity",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security"}),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"headers-form-tab-save",isDisabled:!i},a("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:d},a("common:revert")))))},$=({name:e,style:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{control:n,formState:{errors:r}}=(0,s.Gc)();return l.ZP.createElement(c.cw,{style:t,label:a(e),fieldId:e,labelIcon:l.ZP.createElement(Z.B,{helpText:`realm-settings-help:${e}`,fieldLabelId:`realm-settings:${e}`}),validated:r[e]?c.LD.error:c.LD.default,helperTextInvalid:a("common:required")},l.ZP.createElement(s.Qr,{name:e,defaultValue:"",control:n,rules:{required:!0},render:({onChange:t,value:a})=>l.ZP.createElement(C.uM,{"data-testid":e,value:a,onChange:t,validated:r[e]?c.LD.error:c.LD.default})}))},F=({realm:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),n=(0,s.cI)({shouldUnregister:!1}),{setValue:r,handleSubmit:i,control:m,formState:{isDirty:d}}=n,u=(0,s.qo)({control:m,name:"bruteForceProtected"}),p=(0,s.qo)({control:m,name:"permanentLockout"}),P=()=>(0,E.Fz)(e,r);return(0,l.d4)(P,[]),l.ZP.createElement(s.RV,{...n},l.ZP.createElement(f.N,{role:"manage-realm",isHorizontal:!0,onSubmit:i(t)},l.ZP.createElement(c.cw,{label:a("common:enabled"),fieldId:"bruteForceProtected",hasNoPaddingTop:!0},l.ZP.createElement(s.Qr,{name:"bruteForceProtected",defaultValue:!1,control:m,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"bruteForceProtected",label:a("common:on"),labelOff:a("common:off"),isChecked:t,onChange:e})})),u&&l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.cw,{label:a("failureFactor"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:failureFactor",fieldLabelId:"realm-settings:failureFactor"}),fieldId:"failureFactor"},l.ZP.createElement(s.Qr,{name:"failureFactor",defaultValue:0,control:m,rules:{required:!0},render:({onChange:e,value:t})=>l.ZP.createElement(c.Y2,{type:"text",id:"failureFactor",value:t,onPlus:()=>e(t+1),onMinus:()=>e(t-1),onChange:t=>e(Number(t.target.value))})})),l.ZP.createElement(c.cw,{label:a("permanentLockout"),fieldId:"permanentLockout",hasNoPaddingTop:!0},l.ZP.createElement(s.Qr,{name:"permanentLockout",defaultValue:!1,control:m,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"permanentLockout",label:a("common:on"),labelOff:a("common:off"),isChecked:t,onChange:e})})),!p&&l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement($,{name:"waitIncrementSeconds"}),l.ZP.createElement($,{name:"maxFailureWaitSeconds"}),l.ZP.createElement($,{name:"maxDeltaTimeSeconds"})),l.ZP.createElement(c.cw,{label:a("quickLoginCheckMilliSeconds"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:quickLoginCheckMilliSeconds",fieldLabelId:"realm-settings:quickLoginCheckMilliSeconds"}),fieldId:"quickLoginCheckMilliSeconds"},l.ZP.createElement(s.Qr,{name:"quickLoginCheckMilliSeconds",defaultValue:0,control:m,render:({onChange:e,value:t})=>l.ZP.createElement(c.Y2,{type:"text",id:"quickLoginCheckMilliSeconds",value:t,onPlus:()=>e(t+1),onMinus:()=>e(t-1),onChange:t=>e(Number(t.target.value))})})),l.ZP.createElement($,{name:"minimumQuickLoginWaitSeconds"})),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"brute-force-tab-save",isDisabled:!d},a("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:P},a("common:revert")))))},U=({realm:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),[n,r]=(0,l.eJ)(10);return l.ZP.createElement(c.mQ,{activeKey:n,onSelect:(e,t)=>r(t)},l.ZP.createElement(c.OK,{id:"headers",eventKey:10,title:l.ZP.createElement(c.TP,null,a("headers"))},l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(z,{realm:e,save:t}))),l.ZP.createElement(c.OK,{id:"bruteForce",eventKey:20,title:l.ZP.createElement(c.TP,null,a("bruteForceDetection"))},l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(F,{realm:e,save:t}))))},J=({realm:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{setValue:n,control:r,handleSubmit:i,formState:m}=(0,s.cI)({shouldUnregister:!1}),d=(0,s.qo)({control:r,name:"offlineSessionMaxLifespanEnabled"}),u=()=>{(0,E.Fz)(e,n)};return(0,l.d4)(u,[]),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(b.b,{title:a("SSOSessionSettings"),className:"kc-sso-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",onSubmit:i(t)},l.ZP.createElement(c.cw,{label:a("SSOSessionIdle"),fieldId:"SSOSessionIdle",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:ssoSessionIdle",fieldLabelId:"realm-settings:SSOSessionIdle"})},l.ZP.createElement(s.Qr,{name:"ssoSessionIdleTimeout",defaultValue:e.ssoSessionIdleTimeout,control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-sso-session-idle","data-testid":"sso-session-idle-input","aria-label":"sso-session-idle-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:a("SSOSessionMax"),fieldId:"SSOSessionMax",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:ssoSessionMax",fieldLabelId:"realm-settings:SSOSessionMax"})},l.ZP.createElement(s.Qr,{name:"ssoSessionMaxLifespan",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-sso-session-max","data-testid":"sso-session-max-input","aria-label":"sso-session-max-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:a("SSOSessionIdleRememberMe"),fieldId:"SSOSessionIdleRememberMe",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:ssoSessionIdleRememberMe",fieldLabelId:"realm-settings:SSOSessionIdleRememberMe"})},l.ZP.createElement(s.Qr,{name:"ssoSessionIdleTimeoutRememberMe",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-sso-session-idle-remember-me","data-testid":"sso-session-idle-remember-me-input","aria-label":"sso-session-idle-remember-me-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:a("SSOSessionMaxRememberMe"),fieldId:"SSOSessionMaxRememberMe",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:ssoSessionMaxRememberMe",fieldLabelId:"realm-settings:SSOSessionMaxRememberMe"})},l.ZP.createElement(s.Qr,{name:"ssoSessionMaxLifespanRememberMe",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-sso-session-max-remember-me","aria-label":"sso-session-max-remember-me-input","data-testid":"sso-session-max-remember-me-input",value:t,onChange:e,units:["minute","hour","day"]})})))),l.ZP.createElement(b.b,{title:a("clientSessionSettings"),className:"kc-client-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:i(t)},l.ZP.createElement(c.cw,{label:a("clientSessionIdle"),fieldId:"clientSessionIdle",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:clientSessionIdle",fieldLabelId:"realm-settings:clientSessionIdle"})},l.ZP.createElement(s.Qr,{name:"clientSessionIdleTimeout",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-client-session-idle","data-testid":"client-session-idle-input","aria-label":"client-session-idle-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:a("clientSessionMax"),fieldId:"clientSessionMax",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:clientSessionMax",fieldLabelId:"realm-settings:clientSessionMax"})},l.ZP.createElement(s.Qr,{name:"clientSessionMaxLifespan",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-client-session-max","data-testid":"client-session-max-input","aria-label":"client-session-max-input",value:t,onChange:e,units:["minute","hour","day"]})})))),l.ZP.createElement(b.b,{title:a("offlineSessionSettings"),className:"kc-offline-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:i(t)},l.ZP.createElement(c.cw,{label:a("offlineSessionIdle"),fieldId:"offlineSessionIdle",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:offlineSessionIdle",fieldLabelId:"realm-settings:offlineSessionIdle"})},l.ZP.createElement(s.Qr,{name:"offlineSessionIdleTimeout",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-offline-session-idle","data-testid":"offline-session-idle-input","aria-label":"offline-session-idle-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:a("offlineSessionMaxLimited"),fieldId:"kc-offlineSessionMaxLimited",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:offlineSessionMaxLimited",fieldLabelId:"realm-settings:offlineSessionMaxLimited"})},l.ZP.createElement(s.Qr,{name:"offlineSessionMaxLifespanEnabled",control:r,defaultValue:!1,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"kc-offline-session-max","data-testid":"offline-session-max-switch","aria-label":"offline-session-max-switch",label:a("common:enabled"),labelOff:a("common:disabled"),isChecked:t,onChange:e})})),d&&l.ZP.createElement(c.cw,{label:a("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:offlineSessionMax",fieldLabelId:"realm-settings:offlineSessionMax"})},l.ZP.createElement(s.Qr,{name:"offlineSessionMaxLifespan",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-offline-session-max","data-testid":"offline-session-max-input","aria-label":"offline-session-max-input",value:t,onChange:e,units:["minute","hour","day"]})})))),l.ZP.createElement(b.b,{className:"kc-login-settings-template",title:a("loginSettings")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:i(t)},l.ZP.createElement(c.cw,{label:a("loginTimeout"),id:"kc-login-timeout-label",fieldId:"offlineSessionIdle",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:loginTimeout",fieldLabelId:"realm-settings:loginTimeout"})},l.ZP.createElement(s.Qr,{name:"accessCodeLifespanLogin",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-login-timeout","data-testid":"login-timeout-input","aria-label":"login-timeout-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:a("loginActionTimeout"),fieldId:"loginActionTimeout",id:"login-action-timeout-label",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:loginActionTimeout",fieldLabelId:"realm-settings:loginActionTimeout"})},l.ZP.createElement(s.Qr,{name:"accessCodeLifespanUserAction",defaultValue:"",control:r,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-login-action-timeout","data-testid":"login-action-timeout-input","aria-label":"login-action-timeout-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"sessions-tab-save",isDisabled:!m.isDirty},a("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:u},a("common:revert"))))))},G=({realm:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),[n,r]=(0,l.eJ)(!1),[i,m]=(0,l.eJ)(!1),[d,u]=(0,l.eJ)(!1),[p,P]=(0,l.eJ)(!1),{control:g,handleSubmit:b,setValue:h}=(0,s.cI)(),v=(0,w.tN)().themes,y=()=>{(0,E.Fz)(e,h)};return(0,l.d4)(y,[]),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:b(t)},l.ZP.createElement(c.cw,{label:a("loginTheme"),fieldId:"kc-login-theme",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:loginTheme",fieldLabelId:"realm-settings:loginTheme"})},l.ZP.createElement(s.Qr,{name:"loginTheme",control:g,defaultValue:"",render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-login-theme",onToggle:()=>r(!n),onSelect:(t,a)=>{e(a),r(!1)},selections:t,variant:c.TM.single,"aria-label":a("loginTheme"),isOpen:n,placeholderText:"Select a theme","data-testid":"select-login-theme"},v.login.map(((e,n)=>l.ZP.createElement(c.$m,{selected:e.name===t,key:`login-theme-${n}`,value:e.name},a(`${e.name}`)))))})),l.ZP.createElement(c.cw,{label:a("accountTheme"),fieldId:"kc-account-theme",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:accountTheme",fieldLabelId:"realm-settings:accountTheme"})},l.ZP.createElement(s.Qr,{name:"accountTheme",control:g,defaultValue:"",render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-account-theme",onToggle:()=>m(!i),onSelect:(t,a)=>{e(a),m(!1)},selections:t,variant:c.TM.single,"aria-label":a("accountTheme"),isOpen:i,placeholderText:"Select a theme","data-testid":"select-account-theme"},v.account.map(((e,n)=>l.ZP.createElement(c.$m,{selected:e.name===t,key:`account-theme-${n}`,value:e.name},a(`${e.name}`)))))})),l.ZP.createElement(c.cw,{label:a("adminTheme"),fieldId:"kc-admin-console-theme",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:adminConsoleTheme",fieldLabelId:"realm-settings:adminTheme"})},l.ZP.createElement(s.Qr,{name:"adminTheme",control:g,defaultValue:"",render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-admin-console-theme",onToggle:()=>u(!d),onSelect:(t,a)=>{e(a),u(!1)},selections:t,variant:c.TM.single,"aria-label":a("adminConsoleTheme"),isOpen:d,placeholderText:"Select a theme","data-testid":"select-admin-theme"},v.admin.map(((e,n)=>l.ZP.createElement(c.$m,{selected:e.name===t,key:`admin-theme-${n}`,value:e.name},a(`${e.name}`)))))})),l.ZP.createElement(c.cw,{label:a("emailTheme"),fieldId:"kc-email-theme",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:emailTheme",fieldLabelId:"realm-settings:emailTheme"})},l.ZP.createElement(s.Qr,{name:"emailTheme",control:g,defaultValue:"",render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-email-theme",onToggle:()=>P(!p),onSelect:(t,a)=>{e(a),P(!1)},selections:t,variant:c.TM.single,"aria-label":a("emailTheme"),isOpen:p,placeholderText:"Select a theme","data-testid":"select-email-theme"},v.email.map(((e,n)=>l.ZP.createElement(c.$m,{selected:e.name===t,key:`email-theme-${n}`,value:e.name},a(`${e.name}`)))))})),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"themes-tab-save"},a("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:y},a("common:revert")))))},W=({realm:e,reset:t,save:a})=>{const{t:n}=(0,o.$G)("realm-settings"),r=(0,w.tN)(),{whoAmI:i}=(0,v.kA)(),[m,d]=(0,l.eJ)(!1),u=r.componentTypes?.["org.keycloak.keys.KeyProvider"]??[],p=u[2].properties[4].options,P=u[3].properties[3].options,g=["ES256","ES384","ES512"].concat(p,P),h=(0,s.cI)({shouldUnregister:!1}),{setValue:y,control:k}=h,T=(0,s.qo)({control:k,name:"offlineSessionMaxLifespanEnabled",defaultValue:e.offlineSessionMaxLifespanEnabled}),S=(0,s.qo)({control:k,name:"ssoSessionIdleTimeout",defaultValue:36e3}),I=(0,s.qo)({control:k,name:"revokeRefreshToken",defaultValue:!1});return(0,l.d4)((()=>{(0,E.Fz)(e,y)}),[]),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(b.b,{title:n("realm-settings:general"),className:"kc-sso-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",onSubmit:h.handleSubmit(a)},l.ZP.createElement(c.cw,{label:n("defaultSigAlg"),fieldId:"kc-default-signature-algorithm",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:defaultSigAlg",fieldLabelId:"realm-settings:algorithm"})},l.ZP.createElement(s.Qr,{name:"defaultSignatureAlgorithm",defaultValue:"RS256",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-default-sig-alg",onToggle:()=>d(!m),onSelect:(t,a)=>{e(a.toString()),d(!1)},selections:[t.toString()],variant:c.TM.single,"aria-label":n("defaultSigAlg"),isOpen:m,"data-testid":"select-default-sig-alg"},g.map(((e,a)=>l.ZP.createElement(c.$m,{selected:e===t,key:`default-sig-alg-${a}`,value:e}))))})))),l.ZP.createElement(b.b,{title:n("realm-settings:refreshTokens"),className:"kc-client-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(a)},l.ZP.createElement(c.cw,{hasNoPaddingTop:!0,label:n("revokeRefreshToken"),fieldId:"kc-revoke-refresh-token",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:revokeRefreshToken",fieldLabelId:"realm-settings:revokeRefreshToken"})},l.ZP.createElement(s.Qr,{name:"revokeRefreshToken",control:h.control,defaultValue:!1,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"kc-revoke-refresh-token","data-testid":"revoke-refresh-token-switch","aria-label":"revoke-refresh-token-switch",label:n("common:enabled"),labelOff:n("common:disabled"),isChecked:t,onChange:e})})),I&&l.ZP.createElement(c.cw,{label:n("refreshTokenMaxReuse"),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:refreshTokenMaxReuse",fieldLabelId:"realm-settings:refreshTokenMaxReuse"}),fieldId:"refreshTokenMaxReuse"},l.ZP.createElement(s.Qr,{name:"refreshTokenMaxReuse",defaultValue:0,control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(c.Y2,{type:"text",id:"refreshTokenMaxReuseMs",value:t,onPlus:()=>e(t+1),onMinus:()=>e(t-1),onChange:t=>e(Number(t.target.value))})})))),l.ZP.createElement(b.b,{title:n("realm-settings:accessTokens"),className:"kc-offline-session-template"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(a)},l.ZP.createElement(c.cw,{label:n("accessTokenLifespan"),fieldId:"accessTokenLifespan",helperText:n("recommendedSsoTimeout",{time:(0,C.t4)(S,i.getLocale())}),labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:accessTokenLifespan",fieldLabelId:"realm-settings:accessTokenLifespan"})},l.ZP.createElement(s.Qr,{name:"accessTokenLifespan",defaultValue:"",helperTextInvalid:n("common:required"),control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{validated:t>S?"warning":"default",className:"kc-access-token-lifespan","data-testid":"access-token-lifespan-input","aria-label":"access-token-lifespan",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("accessTokenLifespanImplicitFlow"),fieldId:"accessTokenLifespanImplicitFlow",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:accessTokenLifespanImplicitFlow",fieldLabelId:"realm-settings:accessTokenLifespanImplicitFlow"})},l.ZP.createElement(s.Qr,{name:"accessTokenLifespanForImplicitFlow",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-access-token-lifespan-implicit","data-testid":"access-token-lifespan-implicit-input","aria-label":"access-token-lifespan-implicit",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("clientLoginTimeout"),fieldId:"clientLoginTimeout",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:clientLoginTimeout",fieldLabelId:"realm-settings:clientLoginTimeout"})},l.ZP.createElement(s.Qr,{name:"accessCodeLifespan",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-client-login-timeout","data-testid":"client-login-timeout-input","aria-label":"client-login-timeout",value:t,onChange:e,units:["minute","hour","day"]})})),T&&l.ZP.createElement(c.cw,{label:n("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:offlineSessionMax",fieldLabelId:"realm-settings:offlineSessionMax"})},l.ZP.createElement(s.Qr,{name:"offlineSessionMaxLifespan",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-offline-session-max","data-testid":"offline-session-max-input","aria-label":"offline-session-max-input",value:t,onChange:e,units:["minute","hour","day"]})})))),l.ZP.createElement(b.b,{className:"kc-login-settings-template",title:n("actionTokens")},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(a)},l.ZP.createElement(c.cw,{label:n("userInitiatedActionLifespan"),id:"kc-user-initiated-action-lifespan",fieldId:"userInitiatedActionLifespan",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:userInitiatedActionLifespan",fieldLabelId:"realm-settings:userInitiatedActionLifespan"})},l.ZP.createElement(s.Qr,{name:"actionTokenGeneratedByUserLifespan",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-user-initiated-action-lifespan","data-testid":"user-initiated-action-lifespan","aria-label":"user-initiated-action-lifespan",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("defaultAdminInitiated"),fieldId:"defaultAdminInitiated",id:"default-admin-initiated-label",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:defaultAdminInitiatedActionLifespan",fieldLabelId:"realm-settings:defaultAdminInitiated"})},l.ZP.createElement(s.Qr,{name:"actionTokenGeneratedByAdminLifespan",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-default-admin-initiated","data-testid":"default-admin-initated-input","aria-label":"default-admin-initated-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.xv,{className:"kc-override-action-tokens-subtitle",component:c.qO.h1},n("overrideActionTokens")),l.ZP.createElement(c.cw,{label:n("emailVerification"),fieldId:"emailVerification",id:"email-verification"},l.ZP.createElement(s.Qr,{name:"attributes.actionTokenGeneratedByUserLifespan-verify-email",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-email-verification","data-testid":"email-verification-input","aria-label":"email-verification-input",value:t,onChange:t=>e(t.toString()),units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("idpAccountEmailVerification"),fieldId:"idpAccountEmailVerification",id:"idp-acct-label"},l.ZP.createElement(s.Qr,{name:"attributes.actionTokenGeneratedByUserLifespan-idp-verify-account-via-email",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-idp-email-verification","data-testid":"idp-email-verification-input","aria-label":"idp-email-verification",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("forgotPassword"),fieldId:"forgotPassword",id:"forgot-password-label"},l.ZP.createElement(s.Qr,{name:"attributes.actionTokenGeneratedByUserLifespan-reset-credentials",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-forgot-pw","data-testid":"forgot-pw-input","aria-label":"forgot-pw-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.cw,{label:n("executeActions"),fieldId:"executeActions",id:"execute-actions"},l.ZP.createElement(s.Qr,{name:"attributes.actionTokenGeneratedByUserLifespan-execute-actions",defaultValue:"",control:h.control,render:({onChange:e,value:t})=>l.ZP.createElement(C.uM,{className:"kc-execute-actions","data-testid":"execute-actions-input","aria-label":"execute-actions-input",value:t,onChange:e,units:["minute","hour","day"]})})),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",type:"submit","data-testid":"tokens-tab-save",isDisabled:!h.formState.isDirty},n("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:t},n("common:revert"))))))};var H=a(390),Q=a(1639),q=a(5426),_=a(9761);function j(){const{t:e}=(0,o.$G)("realm-settings"),{adminClient:t}=(0,r.K3)(),{realm:a}=(0,u.PL)(),{addAlert:s,addError:d}=(0,g.Z7)(),[p,P]=(0,l.eJ)(),[f,Z]=(0,l.eJ)(),[b,h]=(0,l.eJ)(),[v,y]=(0,l.eJ)(!1),[k,C]=(0,l.eJ)(),[T,x]=(0,l.eJ)(0);(0,r.ib)((()=>t.clientPolicies.listProfiles({includeGlobalProfiles:!0})),(e=>{Z(e.globalProfiles);const t=e.globalProfiles?.map((e=>({...e,global:!0}))),a=e.profiles?.map((e=>({...e,global:!1}))),l=t?.concat(a??[]);P(l||[]),C(JSON.stringify(l,null,2))}),[T]);const w=e=>(0,H.CE)(e,"global"),[L,N]=(0,m.W)({titleKey:e("deleteClientProfileConfirmTitle"),messageKey:e("deleteClientProfileConfirm",{profileName:b?.name}),continueButtonLabel:e("delete"),continueButtonVariant:c.Wu.danger,onConfirm:async()=>{const a=p?.filter((e=>e.name!==b?.name&&!e.global)).map((e=>w(e)));try{await t.clientPolicies.createProfiles({profiles:a,globalProfiles:f}),s(e("deleteClientSuccess"),c.Ux.success),x(T+1)}catch(t){d(e("deleteClientError"),t)}}});return p?l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(N,null),l.ZP.createElement(c.NP,null,l.ZP.createElement(c.kC,{className:"kc-profiles-config-section"},l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Dx,{headingLevel:"h1",size:"md"},e("profilesConfigType"))),l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Y8,{isChecked:!v,name:"profilesView",onChange:()=>y(!1),label:e("profilesConfigTypes.formView"),id:"formView-profilesView",className:"kc-form-radio-btn pf-u-mr-sm pf-u-ml-sm","data-testid":"formView-profilesView"})),l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Y8,{isChecked:v,name:"profilesView",onChange:()=>y(!0),label:e("profilesConfigTypes.jsonEditor"),id:"jsonEditor-profilesView",className:"kc-editor-radio-btn","data-testid":"jsonEditor-profilesView"})))),l.ZP.createElement(c.iz,null),v?l.ZP.createElement(c.cw,{fieldId:"jsonEditor"},l.ZP.createElement("div",{className:"pf-u-mt-md pf-u-ml-lg"},l.ZP.createElement(Q.p,{isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isReadOnly:!1,code:k,language:Q.S.json,height:"30rem",onChange:e=>{C(e??"")}})),l.ZP.createElement(c.WK,null,l.ZP.createElement("div",{className:"pf-u-mt-md"},l.ZP.createElement(c.zx,{variant:c.Wu.primary,className:"pf-u-mr-md pf-u-ml-lg",onClick:async()=>{if(k)try{const a=JSON.parse(k),l=a.filter((e=>!e.global)).map((e=>w(e))),n=a.filter((e=>e.global)).map((e=>w(e)));try{await t.clientPolicies.createProfiles({profiles:l,globalProfiles:n}),s(e("realm-settings:updateClientProfilesSuccess"),c.Ux.success),x(T+1)}catch(e){d("realm-settings:updateClientProfilesError",e)}}catch(e){console.warn("Invalid json, ignoring value using {}")}},"data-testid":"jsonEditor-saveBtn"},e("save")),l.ZP.createElement(c.zx,{variant:c.Wu.link,onClick:()=>{C((0,E.tR)(p))},"data-testid":"jsonEditor-reloadBtn"},e("reload"))))):l.ZP.createElement(S.B,{key:p.length,ariaLabelKey:"realm-settings:profiles",searchPlaceholderKey:"realm-settings:clientProfileSearch",loader:async()=>p??[],toolbarItem:l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.zx,{id:"createProfile",component:e=>l.ZP.createElement(i.rU,{...e,to:(0,q.A)({realm:a,tab:"profiles"})}),"data-testid":"createProfile"},e("createClientProfile"))),isRowDisabled:e=>e.global,actions:[{title:e("common:delete"),onRowClick:e=>{h(e),L()}}],columns:[{name:"name",displayKey:e("common:name"),cellRenderer:t=>l.ZP.createElement(i.rU,{to:(0,_.i)({realm:a,profileName:t.name}),key:t.name},t.name," ",t.global&&l.ZP.createElement(c.__,{color:"blue"},e("global")))},{name:"description",displayKey:e("clientProfileDescription")}],emptyState:l.ZP.createElement(I.M,{message:e("emptyClientProfiles"),instructions:e("emptyClientProfilesInstructions")})})):l.ZP.createElement(n.g,null)}var Y=a(294),X=a(3347),ee=a(8765);const te=()=>{const{t:e}=(0,o.$G)("realm-settings"),{adminClient:t}=(0,r.K3)(),{addAlert:a,addError:d}=(0,g.Z7)(),{realm:p}=(0,u.PL)(),P=(0,i.k6)(),[f,Z]=(0,l.eJ)(!1),[b,h]=(0,l.eJ)(),[v,y]=(0,l.eJ)(),[k,C]=(0,l.eJ)(0),[T,x]=(0,l.eJ)(),[w,L]=(0,l.eJ)(),N=()=>C(k+1),K=(0,s.cI)({mode:"onChange"});(0,r.ib)((()=>t.clientPolicies.listPolicies()),(e=>{h(e.policies),L(e.policies||[]),x((0,E.tR)(e.policies))}),[k]);const A=async()=>{const l=K.getValues(),n=b?.map((e=>{const t=l[e.name];return{...e,enabled:t}}));try{await t.clientPolicies.updatePolicy({policies:n}),P.push((0,ee.G)({realm:p,tab:"policies"})),a(e("realm-settings:updateClientPolicySuccess"),c.Ux.success)}catch(e){d("realm-settings:updateClientPolicyError",e)}},M=({clientPolicy:t})=>{const[a,n]=(0,m.W)({titleKey:"realm-settings:disablePolicyConfirmTitle",messageKey:"realm-settings:disablePolicyConfirm",continueButtonLabel:"common:disable",onConfirm:()=>{K.setValue(t.name,!1),A()}});return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(n,null),l.ZP.createElement(s.Qr,{name:t.name,"data-testid":`${t.name}-switch`,defaultValue:t.enabled,control:K.control,render:({onChange:t,value:n})=>l.ZP.createElement(c.rs,{label:e("common:enabled"),labelOff:e("common:disabled"),isChecked:n,onChange:e=>{e?(t(e),A()):a()}})}))},[O,B]=(0,m.W)({titleKey:e("deleteClientPolicyConfirmTitle"),messageKey:e("deleteClientPolicyConfirm",{policyName:v?.name}),continueButtonLabel:e("delete"),continueButtonVariant:c.Wu.danger,onConfirm:async()=>{const l=b?.filter((e=>e.name!==v?.name));try{await t.clientPolicies.updatePolicy({policies:l}),a(e("deleteClientPolicySuccess"),c.Ux.success),N()}catch(t){d(e("deleteClientPolicyError"),t)}}});return b?l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(B,null),l.ZP.createElement(c.NP,null,l.ZP.createElement(c.kC,{className:"kc-policies-config-section"},l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Dx,{headingLevel:"h1",size:"md"},e("policiesConfigType"))),l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Y8,{isChecked:!f,name:"policiesView",onChange:()=>Z(!1),label:e("policiesConfigTypes.formView"),id:"formView-policiesView","data-testid":"formView-policiesView",className:"kc-form-radio-btn pf-u-mr-sm pf-u-ml-sm"})),l.ZP.createElement(c.B5,null,l.ZP.createElement(c.Y8,{isChecked:f,name:"policiesView",onChange:()=>Z(!0),label:e("policiesConfigTypes.jsonEditor"),id:"jsonEditor-policiesView","data-testid":"jsonEditor-policiesView",className:"kc-editor-radio-btn"})))),l.ZP.createElement(c.iz,null),f?l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement("div",{className:"pf-u-mt-md pf-u-ml-lg"},l.ZP.createElement(Q.p,{isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isReadOnly:!1,code:T,language:Q.S.json,height:"30rem",onChange:x})),l.ZP.createElement("div",{className:"pf-u-mt-md"},l.ZP.createElement(c.zx,{variant:c.Wu.primary,className:"pf-u-mr-md pf-u-ml-lg","data-testid":"jsonEditor-policies-saveBtn",onClick:async()=>{if(T)try{const l=JSON.parse(T);try{await t.clientPolicies.updatePolicy({policies:l}),a(e("realm-settings:updateClientPoliciesSuccess"),c.Ux.success),N()}catch(e){d("realm-settings:updateClientPoliciesError",e)}}catch(e){console.warn("Invalid json, ignoring value using {}"),d("realm-settings:updateClientPoliciesError",e)}}},e("save")),l.ZP.createElement(c.zx,{variant:c.Wu.link,"data-testid":"jsonEditor-reloadBtn",onClick:()=>{x((0,E.tR)(w))}},e("reload")))):l.ZP.createElement(S.B,{key:b.length,emptyState:l.ZP.createElement(I.M,{message:e("realm-settings:noClientPolicies"),instructions:e("realm-settings:noClientPoliciesInstructions"),primaryActionText:e("realm-settings:createClientPolicy"),onPrimaryAction:()=>P.push((0,Y.C)({realm:p}))}),ariaLabelKey:"realm-settings:clientPolicies",searchPlaceholderKey:"realm-settings:clientPolicySearch",loader:async()=>b??[],toolbarItem:l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.zx,{id:"createPolicy",component:e=>l.ZP.createElement(i.rU,{...e,to:(0,Y.C)({realm:p})}),"data-testid":"createPolicy"},e("createClientPolicy"))),actions:[{title:e("common:delete"),onRowClick:e=>{O(),y(e)}}],columns:[{name:"name",cellRenderer:({name:e})=>l.ZP.createElement(i.rU,{to:(0,X.n)({realm:p,policyName:e})},e)},{name:"enabled",displayKey:"realm-settings:status",cellRenderer:e=>l.ZP.createElement(M,{clientPolicy:e})},{name:"description"}]})):l.ZP.createElement(n.g,null)};var ae=a(2190);const le={users:!1,clients:!1,groups:!1,identityProviders:!1,realmRoles:!1,clientRoles:!1},ne=e=>{const{t}=(0,o.$G)("realm-settings"),{adminClient:a}=(0,r.K3)(),{realm:n}=(0,u.PL)(),[i,s]=(0,l.eJ)(),m=!!i,[d,p]=(0,l.eJ)(!1),[P,E]=(0,l.eJ)(!1),[f,Z]=(0,l.eJ)(!1),[b,h]=(0,l.eJ)("FAIL"),[v,y]=(0,l.eJ)({}),[k,C]=(0,l.eJ)(),{addError:T}=(0,g.Z7)(),[I,x]=(0,l.eJ)(le),w=Object.values(I).some((e=>e)),L=()=>{x(le)},N=()=>{s(void 0),y({}),h("FAIL"),L()};(0,l.d4)((()=>{Z(!1),C(void 0),N()}),[e.open]);const K=e=>{N(),s(e),Array.isArray(e)?e.length>0&&y(e[0]):y(e)},A=(e,t)=>{const a=t.currentTarget.name;x({...I,[a]:e})},M=(e,t)=>{h(t),E(!1)},O=e=>{const t=v[e];return void 0!==t&&t.length>0},B=()=>{const e=v.roles?.realm;return void 0!==e&&e.length>0},V=()=>{const e=v.roles?.client;return void 0!==e&&Object.keys(e).length>0},R=e=>m?"realmRoles"===e?v.roles?.realm?.length??0:"clientRoles"===e?V()?D(v.roles.client):0:v[e]?.length??0:0,D=e=>Object.values(e).reduce(((e,t)=>e+t.length),0),z=(e,t)=>l.ZP.createElement(c.LC,{"aria-labelledby":`${e}-list-item`},l.ZP.createElement(c.Vi,null,l.ZP.createElement(c.p9,{dataListCells:[l.ZP.createElement(c.KX,{key:e},l.ZP.createElement(c.XZ,{id:`${e}-checkbox`,label:`${R(e)} ${t}`,"aria-labelledby":`${e}-checkbox`,name:e,isChecked:I[e],onChange:A,"data-testid":e+"-checkbox"}))]}))),$=()=>{const e={ifResourceExists:b,id:v.id,realm:v.realm};return I.users&&(e.users=v.users),I.groups&&(e.groups=v.groups),I.identityProviders&&(e.identityProviders=v.identityProviders),I.clients&&(e.clients=v.clients),(I.realmRoles||I.clientRoles)&&(e.roles=v.roles,I.realmRoles||delete e.roles?.realm,I.clientRoles||delete e.roles?.client),e};return k?l.ZP.createElement(c.u_,{variant:c.vE.medium,title:t("partialImport"),isOpen:e.open,onClose:e.toggleDialog,actions:[l.ZP.createElement(c.zx,{id:"modal-close","data-testid":"close-button",key:"close",variant:c.Wu.primary,onClick:()=>{e.toggleDialog()}},t("common:close"))]},l.ZP.createElement(c.bZ,{variant:"success",isInline:!0,title:`${t("importAdded",{count:k?.added})}  ${t("importSkipped",{count:k?.skipped})} ${t("importOverwritten",{count:k?.overwritten})}`}),l.ZP.createElement(S.B,{loader:async(e=0,t=15)=>{if(!k)return[];const a=Math.min(e+t,k.results.length);return k.results.slice(e,a)},isPaginated:!0,ariaLabelKey:"realm-settings:partialImport",columns:[{name:"action",displayKey:"common:action",cellRenderer:e=>{switch(e.action){case"ADDED":return l.ZP.createElement(c.__,{key:e.id,color:"green"},t("added"));case"SKIPPED":return l.ZP.createElement(c.__,{key:e.id,color:"orange"},t("skipped"));case"OVERWRITTEN":return l.ZP.createElement(c.__,{key:e.id,color:"purple"},t("overwritten"))}}},{name:"resourceType",displayKey:"common:type",cellRenderer:e=>{const a=new Map([["CLIENT",t("common:clients")],["REALM_ROLE",t("common:realmRoles")],["USER",t("common:users")],["CLIENT_ROLE",t("common:clientRoles")],["IDP",t("common:identityProviders")]]);return l.ZP.createElement("span",null,a.get(e.resourceType))}},{name:"resourceName",displayKey:"common:name"},{name:"id",displayKey:"common:id"}]})):l.ZP.createElement(c.u_,{variant:c.vE.medium,title:t("partialImport"),isOpen:e.open,onClose:e.toggleDialog,actions:[l.ZP.createElement(c.zx,{id:"modal-import","data-testid":"import-button",key:"import",isDisabled:!w,onClick:()=>{!async function(){if(!f){Z(!0);try{const e=await a.realms.partialImport({realm:n,rep:$()});C(e)}catch(e){T("realm-settings:importFail",e)}Z(!1)}}()}},t("import")),l.ZP.createElement(c.zx,{id:"modal-cancel","data-testid":"cancel-button",key:"cancel",variant:c.Wu.link,onClick:()=>{e.toggleDialog()}},t("common:cancel"))]},l.ZP.createElement(c.Kq,{hasGutter:!0},l.ZP.createElement(c.vO,null,l.ZP.createElement(c.wu,null,l.ZP.createElement(c.xv,null,t("partialImportHeaderText")))),l.ZP.createElement(c.vO,null,l.ZP.createElement(ae.K,{id:"partial-import-file",allowEditingUploadedText:!0,onChange:K})),m&&(O("users")||O("groups")||O("clients")||O("identityProviders")||B()||V())&&l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.vO,null,l.ZP.createElement(c.iz,null)),Array.isArray(i)&&i.length>1&&l.ZP.createElement(c.vO,null,l.ZP.createElement(c.xv,null,t("selectRealm"),":"),l.ZP.createElement(c.Ph,{toggleId:"realm-selector",isOpen:d,onToggle:()=>p(!d),onSelect:(e,t)=>(y(t),p(!1),void L()),placeholderText:v.realm||v.id},i.map((e=>l.ZP.createElement(c.$m,{key:e.id,value:e,"data-testid":e.id+"-select-option"},e.realm||e.id))))),l.ZP.createElement(c.vO,null,l.ZP.createElement(c.xv,null,t("chooseResources"),":"),l.ZP.createElement(c.FR,{"aria-label":t("resourcesToImport"),isCompact:!0},O("users")&&z("users",t("common:users")),O("groups")&&z("groups",t("common:groups")),O("clients")&&z("clients",t("common:clients")),O("identityProviders")&&z("identityProviders",t("common:identityProviders")),B()&&z("realmRoles",t("common:realmRoles")),V()&&z("clientRoles",t("common:clientRoles")))),l.ZP.createElement(c.vO,null,l.ZP.createElement(c.xv,null,t("selectIfResourceExists"),":"),l.ZP.createElement(c.Ph,{isOpen:P,direction:"up",onToggle:()=>{E(!P)},onSelect:M,placeholderText:t(b)},[l.ZP.createElement(c.$m,{key:"fail",value:"FAIL"},t("FAIL")),l.ZP.createElement(c.$m,{key:"skip",value:"SKIP"},t("SKIP")),l.ZP.createElement(c.$m,{key:"overwrite",value:"OVERWRITE"},t("OVERWRITE"))])))))};var re=a(9612);const ie=({isOpen:e,onClose:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{realm:n}=(0,u.PL)(),{adminClient:i}=(0,r.K3)(),{addAlert:s,addError:m}=(0,g.Z7)(),[d,p]=(0,l.eJ)(!1),[P,f]=(0,l.eJ)(!1),[Z,b]=(0,l.eJ)(!1),h=d||P;return l.ZP.createElement(c.u_,{variant:c.vE.small,title:a("partialExport"),isOpen:e,onClose:t,actions:[l.ZP.createElement(c.zx,{key:"export","data-testid":"export-button",isDisabled:Z,onClick:async function(){b(!0);try{const e=await i.realms.export({realm:n,exportClients:P,exportGroupsAndRoles:d});re.Z.saveAs(new Blob([(0,E.tR)(e)],{type:"application/json"}),"realm-export.json"),s(a("exportSuccess"),c.Ux.success),t()}catch(e){m("exportFail",e)}b(!1)}},a("common:export")),l.ZP.createElement(c.zx,{key:"cancel","data-testid":"cancel-button",variant:c.Wu.link,onClick:t},a("common:cancel"))]},l.ZP.createElement(c.wu,null,l.ZP.createElement(c.xv,null,a("partialExportHeaderText"))),l.ZP.createElement(c.l0,{isHorizontal:!0,className:"keycloak__realm-settings__partial-import_form"},l.ZP.createElement(c.cw,{label:a("includeGroupsAndRoles"),fieldId:"include-groups-and-roles-check",hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"include-groups-and-roles-check","data-testid":"include-groups-and-roles-check",isChecked:d,onChange:p,label:a("common:on"),labelOff:a("common:off")})),l.ZP.createElement(c.cw,{label:a("includeClients"),fieldId:"include-clients-check",hasNoPaddingTop:!0},l.ZP.createElement(c.rs,{id:"include-clients-check","data-testid":"include-clients-check",onChange:f,isChecked:P,label:a("common:on"),labelOff:a("common:off")}))),h&&l.ZP.createElement(c.bZ,{"data-testid":"warning-message",variant:"warning",title:a("exportWarningTitle"),isInline:!0},a("exportWarningDescription")))};var se=a(4607);const oe=({handleModalToggle:e,save:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{register:n,handleSubmit:r,formState:{errors:i}}=(0,s.cI)();return l.ZP.createElement(c.u_,{variant:c.vE.small,title:a("addMessageBundle"),isOpen:!0,onClose:e,actions:[l.ZP.createElement(c.zx,{"data-testid":"add-bundle-confirm-button",key:"confirm",variant:"primary",type:"submit",form:"bundle-form"},a("common:create")),l.ZP.createElement(c.zx,{id:"modal-cancel","data-testid":"cancel",key:"cancel",variant:c.Wu.link,onClick:()=>{e()}},a("common:cancel"))]},l.ZP.createElement(c.l0,{id:"bundle-form",isHorizontal:!0,onSubmit:r(t)},l.ZP.createElement(c.cw,{label:a("common:key"),name:"key",fieldId:"key-id",helperTextInvalid:a("common:required"),validated:i.key?c.LD.error:c.LD.default,isRequired:!0},l.ZP.createElement(h.F,{"data-testid":"key-input",ref:n({required:!0}),autoFocus:!0,type:"text",id:"key-id",name:"key",validated:i.key?c.LD.error:c.LD.default})),l.ZP.createElement(c.cw,{label:a("common:value"),name:"add-value",fieldId:"value-id",helperTextInvalid:a("common:required"),validated:i.value?c.LD.error:c.LD.default,isRequired:!0},l.ZP.createElement(h.F,{"data-testid":"value-input",ref:n({required:!0}),type:"text",id:"value-id",name:"value",validated:i.value?c.LD.error:c.LD.default}))))};var ce,me,de=a(7173),ue=a(2688),pe=a(6853),Pe=a(7973);(me=ce||(ce={})).Save="save",me.Cancel="cancel",me.Edit="edit";const ge=({save:e,realm:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{adminClient:n}=(0,r.K3)(),[i,m]=(0,l.eJ)(!1),[d,p]=(0,l.eJ)(!1),[P,h]=(0,l.eJ)(!1),[y,k]=(0,l.eJ)(!1),[C,T]=(0,l.eJ)(de.ZW),{setValue:S,getValues:x,control:L,handleSubmit:N,formState:K}=(0,s.cI)({shouldUnregister:!1}),[A,M]=(0,l.eJ)(!1),[O,B]=(0,l.eJ)([]),[V,R]=(0,l.eJ)([]),D=(0,w.tN)().themes,z=(0,s.cI)({mode:"onChange"}),{addAlert:$,addError:F}=(0,g.Z7)(),{realm:U}=(0,u.PL)(),{whoAmI:J}=(0,v.kA)(),G=()=>{(0,E.Fz)(t,S),0===t.supportedLocales?.length&&S("supportedLocales",[de.ZW])};(0,l.d4)(G,[]);const W=(0,s.qo)({control:L,name:"supportedLocales",defaultValue:[de.ZW]}),Q=(0,s.qo)({control:L,name:"internationalizationEnabled",defaultValue:!1}),[q,_]=(0,l.eJ)(0),[j,Y]=(0,l.eJ)(10),[X,ee]=(0,l.eJ)(0),[te,ae]=(0,l.eJ)(""),le=()=>{_(q+1)};(0,r.ib)((async()=>{let e=await n.realms.getRealmLocalizationTexts({first:X,max:j,realm:t.realm,selectedLocale:C||x("defaultLocale")||J.getLocale()}).catch((()=>[]));const a=t=>Object.entries(e).filter((e=>e[t].includes(te)));if(te){const t=(0,H.sv)(a(0).concat(a(1)),H.Xy);e=Object.fromEntries(t)}return{result:e}}),(({result:e})=>{const t=Object.entries(e).slice(X,X+j+1);B(t);const n=t.map((e=>({rowEditBtnAriaLabel:()=>a("rowEditBtnAriaLabel",{messageBundle:e[1]}),rowSaveBtnAriaLabel:()=>a("rowSaveBtnAriaLabel",{messageBundle:e[1]}),rowCancelBtnAriaLabel:()=>a("rowCancelBtnAriaLabel",{messageBundle:e[1]}),cells:[{title:(t,a,n,r)=>l.ZP.createElement(ue.QF,{value:t,rowIndex:a,cellIndex:n,props:r,isDisabled:!0,handleTextInputChange:ne,inputAriaLabel:e[0]}),props:{value:e[0]}},{title:(t,a,n,r)=>l.ZP.createElement(ue.QF,{value:t,rowIndex:a,cellIndex:n,props:r,handleTextInputChange:ne,inputAriaLabel:e[1]}),props:{value:e[1]}}]})));return R(n),t}),[q,te,X,j]);const ne=(e,t,a,l)=>{R((t=>{const n=(0,H.Xh)(t),r=n[a]?.cells?.[l];return r.props.editableValue=e,n}))},re=()=>{m(!i)},ie=[l.ZP.createElement(c.DI,{label:a("defaultLocale"),key:"group1"},l.ZP.createElement(c.$m,{key:de.ZW,value:de.ZW},a(`allSupportedLocales.${de.ZW}`))),l.ZP.createElement(c.iz,{key:"divider"}),l.ZP.createElement(c.DI,{label:a("supportedLocales"),key:"group2"},W.filter((e=>e!==t.defaultLocale)).map((e=>l.ZP.createElement(c.$m,{key:e,value:e},a(`allSupportedLocales.${e}`)))))];return l.ZP.createElement(l.ZP.Fragment,null,i&&l.ZP.createElement(oe,{handleModalToggle:re,save:e=>{(async e=>{try{await n.realms.addLocalization({realm:U,selectedLocale:C||x("defaultLocale")||de.ZW,key:e.key},e.value),n.setConfig({realmName:U}),le(),$(a("addMessageBundleSuccess"),c.Ux.success)}catch(e){F(a("addMessageBundleError"),e)}})(e),re()},form:z}),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(f.N,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:N(e)},l.ZP.createElement(c.cw,{label:a("internationalization"),fieldId:"kc-internationalization",labelIcon:l.ZP.createElement(Z.B,{helpText:"realm-settings-help:internationalization",fieldLabelId:"realm-settings:internationalization"})},l.ZP.createElement(s.Qr,{name:"internationalizationEnabled",control:L,defaultValue:!1,render:({onChange:e,value:t})=>l.ZP.createElement(c.rs,{id:"kc-l-internationalization",label:a("common:enabled"),labelOff:a("common:disabled"),isChecked:Q,"data-testid":t?"internationalization-enabled":"internationalization-disabled",onChange:e})})),Q&&l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.cw,{label:a("supportedLocales"),fieldId:"kc-l-supported-locales"},l.ZP.createElement(s.Qr,{name:"supportedLocales",control:L,defaultValue:[de.ZW],render:({onChange:e,value:t})=>l.ZP.createElement(c.Ph,{toggleId:"kc-l-supported-locales",onToggle:e=>{p(e)},onSelect:(a,l)=>{const n=l;t.includes(n)?e(t.filter((e=>e!==n||n===de.ZW))):e([...t,n])},onClear:()=>{e([de.ZW])},selections:t,variant:c.TM.typeaheadMulti,"aria-label":a("supportedLocales"),isOpen:d,placeholderText:a("selectLocales")},D.login[0].locales.map((e=>l.ZP.createElement(c.$m,{selected:t.includes(e),key:e,value:e},a(`allSupportedLocales.${e}`)))))})),l.ZP.createElement(c.cw,{label:a("defaultLocale"),fieldId:"kc-l-default-locale"},l.ZP.createElement(s.Qr,{name:"defaultLocale",control:L,defaultValue:de.ZW,render:({onChange:e,value:n})=>l.ZP.createElement(c.Ph,{toggleId:"kc-default-locale",onToggle:()=>h(!P),onSelect:(t,a)=>{e(a),h(!1)},selections:n?a(`allSupportedLocales.${n}`):""!==t.defaultLocale?a(`allSupportedLocales.${t.defaultLocale||de.ZW}`):a("placeholderText"),variant:c.TM.single,"aria-label":a("defaultLocale"),isOpen:P,placeholderText:a("placeholderText"),"data-testid":"select-default-locale"},W.map(((e,t)=>l.ZP.createElement(c.$m,{key:`default-locale-${t}`,value:e},a(`allSupportedLocales.${e}`)))))}))),l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",isDisabled:!K.isDirty,type:"submit","data-testid":"localization-tab-save"},a("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:G},a("common:revert")))),l.ZP.createElement(b.b,{className:"kc-message-bundles",title:"Edit message bundles"},l.ZP.createElement(c.wu,{className:"messageBundleDescription"},a("messageBundleDescription")),l.ZP.createElement("div",{className:"tableBorder"},l.ZP.createElement(pe.a,{count:O.length,first:X,max:j,onNextClick:ee,onPreviousClick:ee,onPerPageSelect:(e,t)=>{ee(e),Y(t)},inputGroupName:"common:search",inputGroupOnEnter:e=>{ae(e),ee(0),Y(10)},inputGroupPlaceholder:a("searchForMessageBundle"),toolbarItem:l.ZP.createElement(c.zx,{"data-testid":"add-bundle-button",onClick:()=>m(!0)},a("addMessageBundle")),searchTypeComponent:l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.Ph,{width:180,"data-testid":"filter-by-locale-select",isOpen:y,className:"kc-filter-by-locale-select",variant:c.TM.single,isDisabled:!Q,onToggle:e=>k(e),onSelect:(e,t)=>{T(t.toString()),M(!0),le(),k(!1)},selections:A?a(`allSupportedLocales.${C}`):""!==t.defaultLocale?a(`allSupportedLocales.${de.ZW}`):a("placeholderText")},ie))},0===O.length&&!te&&l.ZP.createElement(I.M,{hasIcon:!0,message:a("noMessageBundles"),instructions:a("noMessageBundlesInstructions"),onPrimaryAction:re}),0===O.length&&te&&l.ZP.createElement(I.M,{hasIcon:!0,icon:Pe.W1,isSearchVariant:!0,message:a("common:noSearchResults"),instructions:a("common:noSearchResultsInstructions")}),0!==O.length&&l.ZP.createElement(ue.iA,{"aria-label":a("editableRowsTable"),"data-testid":"editable-rows-table",variant:ue.BZ.compact,cells:[a("common:key"),a("common:value")],rows:V,onRowEdit:(e,l,r,i,s)=>(async(e,l,r)=>{if(void 0===l)return;const i=(0,H.Xh)(V);let s;const o=!!r&&Object.keys(r).length>0;if(s=o?(0,ue.Ni)(i[l],e,r):e===ce.Cancel?(0,ue.Pj)(i[l]):(0,ue.V6)(i[l],e),i[l]=s,!o&&e===ce.Save){const e=s.cells?.[0].props.value,l=s.cells?.[1].props.value;try{await n.realms.addLocalization({realm:t.realm,selectedLocale:C||x("defaultLocale")||de.ZW,key:e},l),$(a("updateMessageBundleSuccess"),c.Ux.success)}catch(e){$(a("updateMessageBundleError"),c.Ux.danger)}}R(i)})(l,i,s)},l.ZP.createElement(ue.xD,null),l.ZP.createElement(ue.RM,null)))))))};var Ee=a(9035),fe=a(4836),Ze=a(248),be=a(8326),he=a(904);const ve=()=>{const{t:e}=(0,o.$G)("realm-settings"),[t,a]=(0,fe.Z)(),[s,d]=(0,fe.Z)(),[p,P]=(0,l.eJ)(),[E,f]=(0,l.eJ)([]),[Z,b]=(0,l.eJ)(0),[h,v]=(0,l.eJ)(0),y=()=>v(h+1),{adminClient:k}=(0,r.K3)(),{realm:C}=(0,u.PL)(),{addAlert:T,addError:x}=(0,g.Z7)(),{enabled:w}=(0,he.yD)();(0,r.ib)((()=>k.realms.getDefaultGroups({realm:C})),(e=>{P(e),b(Z+1)}),[h]);const[L,N]=(0,m.W)({titleKey:e("removeConfirmTitle",{count:E.length}),messageKey:e("removeConfirm",{count:E.length}),continueButtonLabel:"common:delete",continueButtonVariant:c.Wu.danger,onConfirm:async()=>{try{await Promise.all(E.map((e=>k.realms.removeDefaultGroup({realm:C,id:e.id})))),T(e("groupRemove",{count:E.length}),c.Ux.success),f([])}catch(e){x("realm-settings:groupRemoveError",e)}y()}});return p?l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(N,null),s&&l.ZP.createElement(be.p,{type:"selectMany",text:{title:"realm-settings:addDefaultGroups",ok:"common:add"},onConfirm:t=>{(async t=>{try{await Promise.all(t.map((e=>k.realms.addDefaultGroup({realm:C,id:e.id})))),T(e("defaultGroupAdded",{count:t.length}),c.Ux.success)}catch(e){x("realm-settings:defaultGroupAddedError",e)}y()})(t||[]),d()},onClose:d}),w&&l.ZP.createElement(c.J2,{bodyContent:l.ZP.createElement(o.cC,{i18nKey:"realm-settings-help:defaultGroups"}," ",l.ZP.createElement(i.rU,{to:(0,Ze.d)({realm:C})}),".")},l.ZP.createElement(c.wu,{className:"keycloak__section_intro__help",style:{paddingLeft:"var(--pf-c-page__main-section--PaddingLeft)"}},l.ZP.createElement(c.xv,null,l.ZP.createElement(Pe.pT,null)," ",e("whatIsDefaultGroups")))),l.ZP.createElement(S.B,{key:Z,canSelectAll:!0,onSelect:e=>f([...e]),loader:()=>Promise.resolve(p),ariaLabelKey:"realm-settings:defaultGroups",searchPlaceholderKey:"realm-settings:searchForGroups",toolbarItem:l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.zx,{"data-testid":"openCreateGroupModal",variant:"primary",onClick:d},e("addGroups"))),l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.Lt,{toggle:l.ZP.createElement(c.ax,{onToggle:a,isDisabled:0===E.length}),isOpen:t,isPlain:!0,dropdownItems:[l.ZP.createElement(c.hP,{key:"action",component:"button",onClick:()=>{L(),a()}},e("common:remove"))]}))),actions:[{title:e("common:remove"),onRowClick:e=>(f([e]),L(),Promise.resolve(!1))}],columns:[{name:"name",displayKey:"groups:groupName"},{name:"path",displayKey:"groups:path"}],emptyState:l.ZP.createElement(I.M,{hasIcon:!0,message:e("noDefaultGroups"),instructions:l.ZP.createElement(o.cC,{i18nKey:"realm-settings:noDefaultGroupsInstructions"}," ",l.ZP.createElement(i.rU,{to:(0,Ze.d)({realm:C})}),"Add groups..."),primaryActionText:e("addGroups"),onPrimaryAction:d})})):l.ZP.createElement(n.g,null)},ye=()=>{const{t:e}=(0,o.$G)("realm-settings"),[t,a]=(0,l.eJ)(),[i,s]=(0,l.eJ)(10),[m,d]=(0,l.eJ)(0),{adminClient:p}=(0,r.K3)(),{realm:P}=(0,u.PL)();return(0,r.ib)((()=>p.realms.findOne({realm:P})),a,[]),t?l.ZP.createElement(c.mQ,{activeKey:i,onSelect:(e,t)=>s(t)},l.ZP.createElement(c.OK,{key:m,id:"roles",eventKey:10,title:l.ZP.createElement(c.TP,null,e("defaultRoles"))},l.ZP.createElement(Ee.u,{parentRole:{...t.defaultRole,attributes:[]},refresh:()=>d(m+1)})),l.ZP.createElement(c.OK,{id:"groups",eventKey:20,title:l.ZP.createElement(c.TP,null,e("defaultGroups"))},l.ZP.createElement(ve,null))):l.ZP.createElement(n.g,null)};var ke=a(1748),Ce=a(5256),Te=a(9176),Se=a(9310),Ie=a(70),xe=a(1273),we=a(8437);const Le=()=>{const{config:e,save:t}=(0,we.Gr)(),{t:a}=(0,o.$G)("attributes-group"),n=(0,i.k6)(),{realm:r}=(0,u.PL)(),[s,d]=(0,l.eJ)(0),[p,P]=(0,l.eJ)();(0,l.d4)((()=>d((e=>e+1))),[e]);const[g,E]=(0,m.W)({titleKey:"attributes-group:deleteDialogTitle",children:l.ZP.createElement(o.cC,{i18nKey:"attributes-group:deleteDialogDescription"}," ",l.ZP.createElement("strong",null,{group:p?.name}),"."),continueButtonLabel:"common:delete",continueButtonVariant:c.Wu.danger,onConfirm(){const a=(e?.groups??[]).filter((e=>e!==p));t({...e,groups:a},{successMessageKey:"attributes-group:deleteSuccess",errorMessageKey:"attributes-group:deleteError"})}});return l.ZP.createElement(c.NP,{variant:"light",className:"pf-u-p-0"},l.ZP.createElement(E,null),l.ZP.createElement(S.B,{key:s,loader:async function(){return e?.groups??[]},ariaLabelKey:"attributes-group:tableTitle",toolbarItem:l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.zx,{component:e=>l.ZP.createElement(i.rU,{...e,to:(0,xe.m)({realm:r})})},a("createGroupText"))),columns:[{name:"name",displayKey:"attributes-group:columnName",cellRenderer:e=>l.ZP.createElement(i.rU,{to:(0,Ie.w)({realm:r,name:e.name})},e.name)},{name:"displayHeader",displayKey:"attributes-group:columnDisplayName"},{name:"displayDescription",displayKey:"attributes-group:columnDisplayDescription"}],actions:[{title:a("common:delete"),onRowClick:function(e){P(e),g()}}],emptyState:l.ZP.createElement(I.M,{message:a("emptyStateMessage"),instructions:a("emptyStateInstructions"),primaryActionText:a("createGroupText"),onPrimaryAction:()=>n.push((0,xe.m)({realm:r}))})}))};var Ne=a(9315),Ke=a(1537),Ae=a(4224);const Me=["username","email"],Oe=()=>{const{config:e,save:t}=(0,we.Gr)(),{realm:a}=(0,u.PL)(),{t:r}=(0,o.$G)("realm-settings"),s=(0,i.k6)(),[d,p]=(0,l.eJ)("allGroups"),[P,g]=(0,fe.Z)(),[E,f]=(0,l.eJ)(e?.attributes),[Z,b]=(0,l.eJ)(""),h=e?.attributes.filter((e=>e.name!==Z)),[v,y]=(0,m.W)({titleKey:r("deleteAttributeConfirmTitle"),messageKey:r("deleteAttributeConfirm",{attributeName:Z}),continueButtonLabel:r("common:delete"),continueButtonVariant:c.Wu.danger,onConfirm:async()=>{t({attributes:h},{successMessageKey:"realm-settings:deleteAttributeSuccess",errorMessageKey:"realm-settings:deleteAttributeError"}),b("")}});return e?.attributes?l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(c.o8,null,l.ZP.createElement(c.c_,null,l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.Ph,{width:200,"data-testid":"filter-select",isOpen:P,variant:c.TM.single,onToggle:g,toggleIcon:l.ZP.createElement(Pe.k1,null),onSelect:(t,a)=>{const l=a.toString();p(l),f("allGroups"===l?e.attributes:e.attributes?.filter((e=>e.group===l))),g()},selections:"allGroups"===d?r(d):d},[l.ZP.createElement(c.$m,{key:"allGroups","data-testid":"all-groups",value:"allGroups"},r("allGroups")),...e.attributes.filter((e=>!!e.group)).map((e=>l.ZP.createElement(c.$m,{key:e.group,"data-testid":`${e.group}-option`,value:e.group})))])),l.ZP.createElement(c.Eg,{className:"kc-toolbar-attributesTab"},l.ZP.createElement(c.zx,{"data-testid":"createAttributeBtn",variant:"primary",component:e=>l.ZP.createElement(i.rU,{...e,to:(0,Ke.l)({realm:a})})},r("createAttribute"))))),l.ZP.createElement(c.iz,null),l.ZP.createElement(y,null),l.ZP.createElement(Ne.L,{keyField:"name",onDragFinish:async(a,l)=>{const n=e.attributes.map((e=>e.name)),r=l.indexOf(a),i=n.indexOf(a),s=e.attributes[i];s.name&&(async(a,l)=>{const n=e?.attributes.findIndex((e=>e.name===a.name));let r={};r=e?.attributes[n],e?.attributes.splice(n,1),e?.attributes.splice(l,0,r),t({attributes:e?.attributes},{successMessageKey:"realm-settings:updatedUserProfileSuccess",errorMessageKey:"realm-settings:updatedUserProfileError"})})(s,r)},actions:[{title:r("common:edit"),onClick:(e,t,l)=>{s.push((0,Ae.T)({realm:a,attributeName:l.name}))}},{title:r("common:delete"),isActionable:({name:e})=>!Me.includes(e),onClick:(e,t,a)=>{b(a.name),v()}}],columns:[{name:"name",displayKey:r("attributeName"),cellRenderer:e=>l.ZP.createElement(i.rU,{to:(0,Ae.T)({realm:a,attributeName:e.name}),key:e.name},e.name)},{name:"displayName",displayKey:r("attributeDisplayName")},{name:"group",displayKey:r("attributeGroup")}],data:E||e.attributes})):l.ZP.createElement(n.g,null)},Be=()=>{const{config:e,save:t,isSaving:a}=(0,we.Gr)(),{t:n}=(0,o.$G)(),{addError:r}=(0,g.Z7)(),[i,s]=(0,l.eJ)();function m(){i?.setValue(e?(0,E.tR)(e):"")}return(0,l.d4)((()=>m()),[e,i]),l.ZP.createElement(c.NP,{variant:"light"},l.ZP.createElement(Q.p,{language:Q.S.json,height:"30rem",onEditorDidMount:e=>s(e),isLanguageLabelVisible:!0}),l.ZP.createElement(c.l0,null,l.ZP.createElement(c.WK,null,l.ZP.createElement(c.zx,{variant:"primary",onClick:function(){const e=i?.getValue();if(e)try{t(JSON.parse(e))}catch(e){return void r("realm-settings:invalidJsonError",e)}},isDisabled:a},n("common:save")),l.ZP.createElement(c.zx,{variant:"link",onClick:m,isDisabled:a},n("common:revert")))))},Ve=()=>{const{realm:e}=(0,u.PL)(),{t}=(0,o.$G)("realm-settings"),a=(0,i.k6)();return l.ZP.createElement(we.XP,null,l.ZP.createElement(d.U,{defaultLocation:(0,Se.e)({realm:e,tab:"attributes"}),mountOnEnter:!0},l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,t("attributes")),"data-testid":"attributesTab",...(0,d.w)({to:(0,Se.e)({realm:e,tab:"attributes"}),history:a})},l.ZP.createElement(Oe,null)),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,t("attributesGroup")),"data-testid":"attributesGroupTab",...(0,d.w)({to:(0,Se.e)({realm:e,tab:"attributes-group"}),history:a})},l.ZP.createElement(Le,null)),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,t("jsonEditor")),"data-testid":"jsonEditorTab",...(0,d.w)({to:(0,Se.e)({realm:e,tab:"json-editor"}),history:a})},l.ZP.createElement(Be,null))))};var Re=a(1347);const De=["ACTIVE","PASSIVE","DISABLED"],ze=({onFilter:e})=>{const{t}=(0,o.$G)("realm-settings"),[a,n]=(0,l.eJ)(De[0]),[r,i]=(0,fe.Z)();return l.ZP.createElement(c.Ph,{width:300,"data-testid":"filter-type-select",isOpen:r,className:"kc-filter-type-select",variant:c.TM.single,onToggle:i,toggleIcon:l.ZP.createElement(Pe.k1,null),onSelect:(t,a)=>{const l=De.find((e=>e===a.toString()))||De[0];n(l),e(l),i()},selections:a},De.map((e=>l.ZP.createElement(c.$m,{key:e,"data-testid":`${e}-option`,value:e},t(`keysFilter.${e}`)))))},$e=({realmComponents:e})=>{const{t}=(0,o.$G)("realm-settings"),a=(0,i.k6)(),[s,d]=(0,l.eJ)(""),[p,P]=(0,l.eJ)(""),{adminClient:g}=(0,r.K3)(),{realm:f}=(0,u.PL)(),[Z,b]=(0,l.eJ)(),[h,v]=(0,l.eJ)();(0,r.ib)((async()=>(await g.realms.getKeys({realm:f})).keys?.map((t=>{const a=e.find((e=>e.id===t.providerId));return{...t,provider:a?.name}}))),b,[]);const[y,k]=(0,m.W)({titleKey:t("publicKeys").slice(0,-1),messageKey:s,continueButtonLabel:"common:close",continueButtonVariant:c.Wu.primary,onConfirm:()=>Promise.resolve()}),[C,T]=(0,m.W)({titleKey:t("certificate"),messageKey:p,continueButtonLabel:"common:close",continueButtonVariant:c.Wu.primary,onConfirm:()=>Promise.resolve()});return Z?l.ZP.createElement(c.NP,{variant:"light",padding:{default:"noPadding"}},l.ZP.createElement(k,null),l.ZP.createElement(T,null),l.ZP.createElement(S.B,{isNotCompact:!0,className:"kc-keys-list",loader:h||Z,ariaLabelKey:"realm-settings:keysList",searchPlaceholderKey:"realm-settings:searchKey",searchTypeComponent:l.ZP.createElement(ze,{onFilter:e=>v(e!==De[0]?Z.filter((({status:t})=>t===e)):void 0)}),canSelectAll:!0,columns:[{name:"algorithm",displayKey:"realm-settings:algorithm",cellFormatters:[(0,E.CU)()],transforms:[(0,ue.dY)(15)]},{name:"type",displayKey:"type",cellFormatters:[(0,E.CU)()],transforms:[(0,ue.dY)(10)]},{name:"kid",displayKey:"realm-settings:kid",cellFormatters:[(0,E.CU)()],transforms:[(0,ue.dY)(10)]},{name:"provider",displayKey:"realm-settings:provider",cellRenderer:({provider:e})=>e,cellFormatters:[(0,E.CU)()],transforms:[(0,ue.dY)(10)]},{name:"publicKeys",displayKey:"realm-settings:publicKeys",cellRenderer:({type:e,publicKey:a,certificate:n})=>"EC"===e?l.ZP.createElement(c.zx,{onClick:()=>{y(),d(a)},variant:"secondary",id:"kc-public-key"},t("publicKeys").slice(0,-1)):"RSA"===e?l.ZP.createElement("div",{className:"button-wrapper"},l.ZP.createElement(c.zx,{onClick:()=>{y(),d(a)},variant:"secondary",id:a},t("publicKeys").slice(0,-1)),l.ZP.createElement(c.zx,{onClick:()=>{C(),P(n)},variant:"secondary",id:n,className:"kc-certificate"},t("certificate"))):void 0,cellFormatters:[],transforms:[(0,ue.dY)(20)]}],isSearching:!!h,emptyState:l.ZP.createElement(I.M,{hasIcon:!0,message:t("noKeys"),instructions:t("noKeysDescription"),primaryActionText:t("addProvider"),onPrimaryAction:()=>a.push((0,Re.S)({realm:f,tab:"providers"}))})})):l.ZP.createElement(n.g,null)};var Fe=a(1485);const Ue=({providerType:e,onClose:t})=>{const{t:a}=(0,o.$G)("realm-settings");return l.ZP.createElement(c.u_,{className:"add-provider-modal",variant:c.vE.medium,title:a("addProvider"),isOpen:!0,onClose:t},l.ZP.createElement(Fe.KeyProviderForm,{providerType:e,onClose:t}))},Je=({realmComponents:e,refresh:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{addAlert:n,addError:s}=(0,g.Z7)(),{adminClient:d}=(0,r.K3)(),{realm:p}=(0,u.PL)(),{url:P}=(0,i.$B)(),[f,Z]=(0,l.eJ)(""),[b,h]=(0,l.eJ)([]),[v,y]=(0,fe.Z)(),k=(0,w.tN)().componentTypes?.[E.xk]??[],C=k.map((e=>e.id)),[T,S]=(0,l.eJ)(!1),[I,x]=(0,l.eJ)(),[L,N]=(0,l.eJ)(),K=(0,l.Ye)((()=>e.map((e=>{const t=k.find((t=>e.providerId===t.id));return{...e,providerDescription:t?.helpText}}))),[e]),[A,M]=(0,m.W)({titleKey:"realm-settings:deleteProviderTitle",messageKey:a("deleteProviderConfirm",{provider:L?.name}),continueButtonLabel:"common:delete",continueButtonVariant:c.Wu.danger,onConfirm:async()=>{try{await d.components.del({id:L.id,realm:p}),t(),n(a("deleteProviderSuccess"),c.Ux.success)}catch(e){s("realm-settings:deleteProviderError",e)}}}),O=()=>{if(""!==f){Z(f);const e=K.filter((e=>e.name?.includes(f)||e.providerId?.includes(f)));h(e)}else Z(""),h(K)};return l.ZP.createElement(l.ZP.Fragment,null,v&&I&&l.ZP.createElement(Ue,{providerType:I,onClose:()=>{y(),t()}}),l.ZP.createElement(M,null),l.ZP.createElement(c.NP,{variant:"light",padding:{default:"noPadding"}},l.ZP.createElement(c.o8,null,l.ZP.createElement(c.ki,{className:"providers-toolbar"},l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.BZ,null,l.ZP.createElement(c.oi,{name:"inputGroupName",id:"inputGroupName","data-testid":"provider-search-input",type:"search","aria-label":a("common:search"),placeholder:a("common:search"),onChange:e=>{Z(e)},onKeyDown:e=>{"Enter"===e.key&&O()}}),l.ZP.createElement(c.zx,{variant:c.Wu.control,"aria-label":a("common:search"),onClick:O},l.ZP.createElement(Pe.W1,null)))),l.ZP.createElement(c.Eg,null,l.ZP.createElement(c.Lt,{"data-testid":"addProviderDropdown",className:"add-provider-dropdown",isOpen:T,toggle:l.ZP.createElement(c.Z_,{onToggle:e=>S(e),isPrimary:!0},a("addProvider")),dropdownItems:[C.map((e=>l.ZP.createElement(c.hP,{onClick:()=>{y(),S(!1),x(e)},"data-testid":`option-${e}`,key:e},e)))]})))),l.ZP.createElement(Ne.L,{variant:"compact",className:"kc-draggable-table",keyField:"id",data:0===b.length?K:b,onDragFinish:async(e,l)=>{const r=K.map((e=>{const t={...e};return delete t.providerDescription,d.components.update({id:e.id},{...t,config:{priority:[(l.length-l.indexOf(e.id)+100).toString()]}})}));try{await Promise.all(r),t(),n(a("saveProviderListSuccess"),c.Ux.success)}catch(e){s("realm-settings:saveProviderError",e)}},columns:[{name:"name",displayKey:"realm-settings:name",cellRenderer:e=>l.ZP.createElement(i.rU,{key:e.name,"data-testid":"provider-name-link",to:`${P}/${e.id}/${e.providerId}/settings`},e.name)},{name:"providerId",displayKey:"realm-settings:provider"},{name:"providerDescription",displayKey:"realm-settings:providerDescription"}],actions:[{title:a("common:delete"),onClick:(e,t,a)=>{N(a),A()}}]})))},Ge=()=>{const{t:e}=(0,o.$G)("realm-settings"),t=(0,i.k6)(),{adminClient:a}=(0,r.K3)(),{realm:s}=(0,u.PL)(),[m,p]=(0,l.eJ)(),[P,g]=(0,l.eJ)(0);if((0,r.ib)((()=>a.components.find({type:E.xk,realm:s})),(e=>p((e=>[...e].sort(((e,t)=>{const a=Number(e.config?.priority),l=Number(t.config?.priority);return(isNaN(l)?0:l)-(isNaN(a)?0:a)})))(e))),[P]),!m)return l.ZP.createElement(n.g,null);const f=e=>(0,d.w)({to:(0,Re.S)({realm:s,tab:e}),history:t});return l.ZP.createElement(d.U,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:(0,Re.S)({realm:s,tab:"list"})},l.ZP.createElement(c.OK,{id:"keysList","data-testid":"rs-keys-list-tab","aria-label":"keys-list-subtab",title:l.ZP.createElement(c.TP,null,e("keysList")),...f("list")},l.ZP.createElement($e,{realmComponents:m})),l.ZP.createElement(c.OK,{id:"providers","data-testid":"rs-providers-tab","aria-label":"rs-providers-tab",title:l.ZP.createElement(c.TP,null,e("providers")),...f("providers")},l.ZP.createElement(Je,{realmComponents:m,refresh:()=>{g(P+1)}})))},We=({save:e,onChange:t,value:a,realmName:n,refresh:s})=>{const{t:d}=(0,o.$G)("realm-settings"),{adminClient:u}=(0,r.K3)(),{refresh:f}=(0,p.Ts)(),{addAlert:Z,addError:b}=(0,g.Z7)(),h=(0,i.k6)(),[v,y]=(0,l.eJ)(!1),[k,C]=(0,l.eJ)(!1),[T,S]=(0,m.W)({titleKey:"realm-settings:disableConfirmTitle",messageKey:"realm-settings:disableConfirm",continueButtonLabel:"common:disable",onConfirm:()=>{t(!a),e()}}),[I,x]=(0,m.W)({titleKey:"realm-settings:deleteConfirmTitle",messageKey:"realm-settings:deleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:c.Wu.danger,onConfirm:async()=>{try{await u.realms.del({realm:n}),Z(d("deletedSuccess"),c.Ux.success),await f(),h.push((0,ke.S)({realm:Ce.Z.masterRealm})),s()}catch(e){b("realm-settings:deleteError",e)}}});return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(S,null),l.ZP.createElement(x,null),l.ZP.createElement(ne,{open:v,toggleDialog:()=>y(!v)}),l.ZP.createElement(ie,{isOpen:k,onClose:()=>C(!1)}),l.ZP.createElement(P.t,{titleKey:(0,E.LO)(n),subKey:"realm-settings:realmSettingsExplain",helpUrl:Te.Z.realmSettingsUrl,divider:!1,dropdownItems:[l.ZP.createElement(c.hP,{key:"import","data-testid":"openPartialImportModal",onClick:()=>{y(!0)}},d("partialImport")),l.ZP.createElement(c.hP,{key:"export","data-testid":"openPartialExportModal",onClick:()=>C(!0)},d("partialExport")),l.ZP.createElement(c.Uu,{key:"separator"}),l.ZP.createElement(c.hP,{key:"delete",onClick:I},d("common:delete"))],isEnabled:a,onToggle:a=>{a?(t(a),e()):T()}}))},He=({realm:e,refresh:t})=>{const{t:a}=(0,o.$G)("realm-settings"),{adminClient:n}=(0,r.K3)(),{addAlert:m,addError:P}=(0,g.Z7)(),{realm:f}=(0,u.PL)(),{refresh:Z}=(0,p.Ts)(),b=(0,i.k6)(),h=M(),{control:v,setValue:y,getValues:C}=(0,s.cI)({mode:"onChange",shouldUnregister:!1}),[T,S]=(0,l.eJ)(0),I=()=>{S(T+1)};(0,l.d4)(((t=e)=>{(0,E.Fz)(t,y)}),[]);const x=async l=>{if((l=(0,E.a)(l)).attributes?.["acr.loa.map"]&&"string"!=typeof l.attributes["acr.loa.map"]){const e=JSON.stringify(Object.fromEntries(l.attributes["acr.loa.map"].filter((({key:e})=>""!==e)).map((({key:e,value:t})=>[e,t]))));l.attributes["acr.loa.map"]="{}"!==e?e:"[]"}try{await n.realms.update({realm:f},{...e,...l,id:l.realm}),m(a("saveSuccess"),c.Ux.success)}catch(e){P("realm-settings:saveError",e)}f!==(l.realm||e.realm)&&(await Z(),b.push((0,se.Q)({realm:l.realm,tab:"general"}))),t()},w=(e="general")=>(0,d.w)({to:(0,se.Q)({realm:f,tab:e}),history:b}),L=e=>(0,d.w)({to:(0,ee.G)({realm:f,tab:e}),history:b});return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(s.Qr,{name:"enabled",defaultValue:!0,control:v,render:({onChange:e,value:t})=>l.ZP.createElement(We,{value:t,onChange:e,realmName:f,refresh:I,save:()=>x(C())})}),l.ZP.createElement(c.NP,{variant:"light",className:"pf-u-p-0"},l.ZP.createElement(d.U,{isBox:!0,mountOnEnter:!0,defaultLocation:(0,se.Q)({realm:f,tab:"general"})},l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("general")),"data-testid":"rs-general-tab",...w()},l.ZP.createElement(V,{realm:e,save:x})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("login")),"data-testid":"rs-login-tab",...w("login")},l.ZP.createElement(R,{refresh:t,realm:e})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("email")),"data-testid":"rs-email-tab",...w("email")},l.ZP.createElement(k,{realm:e})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("themes")),"data-testid":"rs-themes-tab",...w("themes")},l.ZP.createElement(G,{realm:e,save:x})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("realm-settings:keys")),"data-testid":"rs-keys-tab",...w("keys")},l.ZP.createElement(Ge,null)),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("events")),"data-testid":"rs-realm-events-tab",...w("events")},l.ZP.createElement(K,null)),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("localization")),"data-testid":"rs-localization-tab",...w("localization")},l.ZP.createElement(ge,{key:T,refresh:t,save:x,realm:e})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("securityDefences")),"data-testid":"rs-security-defenses-tab",...w("security-defenses")},l.ZP.createElement(U,{realm:e,save:x})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("realm-settings:sessions")),"data-testid":"rs-sessions-tab",...w("sessions")},l.ZP.createElement(J,{key:T,realm:e,save:x})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("realm-settings:tokens")),"data-testid":"rs-tokens-tab",...w("tokens")},l.ZP.createElement(W,{save:x,realm:e})),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("realm-settings:clientPolicies")),"data-testid":"rs-clientPolicies-tab",...w("client-policies")},l.ZP.createElement(d.U,{mountOnEnter:!0,defaultLocation:(0,ee.G)({realm:f,tab:"profiles"})},l.ZP.createElement(c.OK,{id:"profiles","data-testid":"rs-policies-clientProfiles-tab","aria-label":a("clientProfilesSubTab"),title:l.ZP.createElement(c.TP,null,a("profiles")),tooltip:l.ZP.createElement(c.u,{content:a("realm-settings:clientPoliciesProfilesHelpText")}),...L("profiles")},l.ZP.createElement(j,null)),l.ZP.createElement(c.OK,{id:"policies","data-testid":"rs-policies-clientPolicies-tab","aria-label":a("clientPoliciesSubTab"),...L("policies"),title:l.ZP.createElement(c.TP,null,a("policies")),tooltip:l.ZP.createElement(c.u,{content:a("realm-settings:clientPoliciesPoliciesHelpText")})},l.ZP.createElement(te,null)))),h(A.DeclarativeUserProfile)&&"true"===e.attributes?.userProfileEnabled&&l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("realm-settings:userProfile")),"data-testid":"rs-user-profile-tab",...w("user-profile")},l.ZP.createElement(Ve,null)),l.ZP.createElement(c.OK,{title:l.ZP.createElement(c.TP,null,a("userRegistration")),"data-testid":"rs-userRegistration-tab",...w("user-registration")},l.ZP.createElement(ye,null)))))};function Qe(){const{adminClient:e}=(0,r.K3)(),{realm:t}=(0,i.UO)(),[a,s]=(0,l.eJ)(),[o,c]=(0,l.eJ)(0);return(0,r.ib)((()=>e.realms.findOne({realm:t})),s,[o]),a?l.ZP.createElement(He,{realm:a,refresh:()=>{c(o+1),s(void 0)}}):l.ZP.createElement(n.g,null)}}}]);