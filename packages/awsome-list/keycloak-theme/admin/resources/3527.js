"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3527],{3527:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I}),n(5623);var l=n(710),a=n(2688),i=n(5863),r=n(3802),c=n(2954),s=n(4326),o=n(9766),m=n(704),d=n(192),u=n(1677),p=n(8798),y=n(764),P=n(8336),E=n(1586),Z=n(7976),k=n(2655);const h=()=>{const{t:e}=(0,r.$G)("clients"),{adminClient:t}=(0,p.K3)(),{addAlert:n,addError:m}=(0,s.Z7)(),{realm:u}=(0,y.PL)(),P=(0,k.Z)(),h=(0,c.k6)(),[K,U]=(0,i.eJ)(),[b,C]=(0,o.W)({titleKey:"clients:tokenDeleteConfirmTitle",messageKey:e("tokenDeleteConfirm",K),continueButtonLabel:"common:delete",continueButtonVariant:l.Wu.danger,onConfirm:async()=>{try{await t.realms.delClientsInitialAccess({realm:u,id:K.id}),n(e("tokenDeleteSuccess"),l.Ux.success),U(void 0)}catch(e){m("tokenDeleteError",e)}}});return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(C,null),i.ZP.createElement(d.B,{key:K?.id,ariaLabelKey:"clients:initialAccessToken",searchPlaceholderKey:"clients:searchInitialAccessToken",loader:async()=>{try{return await t.realms.getClientsInitialAccess({realm:u})}catch(e){return[]}},toolbarItem:i.ZP.createElement(l.zx,{component:e=>i.ZP.createElement(c.rU,{...e,to:(0,Z.P)({realm:u})})},e("common:create")),actions:[{title:e("common:delete"),onRowClick:e=>{U(e),b()}}],columns:[{name:"id",displayKey:"common:id"},{name:"timestamp",displayKey:"clients:timestamp",cellRenderer:e=>P(new Date(1e3*e.timestamp),k.t)},{name:"expiration",displayKey:"clients:expires",cellRenderer:e=>P(new Date(1e3*e.timestamp+1e3*e.expiration),k.t)},{name:"count",displayKey:"clients:count"},{name:"remainingCount",displayKey:"clients:remainingCount",transforms:[a.WT]}],emptyState:i.ZP.createElement(E.M,{message:e("noTokens"),instructions:e("noTokensInstructions"),primaryActionText:e("common:create"),onPrimaryAction:()=>h.push((0,Z.P)({realm:u}))})}))};var K=n(8173),U=n(3413),b=n(5625),C=n(8707),g=n(9176),f=n(8670),w=n(7482),x=n(1832);function I(){const{t:e}=(0,r.$G)("clients"),{addAlert:t,addError:n}=(0,s.Z7)(),{adminClient:E}=(0,p.K3)(),{realm:Z}=(0,y.PL)(),k=(0,c.k6)(),[I,A]=(0,i.eJ)(0),[D,T]=(0,i.eJ)(),{hasAccess:L}=(0,f.md)(),R=L("manage-clients"),[B,v]=(0,o.W)({titleKey:e("clientDelete",{clientId:D?.clientId}),messageKey:"clients:clientDeleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:l.Wu.danger,onConfirm:async()=>{try{await E.clients.del({id:D.id}),t(e("clientDeletedSuccess"),l.Ux.success),A((new Date).getTime())}catch(e){n("clients:clientDeleteError",e)}}}),W=()=>R?i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{component:e=>i.ZP.createElement(c.rU,{...e,to:(0,K.w)({realm:Z})})},e("createClient"))),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{component:e=>i.ZP.createElement(c.rU,{...e,to:(0,b.D)({realm:Z})}),variant:"link"},e("importClient")))):i.ZP.createElement("span",null),$=e=>(0,w.w)({to:(0,x.X)({realm:Z,tab:e}),history:k});return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(u.t,{titleKey:"clients:clientList",subKey:"clients:clientsExplain",helpUrl:g.Z.clientsUrl,divider:!1}),i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(w.U,{mountOnEnter:!0,isBox:!0,defaultLocation:(0,x.X)({realm:Z,tab:"list"})},i.ZP.createElement(l.OK,{"data-testid":"list",title:i.ZP.createElement(l.TP,null,e("clientsList")),...$("list")},i.ZP.createElement(v,null),i.ZP.createElement(d.B,{key:I,loader:async(e,t,n)=>{const l={first:e,max:t};return n&&(l.clientId=n,l.search=!0),await E.clients.find({...l})},isPaginated:!0,ariaLabelKey:"clients:clientList",searchPlaceholderKey:"clients:searchForClient",toolbarItem:i.ZP.createElement(W,null),actionResolver:t=>{const n=t.data,l=[{title:e("common:export"),onClick(){(0,P.M9)(n)}}];return(0,C.WE)(n)||!R&&!n.access?.configure||l.push({title:e("common:delete"),onClick(){T(n),B()}}),l},columns:[{name:"clientId",displayKey:"common:clientId",cellRenderer:t=>i.ZP.createElement(c.rU,{key:t.id,to:(0,U.O)({realm:Z,clientId:t.id,tab:"settings"})},t.clientId,!t.enabled&&i.ZP.createElement(l.Ct,{key:`${t.id}-disabled`,isRead:!0,className:"pf-u-ml-sm"},e("common:disabled")))},{name:"protocol",displayKey:"common:type",cellRenderer:t=>(0,C.K9)(e,t.protocol??"openid-connect")},{name:"description",displayKey:"common:description",transforms:[(0,a.dY)(20)],cellRenderer:e=>i.ZP.createElement(a.cE,{wrapModifier:"truncate"},(0,P.CU)()(e.description))},{name:"baseUrl",displayKey:"clients:homeURL",cellFormatters:[(0,m.H)(),(0,P.CU)()],cellRenderer:e=>!e.rootUrl||e.rootUrl.startsWith("http")&&!e.rootUrl.includes("$")?e.baseUrl:e.rootUrl.replace("${authBaseUrl}",(0,P.mi)(E.baseUrl)).replace("${authAdminUrl}",(0,P.mi)(E.baseUrl))+(e.baseUrl?e.baseUrl.substring(1):"")}]})),i.ZP.createElement(l.OK,{"data-testid":"initialAccessToken",title:i.ZP.createElement(l.TP,null,e("initialAccessToken")),...$("initial-access-token")},i.ZP.createElement(h,null)))))}}}]);