"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8870],{8870:(e,r,a)=>{a.r(r),a.d(r,{default:()=>v});var t=a(5863),l=a(710),n=a(3802),i=a(1576),o=a(4839),d=a(764),s=a(386),c=a(390),m=a(3536),u=a(1786),f=a(8798);const p=({form:e,showSectionHeading:r=!1,showSectionDescription:a=!1})=>{const{t:p}=(0,n.$G)("user-federation"),{t:b}=(0,n.$G)("user-federation-help"),{adminClient:g}=(0,f.K3)(),{realm:P}=(0,d.PL)(),[h,k]=(0,t.eJ)(!1),v=(0,i.qo)({control:e.control,name:"config.allowPasswordAuthentication"});return(0,f.ib)((()=>g.realms.findOne({realm:P})),(r=>e.setValue("parentId",r.id)),[]),t.ZP.createElement(t.ZP.Fragment,null,r&&t.ZP.createElement(m.v,{title:p("requiredSettings"),description:b("kerberosRequiredSettingsDescription"),showDescription:a}),t.ZP.createElement(o.N,{role:"manage-realm",isHorizontal:!0},t.ZP.createElement(l.cw,{label:p("consoleDisplayName"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:consoleDisplayNameHelp",fieldLabelId:"user-federation:consoleDisplayName"}),fieldId:"kc-console-display-name",isRequired:!0,validated:e.errors.name?"error":"default",helperTextInvalid:e.errors.name?.message},t.ZP.createElement(u.F,{hidden:!0,type:"text",id:"kc-console-providerId",name:"providerId",defaultValue:"kerberos",ref:e.register,"aria-label":p("providerId")}),t.ZP.createElement(u.F,{hidden:!0,type:"text",id:"kc-console-providerType",name:"providerType",defaultValue:"org.keycloak.storage.UserStorageProvider",ref:e.register,"aria-label":p("providerType")}),t.ZP.createElement(u.F,{hidden:!0,type:"text",id:"kc-console-parentId",name:"parentId",defaultValue:P,ref:e.register,"aria-label":p("parentId")}),t.ZP.createElement(u.F,{isRequired:!0,type:"text",id:"kc-console-name",name:"name",ref:e.register({required:{value:!0,message:`${p("validateName")}`}}),"data-testid":"kerberos-name",validated:e.errors.name?"error":"default","aria-label":p("consoleDisplayName")})),t.ZP.createElement(l.cw,{label:p("kerberosRealm"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:kerberosRealmHelp",fieldLabelId:"user-federation:kc-kerberos-realm"}),fieldId:"kc-kerberos-realm",isRequired:!0,validated:e.errors.config?.kerberosRealm?.[0]?"error":"default",helperTextInvalid:e.errors.config?.kerberosRealm?.[0].message},t.ZP.createElement(u.F,{isRequired:!0,type:"text",id:"kc-kerberos-realm",name:"config.kerberosRealm[0]",ref:e.register({required:{value:!0,message:`${p("validateRealm")}`}}),"data-testid":"kerberos-realm","aria-label":p("kerberosRealm"),validated:e.errors.config?.kerberosRealm?.[0]?"error":"default"})),t.ZP.createElement(l.cw,{label:p("serverPrincipal"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:serverPrincipalHelp",fieldLabelId:"user-federation:serverPrincipal"}),fieldId:"kc-server-principal",isRequired:!0,validated:e.errors.config?.serverPrincipal?.[0]?"error":"default",helperTextInvalid:e.errors.config?.serverPrincipal?.[0].message},t.ZP.createElement(u.F,{isRequired:!0,type:"text",id:"kc-server-principal",name:"config.serverPrincipal[0]",ref:e.register({required:{value:!0,message:`${p("validateServerPrincipal")}`}}),"data-testid":"kerberos-principal","aria-label":p("kerberosPrincipal"),validated:e.errors.config?.serverPrincipal?.[0]?"error":"default"})),t.ZP.createElement(l.cw,{label:p("keyTab"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:keyTabHelp",fieldLabelId:"user-federation:keyTab"}),fieldId:"kc-key-tab",isRequired:!0,validated:e.errors.config?.keyTab?.[0]?"error":"default",helperTextInvalid:e.errors.config?.keyTab?.[0].message},t.ZP.createElement(u.F,{isRequired:!0,type:"text",id:"kc-key-tab",name:"config.keyTab[0]",ref:e.register({required:{value:!0,message:`${p("validateKeyTab")}`}}),"data-testid":"kerberos-keytab","aria-label":p("kerberosKeyTab"),validated:e.errors.config?.keyTab?.[0]?"error":"default"})),t.ZP.createElement(l.cw,{label:p("debug"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:debugHelp",fieldLabelId:"user-federation:debug"}),fieldId:"kc-debug",hasNoPaddingTop:!0}," ",t.ZP.createElement(i.Qr,{name:"config.debug",defaultValue:["false"],control:e.control,render:({onChange:e,value:r})=>t.ZP.createElement(l.rs,{id:"kc-debug","data-testid":"debug",onChange:r=>e([`${r}`]),isChecked:"true"===r?.[0],label:p("common:on"),labelOff:p("common:off")})})),t.ZP.createElement(l.cw,{label:p("allowPasswordAuthentication"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:allowPasswordAuthenticationHelp",fieldLabelId:"user-federation:allowPasswordAuthentication"}),fieldId:"kc-allow-password-authentication",hasNoPaddingTop:!0},t.ZP.createElement(i.Qr,{name:"config.allowPasswordAuthentication",defaultValue:["false"],control:e.control,render:({onChange:e,value:r})=>t.ZP.createElement(l.rs,{id:"kc-allow-password-authentication","data-testid":"allow-password-authentication",onChange:r=>e([`${r}`]),isChecked:"true"===r?.[0],label:p("common:on"),labelOff:p("common:off")})})),(0,c.Xy)(v,["true"])?t.ZP.createElement(l.cw,{label:p("editMode"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:editModeKerberosHelp",fieldLabelId:"user-federation:editMode"}),isRequired:!0,fieldId:"kc-edit-mode"}," ",t.ZP.createElement(i.Qr,{name:"config.editMode[0]",defaultValue:"READ_ONLY",control:e.control,rules:{required:!0},render:({onChange:e,value:r})=>t.ZP.createElement(l.Ph,{toggleId:"kc-edit-mode",required:!0,onToggle:()=>k(!h),isOpen:h,onSelect:(r,a)=>{e(a),k(!1)},selections:r,variant:l.TM.single},t.ZP.createElement(l.$m,{key:0,value:"READ_ONLY",isPlaceholder:!0}),t.ZP.createElement(l.$m,{key:1,value:"UNSYNCED"}))})):null,t.ZP.createElement(l.cw,{label:p("updateFirstLogin"),labelIcon:t.ZP.createElement(s.B,{helpText:"user-federation-help:updateFirstLoginHelp",fieldLabelId:"user-federation:updateFirstLogin"}),fieldId:"kc-update-first-login",hasNoPaddingTop:!0},t.ZP.createElement(i.Qr,{name:"config.updateProfileFirstLogin",defaultValue:["false"],control:e.control,render:({onChange:e,value:r})=>t.ZP.createElement(l.rs,{id:"kc-update-first-login","data-testid":"update-first-login",onChange:r=>e([`${r}`]),isChecked:"true"===r?.[0],label:p("common:on"),labelOff:p("common:off")})}))))};var b=a(5436),g=a(4326),P=a(2954),h=a(1004),k=a(248);function v(){const{t:e}=(0,n.$G)("user-federation"),r=(0,i.cI)({mode:"onChange"}),a=(0,P.k6)(),{adminClient:o}=(0,f.K3)(),{realm:s}=(0,d.PL)(),{id:c}=(0,P.UO)(),{addAlert:m,addError:u}=(0,g.Z7)();(0,f.ib)((async()=>{if(c)return o.components.findOne({id:c})}),(r=>{if(r)v(r);else if(c)throw new Error(e("common:notFound"))}),[]);const v=e=>{r.reset({...e})},E=async r=>{try{c?await o.components.update({id:c},r):(await o.components.create(r),a.push(`/${s}/user-federation`)),v(r),m(e(c?"saveSuccess":"createSuccess"),l.Ux.success)}catch(e){u("user-federation:"+(c?"saveError":"createError"),e)}};return t.ZP.createElement(t.ZP.Fragment,null,t.ZP.createElement(i.RV,{...r},t.ZP.createElement(h.h,{provider:"Kerberos",save:()=>r.handleSubmit(E)()})),t.ZP.createElement(l.NP,{variant:"light"},t.ZP.createElement(p,{form:r,showSectionHeading:!0})),t.ZP.createElement(l.NP,{variant:"light",isFilled:!0},t.ZP.createElement(b.S,{form:r,showSectionHeading:!0}),t.ZP.createElement(l.l0,{onSubmit:r.handleSubmit(E)},t.ZP.createElement(l.WK,null,t.ZP.createElement(l.zx,{isDisabled:!r.formState.isDirty,variant:"primary",type:"submit","data-testid":"kerberos-save"},e("common:save")),t.ZP.createElement(l.zx,{variant:"link",onClick:()=>a.push((0,k.d)({realm:s})),"data-testid":"kerberos-cancel"},e("common:cancel"))))))}}}]);