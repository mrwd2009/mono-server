"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4701],{4701:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ln}),n(5623);var l=n(710),a=n(7973),r=n(390),i=n(5863),c=n(1576),o=n(3802),s=n(2954),m=n(4326),d=n(9766),u=n(9612),p=n(8798),P=n(9280),E=n(8336),Z=n(904),g=n(386),h=n(4036);const f=({id:e,open:t,toggleDialog:n,protocol:a="openid-connect"})=>{const{adminClient:r}=(0,p.K3)(),{t:c}=(0,o.$G)("common"),{enabled:s}=(0,Z.yD)(),m=(0,P.tN)().clientInstallations[a],[f,b]=(0,i.eJ)(m[m.length-1].id),[y,v]=(0,i.eJ)(""),[I,T]=(0,i.eJ)(!1),k=(0,i.Ye)((()=>m.find((e=>e.id===f))??null),[f]);return(0,p.ib)((async()=>{const t=await r.clients.getInstallationProviders({id:e,providerId:f});return"string"==typeof t?(e=>e.replace(/<PrivateKeyPem>.*<\/PrivateKeyPem>/gs,`<PrivateKeyPem>${c("clients:privateKeyMask")}</PrivateKeyPem>`))(t):(0,E.tR)(t)}),(e=>v(e)),[e,f]),(0,i.d4)((()=>v("")),[e,f]),i.ZP.createElement(d.X,{titleKey:c("clients:downloadAdaptorTitle"),continueButtonLabel:c("download"),onConfirm:()=>{const e=m.find((e=>e.id===f));u.Z.saveAs(new Blob([y],{type:e.mediaType}),e.filename)},open:t,toggleDialog:n,variant:l.vE.medium},i.ZP.createElement(l.l0,null,i.ZP.createElement(l.Kq,{hasGutter:!0},s&&i.ZP.createElement(l.vO,null,i.ZP.createElement(l.bZ,{id:e,title:c("clients:description"),variant:l.Ux.info,isInline:!0},m.find((e=>e.id===f))?.helpText)),i.ZP.createElement(l.vO,null,i.ZP.createElement(l.cw,{fieldId:"type",label:c("clients:formatOption"),labelIcon:i.ZP.createElement(g.B,{helpText:c("clients-help:downloadType"),fieldLabelId:"clients:formatOption"})},i.ZP.createElement(l.Ph,{toggleId:"type",isOpen:I,onToggle:e=>T(e),variant:l.TM.single,value:f,selections:f,onSelect:(e,t)=>{b(t.toString()),T(!1)},"aria-label":"Select Input",menuAppendTo:()=>document.body},m.map((e=>i.ZP.createElement(l.$m,{key:e.id,value:e.id,isSelected:f===e.id},e.displayType)))))),!k?.downloadOnly&&i.ZP.createElement(l.vO,{isFilled:!0},i.ZP.createElement(l.cw,{fieldId:"details",label:c("details"),labelIcon:i.ZP.createElement(g.B,{helpText:c("clients-help:details"),fieldLabelId:"clients:details"})},i.ZP.createElement(h.Q,{id:"details",readOnly:!0,rows:12,resizeOrientation:"vertical",value:y,"aria-label":"text area example"}))))))};function b(e){return(e||"").split("##")}function y(e){return e.join("##")}var v=n(1677),I=n(3172),T=n(764),k=n(1270),x=n(4836),S=n(3328),w=n(4839),C=n(3954);const R="tokenLifespan.never",A="tokenLifespan.expires",L=({id:e,name:t,defaultValue:n,control:a,units:r})=>{const{t:s}=(0,o.$G)("clients"),[m,d]=(0,i.eJ)(!1),[u,p]=(0,i.eJ)(!1),P=()=>p(!0),E=()=>p(!1),Z=e=>"number"==typeof e&&-1!==e||"string"==typeof e&&""!==e&&"-1"!==e||u;return i.ZP.createElement(l.cw,{label:s(e),fieldId:e,labelIcon:i.ZP.createElement(g.B,{helpText:`clients-help:${e}`,fieldLabelId:`clients:${e}`})},i.ZP.createElement(c.Qr,{name:t,defaultValue:n,control:a,render:({onChange:e,value:t})=>i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,null,i.ZP.createElement(l.Ph,{variant:l.TM.single,onToggle:d,isOpen:m,onSelect:(t,n)=>{e(n),d(!1)},selections:[Z(t)?s(A):s(R)]},i.ZP.createElement(l.$m,{value:-1},s(R)),i.ZP.createElement(l.$m,{value:60},s(A)))),i.ZP.createElement(l.JE,null,Z(t)&&i.ZP.createElement(C.uM,{units:r,value:t,onChange:e,onFocus:P,onBlur:E,min:1})))}))};var N=n(6179),O=n(5212);const B=({control:e,save:t,reset:n,protocol:a,hasConfigureAccess:r})=>{const{t:s}=(0,o.$G)("clients"),[m,d]=(0,i.eJ)(!1);return i.ZP.createElement(w.N,{role:"manage-realm",fineGrainedAccess:r,isHorizontal:!0},"openid-connect"!==a&&i.ZP.createElement(l.cw,{label:s("assertionLifespan"),fieldId:"assertionLifespan",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:assertionLifespan",fieldLabelId:"clients:assertionLifespan"})},i.ZP.createElement(c.Qr,{name:"attributes.saml.assertion.lifespan",defaultValue:"",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(C.uM,{units:["minute","day","hour"],value:t,onChange:e})})),"openid-connect"===a&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(L,{id:"accessTokenLifespan",name:"attributes.access.token.lifespan",defaultValue:"",units:["minute","day","hour"],control:e}),i.ZP.createElement(l.cw,{label:s("oAuthMutual"),fieldId:"oAuthMutual",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:oAuthMutual",fieldLabelId:"clients:oAuthMutual"})},i.ZP.createElement(c.Qr,{name:"attributes.tls-client-certificate-bound-access-tokens",defaultValue:!1,control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"oAuthMutual-switch",label:s("common:on"),labelOff:s("common:off"),isChecked:"true"===t,onChange:t=>e(""+t)})})),i.ZP.createElement(l.cw,{label:s("keyForCodeExchange"),fieldId:"keyForCodeExchange",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:keyForCodeExchange",fieldLabelId:"clients:keyForCodeExchange"})},i.ZP.createElement(c.Qr,{name:"attributes.pkce.code.challenge.method",defaultValue:"",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"keyForCodeExchange",variant:l.TM.single,onToggle:d,isOpen:m,onSelect:(t,n)=>{e(n),d(!1)},selections:[t||s("common:choose")]},["","S256","plain"].map((e=>i.ZP.createElement(l.$m,{key:e,value:e},e||s("common:choose")))))})),i.ZP.createElement(l.cw,{label:s("pushedAuthorizationRequestRequired"),fieldId:"pushedAuthorizationRequestRequired",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:pushedAuthorizationRequestRequired",fieldLabelId:"clients:pushedAuthorizationRequestRequired"})},i.ZP.createElement(c.Qr,{name:"attributes.require.pushed.authorization.requests",defaultValue:"false",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"pushedAuthorizationRequestRequired",label:s("common:on"),labelOff:s("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.cw,{label:s("acrToLoAMapping"),fieldId:"acrToLoAMapping",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:acrToLoAMapping",fieldLabelId:"clients:acrToLoAMapping"})},i.ZP.createElement(N.R,{name:"attributes.acr.loa.map"})),i.ZP.createElement(l.cw,{label:s("defaultACRValues"),fieldId:"defaultACRValues",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:defaultACRValues",fieldLabelId:"clients:defaultACRValues"})},i.ZP.createElement(O.B,{name:"attributes.default.acr.values"}))),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"secondary",onClick:t},s("common:save")),i.ZP.createElement(l.zx,{variant:"link",onClick:n},s("common:revert"))))},U=({protocol:e,control:t,save:n,reset:a,hasConfigureAccess:s})=>{const{adminClient:m}=(0,p.K3)(),{t:d}=(0,o.$G)("clients"),[u,P]=(0,i.eJ)([]),[E,Z]=(0,i.eJ)(!1),[h,f]=(0,i.eJ)(!1);return(0,p.ib)((()=>m.authenticationManagement.getFlows()),(e=>{let t=[...e.filter((e=>"client-flow"!==e.providerId))];t=(0,r.MR)(t,[e=>e.alias]),P([i.ZP.createElement(l.$m,{key:"empty",value:""},d("common:choose")),...t.map((e=>i.ZP.createElement(l.$m,{key:e.id,value:e.id},e.alias)))])}),[]),i.ZP.createElement(w.N,{role:"manage-clients",fineGrainedAccess:s,isHorizontal:!0},i.ZP.createElement(l.cw,{label:d("browserFlow"),fieldId:"browserFlow",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:browserFlow",fieldLabelId:"clients:browserFlow"})},i.ZP.createElement(c.Qr,{name:"authenticationFlowBindingOverrides.browser",defaultValue:"",control:t,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"browserFlow",variant:l.TM.single,onToggle:Z,isOpen:E,onSelect:(t,n)=>{e(n),Z(!1)},selections:[t]},u)})),"openid-connect"===e&&i.ZP.createElement(l.cw,{label:d("directGrant"),fieldId:"directGrant",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:directGrant",fieldLabelId:"clients:directGrant"})},i.ZP.createElement(c.Qr,{name:"authenticationFlowBindingOverrides.direct_grant",defaultValue:"",control:t,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"directGrant",variant:l.TM.single,onToggle:f,isOpen:h,onSelect:(t,n)=>{e(n),f(!1)},selections:[t]},u)})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"secondary",onClick:n},d("common:save")),i.ZP.createElement(l.zx,{variant:"link",onClick:a},d("common:revert"))))};var $=n(1786);const _=({save:e,reset:t,hasConfigureAccess:n})=>{const{t:a}=(0,o.$G)("clients"),r=(0,P.tN)().providers,s=r?.clientSignature.providers,m=r?.contentencryption.providers,d=r?.cekmanagement.providers,u=r?.signature.providers,[p,Z]=(0,i.eJ)(!1),[h,f]=(0,i.eJ)(!1),[b,y]=(0,i.eJ)(!1),[v,I]=(0,i.eJ)(!1),[T,k]=(0,i.eJ)(!1),[x,S]=(0,i.eJ)(!1),[C,R]=(0,i.eJ)(!1),[A,L]=(0,i.eJ)(!1),[N,B]=(0,i.eJ)(!1),[U,_]=(0,i.eJ)(!1),[K,F]=(0,i.eJ)(!1),[M,z]=(0,i.eJ)(!1),{control:J,register:G}=(0,c.Gc)(),D=[i.ZP.createElement(l.$m,{key:"empty",value:""},a("common:choose")),...(0,E.eu)(s).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],V=[i.ZP.createElement(l.$m,{key:"empty",value:""},a("common:choose")),...(0,E.eu)(d).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],q=[i.ZP.createElement(l.$m,{key:"unsigned",value:""},a("unsigned")),...(0,E.eu)(u).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],W=[i.ZP.createElement(l.$m,{key:"empty",value:""},a("common:choose")),...(0,E.eu)(m).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],j=[i.ZP.createElement(l.$m,{key:"any",value:"any"},a("common:any")),i.ZP.createElement(l.$m,{key:"none",value:"none"},a("common:none")),...(0,E.eu)(s).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],H=[i.ZP.createElement(l.$m,{key:"any",value:"any"},a("common:any")),...(0,E.eu)(d).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],Q=[i.ZP.createElement(l.$m,{key:"any",value:"any"},a("common:any")),...(0,E.eu)(m).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],Y=[i.ZP.createElement(l.$m,{key:"empty",value:""},a("common:choose")),...(0,E.eu)(u).map((e=>i.ZP.createElement(l.$m,{key:e,value:e})))],X=["not required","request or request_uri","request only","request_uri only"].map((e=>i.ZP.createElement(l.$m,{key:e,value:e},a(`requestObject.${e}`))));return i.ZP.createElement(w.N,{role:"manage-clients",fineGrainedAccess:n,isHorizontal:!0},i.ZP.createElement(l.cw,{label:a("logoUrl"),fieldId:"logoUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:logoUrl",fieldLabelId:"clients:logoUrl"})},i.ZP.createElement($.F,{type:"text",id:"logoUrl",name:"attributes.logoUri","data-testid":"logoUrl",ref:G})),i.ZP.createElement(l.cw,{label:a("policyUrl"),fieldId:"policyUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:policyUrl",fieldLabelId:"clients:policyUrl"})},i.ZP.createElement($.F,{type:"text",id:"policyUrl",name:"attributes.policyUri","data-testid":"policyUrl",ref:G})),i.ZP.createElement(l.cw,{label:a("termsOfServiceUrl"),fieldId:"termsOfServiceUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:termsOfServiceUrl",fieldLabelId:"clients:termsOfServiceUrl"})},i.ZP.createElement($.F,{type:"text",id:"termsOfServiceUrl",name:"attributes.tosUri","data-testid":"termsOfServiceUrl",ref:G})),i.ZP.createElement(l.cw,{label:a("accessTokenSignatureAlgorithm"),fieldId:"accessTokenSignatureAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:accessTokenSignatureAlgorithm",fieldLabelId:"clients:accessTokenSignatureAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.access.token.signed.response.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"accessTokenSignatureAlgorithm",variant:l.TM.single,onToggle:Z,isOpen:p,onSelect:(t,n)=>{e(n),Z(!1)},selections:t},D)})),i.ZP.createElement(l.cw,{label:a("idTokenSignatureAlgorithm"),fieldId:"kc-id-token-signature",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:idTokenSignatureAlgorithm",fieldLabelId:"clients:idTokenSignatureAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.id.token.signed.response.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"idTokenSignatureAlgorithm",variant:l.TM.single,onToggle:f,isOpen:h,onSelect:(t,n)=>{e(n),f(!1)},selections:t},D)})),i.ZP.createElement(l.cw,{label:a("idTokenEncryptionKeyManagementAlgorithm"),fieldId:"idTokenEncryptionKeyManagementAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:idTokenEncryptionKeyManagementAlgorithm",fieldLabelId:"clients:idTokenEncryptionKeyManagementAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.id.token.encrypted.response.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"idTokenEncryptionKeyManagementAlgorithm",variant:l.TM.single,onToggle:y,isOpen:b,onSelect:(t,n)=>{e(n),y(!1)},selections:t},V)})),i.ZP.createElement(l.cw,{label:a("idTokenEncryptionContentEncryptionAlgorithm"),fieldId:"idTokenEncryptionContentEncryptionAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:idTokenEncryptionContentEncryptionAlgorithm",fieldLabelId:"clients:idTokenEncryptionContentEncryptionAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.id.token.encrypted.response.enc",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"idTokenEncryptionContentEncryptionAlgorithm",variant:l.TM.single,onToggle:I,isOpen:v,onSelect:(t,n)=>{e(n),I(!1)},selections:t},W)})),i.ZP.createElement(l.cw,{label:a("userInfoSignedResponseAlgorithm"),fieldId:"userInfoSignedResponseAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:userInfoSignedResponseAlgorithm",fieldLabelId:"clients:userInfoSignedResponseAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.user.info.response.signature.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"userInfoSignedResponseAlgorithm",variant:l.TM.single,onToggle:k,isOpen:T,onSelect:(t,n)=>{e(n),k(!1)},selections:t},q)})),i.ZP.createElement(l.cw,{label:a("requestObjectSignatureAlgorithm"),fieldId:"requestObjectSignatureAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:requestObjectSignatureAlgorithm",fieldLabelId:"clients:requestObjectSignatureAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.request.object.signature.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"requestObjectSignatureAlgorithm",variant:l.TM.single,onToggle:S,isOpen:x,onSelect:(t,n)=>{e(n),S(!1)},selections:t},j)})),i.ZP.createElement(l.cw,{label:a("requestObjectEncryption"),fieldId:"requestObjectEncryption",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:requestObjectEncryption",fieldLabelId:"clients:requestObjectEncryption"})},i.ZP.createElement(c.Qr,{name:"attributes.request.object.encryption.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"requestObjectEncryption",variant:l.TM.single,onToggle:L,isOpen:A,onSelect:(t,n)=>{e(n),L(!1)},selections:t},H)})),i.ZP.createElement(l.cw,{label:a("requestObjectEncoding"),fieldId:"requestObjectEncoding",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:requestObjectEncoding",fieldLabelId:"clients:requestObjectEncoding"})},i.ZP.createElement(c.Qr,{name:"attributes.request.object.encryption.enc",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"requestObjectEncoding",variant:l.TM.single,onToggle:B,isOpen:N,onSelect:(t,n)=>{e(n),B(!1)},selections:t},Q)})),i.ZP.createElement(l.cw,{label:a("requestObjectRequired"),fieldId:"requestObjectRequired",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:requestObjectRequired",fieldLabelId:"clients:requestObjectRequired"})},i.ZP.createElement(c.Qr,{name:"attributes.request.object.required",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"requestObjectRequired",variant:l.TM.single,onToggle:R,isOpen:C,onSelect:(t,n)=>{e(n),R(!1)},selections:t},X)})),i.ZP.createElement(l.cw,{label:a("validRequestURIs"),fieldId:"validRequestURIs",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:validRequestURIs",fieldLabelId:"clients:validRequestURIs"})},i.ZP.createElement(O.B,{name:"attributes.request.uris","aria-label":a("validRequestURIs"),addButtonLabel:"clients:addRequestUri"})),i.ZP.createElement(l.cw,{label:a("authorizationSignedResponseAlg"),fieldId:"authorizationSignedResponseAlg",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:authorizationSignedResponseAlg",fieldLabelId:"clients:authorizationSignedResponseAlg"})},i.ZP.createElement(c.Qr,{name:"attributes.authorization.signed.response.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"authorizationSignedResponseAlg",variant:l.TM.single,onToggle:_,isOpen:U,onSelect:(t,n)=>{e(n),_(!1)},selections:t},Y)})),i.ZP.createElement(l.cw,{label:a("authorizationEncryptedResponseAlg"),fieldId:"authorizationEncryptedResponseAlg",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:authorizationEncryptedResponseAlg",fieldLabelId:"clients:authorizationEncryptedResponseAlg"})},i.ZP.createElement(c.Qr,{name:"attributes.authorization.encrypted.response.alg",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"authorizationEncryptedResponseAlg",variant:l.TM.single,onToggle:F,isOpen:K,onSelect:(t,n)=>{e(n),F(!1)},selections:t},V)})),i.ZP.createElement(l.cw,{label:a("authorizationEncryptedResponseEnc"),fieldId:"authorizationEncryptedResponseEnc",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:authorizationEncryptedResponseEnc",fieldLabelId:"clients:authorizationEncryptedResponseEnc"})},i.ZP.createElement(c.Qr,{name:"attributes.authorization.encrypted.response.enc",defaultValue:"",control:J,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"authorizationEncryptedResponseEnc",variant:l.TM.single,onToggle:z,isOpen:M,onSelect:(t,n)=>{e(n),z(!1)},selections:t},W)})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"secondary",id:"fineGrainSave",onClick:e},a("common:save")),i.ZP.createElement(l.zx,{id:"fineGrainRevert",variant:"link",onClick:t},a("common:revert"))))},K=({control:{register:e},save:t,reset:n})=>{const{t:a}=(0,o.$G)("clients");return i.ZP.createElement(w.N,{role:"manage-realm",isHorizontal:!0},i.ZP.createElement(l.cw,{label:a("assertionConsumerServicePostBindingURL"),fieldId:"assertionConsumerServicePostBindingURL",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:assertionConsumerServicePostBindingURL",fieldLabelId:"clients:assertionConsumerServicePostBindingURL"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"assertionConsumerServicePostBindingURL",name:"attributes.saml_assertion_consumer_url_post"})),i.ZP.createElement(l.cw,{label:a("assertionConsumerServiceRedirectBindingURL"),fieldId:"assertionConsumerServiceRedirectBindingURL",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:assertionConsumerServiceRedirectBindingURL",fieldLabelId:"clients:assertionConsumerServiceRedirectBindingURL"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"assertionConsumerServiceRedirectBindingURL",name:"attributes.saml_assertion_consumer_url_redirect"})),i.ZP.createElement(l.cw,{label:a("logoutServicePostBindingURL"),fieldId:"logoutServicePostBindingURL",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:logoutServicePostBindingURL",fieldLabelId:"clients:logoutServicePostBindingURL"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"logoutServicePostBindingURL",name:"attributes.saml_single_logout_service_url_post"})),i.ZP.createElement(l.cw,{label:a("logoutServiceRedirectBindingURL"),fieldId:"logoutServiceRedirectBindingURL",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:logoutServiceRedirectBindingURL",fieldLabelId:"clients:logoutServiceRedirectBindingURL"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"logoutServiceRedirectBindingURL",name:"attributes.saml_single_logout_service_url_redirect"})),i.ZP.createElement(l.cw,{label:a("logoutServiceArtifactBindingUrl"),fieldId:"logoutServiceArtifactBindingUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:logoutServiceArtifactBindingUrl",fieldLabelId:"clients:logoutServiceArtifactBindingUrl"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"logoutServiceArtifactBindingUrl",name:"attributes.saml_single_logout_service_url_redirect"})),i.ZP.createElement(l.cw,{label:a("artifactBindingUrl"),fieldId:"artifactBindingUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:artifactBindingUrl",fieldLabelId:"clients:artifactBindingUrl"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"artifactBindingUrl",name:"attributes.saml_artifact_binding_url"})),i.ZP.createElement(l.cw,{label:a("artifactResolutionService"),fieldId:"artifactResolutionService",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:artifactResolutionService",fieldLabelId:"clients:artifactResolutionService"})},i.ZP.createElement($.F,{ref:e(),type:"text",id:"artifactResolutionService",name:"attributes.saml_artifact_resolution_service_url"})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"tertiary",onClick:t},a("common:save")),i.ZP.createElement(l.zx,{variant:"link",onClick:n},a("common:revert"))))},F=({control:e,save:t,reset:n,hasConfigureAccess:a})=>{const{t:r}=(0,o.$G)("clients");return i.ZP.createElement(w.N,{role:"manage-realm",fineGrainedAccess:a,isHorizontal:!0},i.ZP.createElement(l.cw,{label:r("excludeSessionStateFromAuthenticationResponse"),fieldId:"excludeSessionStateFromAuthenticationResponse",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:excludeSessionStateFromAuthenticationResponse",fieldLabelId:"clients:excludeSessionStateFromAuthenticationResponse"})},i.ZP.createElement(c.Qr,{name:"attributes.exclude.session.state.from.auth.response",defaultValue:"",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"excludeSessionStateFromAuthenticationResponse-switch",label:r("common:on"),labelOff:r("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.cw,{label:r("useRefreshTokens"),fieldId:"useRefreshTokens",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:useRefreshTokens",fieldLabelId:"clients:useRefreshTokens"})},i.ZP.createElement(c.Qr,{name:"attributes.use.refresh.tokens",defaultValue:"true",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"useRefreshTokens",label:r("common:on"),labelOff:r("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.cw,{label:r("useRefreshTokenForClientCredentialsGrant"),fieldId:"useRefreshTokenForClientCredentialsGrant",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:useRefreshTokenForClientCredentialsGrant",fieldLabelId:"clients:useRefreshTokenForClientCredentialsGrant"})},i.ZP.createElement(c.Qr,{name:"attributes.client_credentials.use_refresh_token",defaultValue:"false",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"useRefreshTokenForClientCredentialsGrant",label:r("common:on"),labelOff:r("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.cw,{label:r("useLowerCaseBearerType"),fieldId:"useLowerCaseBearerType",hasNoPaddingTop:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:useLowerCaseBearerType",fieldLabelId:"clients:useLowerCaseBearerType"})},i.ZP.createElement(c.Qr,{name:"attributes.token.response.type.bearer.lower-case",defaultValue:"false",control:e,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"useLowerCaseBearerType",label:r("common:on"),labelOff:r("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"secondary",onClick:t},r("common:save")),i.ZP.createElement(l.zx,{variant:"link",onClick:n},r("common:revert"))))};var M=n(3413),z=n(2655);const J=({save:e,client:{id:t,adminUrl:n,access:a}})=>{const r="notBefore",d=(0,i.sO)(),{t:u}=(0,o.$G)("clients"),{adminClient:P}=(0,p.K3)(),{realm:E}=(0,T.PL)(),{addAlert:Z}=(0,m.Z7)(),h=(0,z.Z)(),{getValues:f,setValue:b,register:y}=(0,c.Gc)(),v=(t,n)=>{b(r,t),e({messageKey:n})};return(0,i.d4)((()=>{y(r)}),[y]),i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},i.ZP.createElement(o.cC,{i18nKey:"clients-help:notBeforeIntro"},"In order to successfully push setup url on",i.ZP.createElement(s.rU,{to:(0,M.O)({realm:E,clientId:t,tab:"settings"})},u("settings")),"tab")),i.ZP.createElement(w.N,{role:"manage-clients",fineGrainedAccess:a?.configure,isHorizontal:!0},i.ZP.createElement(l.cw,{label:u("notBefore"),fieldId:"kc-not-before",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:notBefore",fieldLabelId:"clients:notBefore"})},i.ZP.createElement(l.BZ,null,i.ZP.createElement($.F,{type:"text",id:"kc-not-before",name:"notBefore",isReadOnly:!0,value:(()=>{const e=f(r);return e>0?h(new Date(1e3*e),z.t):u("common:none")})()}),i.ZP.createElement(l.zx,{id:"setToNow",variant:"control",onClick:()=>{v(Date.now()/1e3,"notBeforeSetToNow")}},u("setToNow")),i.ZP.createElement(l.zx,{id:"clear",variant:"control",onClick:()=>{v(0,"notBeforeNowClear")}},u("clear")))),i.ZP.createElement(l.WK,null,!n&&i.ZP.createElement(l.u,{reference:d,content:u("clients-help:notBeforeTooltip")}),i.ZP.createElement(l.zx,{id:"push",variant:"secondary",onClick:async()=>{const e=await P.clients.pushRevocation({id:t});W(e,"notBeforePush",Z,u)},isAriaDisabled:!n,ref:d},u("push")))))};var G=n(1586),D=n(192);const V=({clientId:e,isOpen:t,onAdded:n,onClose:a})=>{const{t:r}=(0,o.$G)("clients"),{register:s,getValues:d}=(0,c.cI)(),{adminClient:u}=(0,p.K3)(),{addAlert:P,addError:E}=(0,m.Z7)();return i.ZP.createElement(l.u_,{title:r("addNode"),isOpen:t,onClose:a,variant:"small",actions:[i.ZP.createElement(l.zx,{id:"add-node-confirm",key:"confirm",onClick:async()=>{try{const t=d("node");await u.clients.addClusterNode({id:e,node:t}),n(t),P(r("addedNodeSuccess"),l.Ux.success)}catch(e){E("clients:addedNodeFail",e)}a()}},r("common:save")),i.ZP.createElement(l.zx,{id:"add-node-cancel",key:"cancel",variant:l.Wu.link,onClick:()=>a()},r("common:cancel"))]},i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(l.cw,{label:r("nodeHost"),fieldId:"nodeHost"},i.ZP.createElement($.F,{id:"nodeHost",ref:s,name:"node"}))))},q=({save:e,client:{id:t,registeredNodes:n,access:a}})=>{const{t:r}=(0,o.$G)("clients"),{control:s}=(0,c.Gc)(),{adminClient:u}=(0,p.K3)(),{addAlert:P,addError:E}=(0,m.Z7)(),Z=(0,z.Z)(),[h,f]=(0,i.eJ)(n||{}),[b,y]=(0,i.eJ)(!1),[v,I]=(0,i.eJ)(""),[T,k]=(0,i.eJ)(!1),[x,S]=(0,i.eJ)(0),R=()=>S((new Date).getTime()),[A,L]=(0,d.W)({titleKey:"clients:deleteNode",messageKey:r("deleteNodeBody",{node:v}),continueButtonLabel:"common:delete",continueButtonVariant:l.Wu.danger,onConfirm:async()=>{try{await u.clients.deleteClusterNode({id:t,node:v}),f({...Object.keys(h).reduce(((e,t)=>(t!==v&&(e[t]=h[t]),e)),{})}),R(),P(r("deleteNodeSuccess"),l.Ux.success)}catch(e){E("clients:deleteNodeFail",e)}}});return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(w.N,{role:"manage-clients",fineGrainedAccess:a?.configure,isHorizontal:!0},i.ZP.createElement(l.cw,{label:r("nodeReRegistrationTimeout"),fieldId:"kc-node-reregistration-timeout",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:nodeReRegistrationTimeout",fieldLabelId:"clients:nodeReRegistrationTimeout"})},i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,null,i.ZP.createElement(c.Qr,{name:"nodeReRegistrationTimeout",defaultValue:"",control:s,render:({onChange:e,value:t})=>i.ZP.createElement(C.uM,{value:t,onChange:e})})),i.ZP.createElement(l.JE,null,i.ZP.createElement(l.zx,{variant:l.Wu.secondary,onClick:()=>e()},r("common:save")))))),i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(L,null),i.ZP.createElement(V,{clientId:t,isOpen:T,onAdded:e=>{h[e]=Date.now()/1e3,R()},onClose:()=>k(!1)}),i.ZP.createElement(l.Lm,{toggleText:r("registeredClusterNodes"),onToggle:y,isExpanded:b},i.ZP.createElement(D.B,{key:x,ariaLabelKey:"registeredClusterNodes",loader:()=>Promise.resolve(Object.entries(h||{}).map((e=>({host:e[0],registration:e[1]})))),toolbarItem:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{id:"testClusterAvailability",onClick:async()=>{const e=await u.clients.testNodesAvailable({id:t});W(e,"testCluster",P,r)},variant:l.Wu.secondary,isDisabled:0===Object.keys(h).length},r("testClusterAvailability"))),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{id:"registerNodeManually",onClick:()=>k(!0),variant:l.Wu.tertiary},r("registerNodeManually")))),actions:[{title:r("common:delete"),onRowClick:e=>{I(e.host),A()}}],columns:[{name:"host",displayKey:"clients:nodeHost"},{name:"registration",displayKey:"clients:lastRegistration",cellFormatters:[e=>e?Z(new Date(1e3*parseInt(e.toString())),z.t):""]}],emptyState:i.ZP.createElement(G.M,{message:r("noNodes"),instructions:r("noNodesInstructions"),primaryActionText:r("registerNodeManually"),onPrimaryAction:()=>k(!0)})}))))},W=(e,t,n,a)=>{const r=e.successRequests?.length||0,i=e.failedRequests?.length||0;0===r&&0===i?n(a("noAdminUrlSet"),l.Ux.warning):i>0?(n(a(t+"Success",{successNodes:e.successRequests}),l.Ux.success),n(a(t+"Fail",{failedNodes:e.failedRequests}),l.Ux.danger)):n(a(t+"Success",{successNodes:e.successRequests}),l.Ux.success)},j=({save:e,client:t})=>{const{t:n}=(0,o.$G)("clients"),a="openid-connect",{setValue:r,control:s,reset:m}=(0,c.Gc)(),{publicClient:d,attributes:u,protocol:p,authenticationFlowBindingOverrides:P}=t,Z=e=>{const t={};for(const n of e)t[`attributes.${n}`]=u?.[n];m(t)};return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-py-0"},i.ZP.createElement(S.W,{sections:[{title:n("revocation"),isHidden:p!==a,panel:i.ZP.createElement(J,{client:t,save:e})},{title:n("clustering"),isHidden:!d,panel:i.ZP.createElement(q,{client:t,save:e})},{title:n("fineGrainOpenIdConnectConfiguration"),isHidden:p!==a,panel:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},n("clients-help:fineGrainOpenIdConnectConfiguration")),i.ZP.createElement(_,{save:e,reset:()=>(0,E.Fz)(u,((e,t)=>r(`attributes.${e}`,t)))}))},{title:n("openIdConnectCompatibilityModes"),isHidden:p!==a,panel:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},n("clients-help:openIdConnectCompatibilityModes")),i.ZP.createElement(F,{control:s,save:()=>e(),reset:()=>Z(["exclude.session.state.from.auth.response"])}))},{title:n("fineGrainSamlEndpointConfig"),isHidden:p===a,panel:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},n("clients-help:fineGrainSamlEndpointConfig")),i.ZP.createElement(K,{control:s,save:()=>e(),reset:()=>(0,E.Fz)(u,((e,t)=>r(`attributes.${e}`,t)))}))},{title:n("advancedSettings"),panel:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},n("clients-help:advancedSettings"+(0,E.LO)(p||""))),i.ZP.createElement(B,{protocol:p,control:s,save:()=>e(),reset:()=>{Z(["saml.assertion.lifespan","access.token.lifespan","tls.client.certificate.bound.access.tokens","pkce.code.challenge.method"])}}))},{title:n("authenticationOverrides"),panel:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.xv,{className:"pf-u-pb-lg"},n("clients-help:authenticationOverrides")),i.ZP.createElement(U,{protocol:p,control:s,save:()=>e(),reset:()=>{r("authenticationFlowBindingOverrides.browser",P?.browser),r("authenticationFlowBindingOverrides.direct_grant",P?.direct_grant)}}))}],borders:!0}))};var H=n(9985),Q=n(9969);const Y=({name:e,label:t})=>{const{t:n}=(0,o.$G)("clients"),{control:a}=(0,c.Gc)();return i.ZP.createElement(l.cw,{hasNoPaddingTop:!0,label:n(t),fieldId:t,labelIcon:i.ZP.createElement(g.B,{helpText:n(`clients-help:${t}`),fieldLabelId:`clients:${t}`})},i.ZP.createElement(c.Qr,{name:e,defaultValue:"false",control:a,render:({onChange:a,value:r})=>i.ZP.createElement(l.rs,{id:e,"data-testid":t,label:n("common:on"),labelOff:n("common:off"),isChecked:"true"===r,onChange:e=>a(e.toString())})}))},X=()=>{const{t:e}=(0,o.$G)("clients"),{control:t}=(0,c.Gc)(),[n,a]=(0,i.eJ)(!1);return i.ZP.createElement(w.N,{isHorizontal:!0,role:"manage-clients",className:"keycloak__capability-config__form"},i.ZP.createElement(l.cw,{label:e("nameIdFormat"),fieldId:"nameIdFormat",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:nameIdFormat",fieldLabelId:"clients:nameIdFormat"})},i.ZP.createElement(c.Qr,{name:"attributes.saml_name_id_format",defaultValue:"username",control:t,render:({onChange:t,value:r})=>i.ZP.createElement(l.Ph,{toggleId:"samlNameIdFormat",onToggle:a,onSelect:(e,n)=>{t(n.toString()),a(!1)},selections:r,variant:l.TM.single,"aria-label":e("nameIdFormat"),isOpen:n},["username","email","transient","persistent"].map((e=>i.ZP.createElement(l.$m,{selected:e===r,key:e,value:e}))))})),i.ZP.createElement(Y,{name:"attributes.saml.force.name.id.format",label:"forceNameIdFormat"}),i.ZP.createElement(Y,{name:"attributes.saml.force.post.binding",label:"forcePostBinding"}),i.ZP.createElement(Y,{name:"attributes.saml.artifact.binding",label:"forceArtifactBinding"}),i.ZP.createElement(Y,{name:"attributes.saml.authnstatement",label:"includeAuthnStatement"}),i.ZP.createElement(Y,{name:"attributes.saml.onetimeuse.condition",label:"includeOneTimeUseCondition"}),i.ZP.createElement(Y,{name:"attributes.saml.server.signature.keyinfo.ext",label:"optimizeLookup"}))},ee=["RSA_SHA1","RSA_SHA256","RSA_SHA256_MGF1","RSA_SHA512","RSA_SHA512_MGF1","DSA_SHA1"],te=["NONE","KEY_ID","CERT_SUBJECT"],ne=[{name:"EXCLUSIVE",value:"http://www.w3.org/2001/10/xml-exc-c14n#"},{name:"EXCLUSIVE_WITH_COMMENTS",value:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments"},{name:"INCLUSIVE",value:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"},{name:"INCLUSIVE_WITH_COMMENTS",value:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments"}],le=()=>{const{t:e}=(0,o.$G)("clients"),[t,n]=(0,i.eJ)(!1),[a,r]=(0,i.eJ)(!1),[s,m]=(0,i.eJ)(!1),{control:d,watch:u}=(0,c.Gc)(),p=u("attributes.saml$server$signature"),P=u("attributes.saml.assertion.signature");return i.ZP.createElement(w.N,{isHorizontal:!0,role:"manage-clients",className:"keycloak__capability-config__form"},i.ZP.createElement(Y,{name:"attributes.saml$server$signature",label:"signDocuments"}),i.ZP.createElement(Y,{name:"attributes.saml.assertion.signature",label:"signAssertions"}),("true"===p||"true"===P)&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:e("signatureAlgorithm"),fieldId:"signatureAlgorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:signatureAlgorithm",fieldLabelId:"clients:signatureAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.saml.signature.algorithm",defaultValue:ee[0],Key:!0,control:d,render:({onChange:a,value:r})=>i.ZP.createElement(l.Ph,{toggleId:"signatureAlgorithm",onToggle:n,onSelect:(e,t)=>{a(t.toString()),n(!1)},selections:r,variant:l.TM.single,"aria-label":e("signatureAlgorithm"),isOpen:t},ee.map((e=>i.ZP.createElement(l.$m,{selected:e===r,key:e,value:e}))))})),i.ZP.createElement(l.cw,{label:e("signatureKeyName"),fieldId:"signatureKeyName",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:signatureKeyName",fieldLabelId:"clients:signatureKeyName"})},i.ZP.createElement(c.Qr,{name:"attributes.saml$server$signature$keyinfo$xmlSigKeyInfoKeyNameTransformer",defaultValue:te[0],control:d,render:({onChange:t,value:n})=>i.ZP.createElement(l.Ph,{toggleId:"signatureKeyName",onToggle:r,onSelect:(e,n)=>{t(n.toString()),r(!1)},selections:n,variant:l.TM.single,"aria-label":e("signatureKeyName"),isOpen:a},te.map((e=>i.ZP.createElement(l.$m,{selected:e===n,key:e,value:e}))))})),i.ZP.createElement(l.cw,{label:e("canonicalization"),fieldId:"canonicalization",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:canonicalization",fieldLabelId:"clients:canonicalization"})},i.ZP.createElement(c.Qr,{name:"attributes.saml_signature_canonicalization_method",defaultValue:ne[0].value,control:d,render:({onChange:t,value:n})=>i.ZP.createElement(l.Ph,{toggleId:"canonicalization",onToggle:m,onSelect:(e,n)=>{t(n.toString()),m(!1)},selections:ne.find((e=>e.value===n))?.name,variant:l.TM.single,"aria-label":e("canonicalization"),isOpen:s},ne.map((e=>i.ZP.createElement(l.$m,{selected:e.value===n,key:e.name,value:e.value},e.name))))}))))},ae=({name:e,save:t,reset:n,isActive:a=!0,...r})=>{const{t:c}=(0,o.$G)("common");return i.ZP.createElement(l.WK,{...r},i.ZP.createElement(l.zx,{isDisabled:!a,"data-testid":e+"Save",onClick:t},c("save")),i.ZP.createElement(l.zx,{isDisabled:!a,"data-testid":e+"Revert",variant:"link",onClick:n},c("revert")))};var re=n(5256),ie=n(8670);const ce=({client:e,save:t,reset:n})=>{const{t:a}=(0,o.$G)("clients"),{register:r,watch:s}=(0,c.Gc)(),{realm:m}=(0,T.PL)(),{hasAccess:d}=(0,ie.md)(),u=d("manage-clients")||e.access?.configure,p=s("protocol"),P=s("attributes.saml_idp_initiated_sso_url_name");return i.ZP.createElement(w.N,{isHorizontal:!0,fineGrainedAccess:e.access?.configure,role:"manage-clients"},!e.bearerOnly&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:a("rootUrl"),fieldId:"kc-root-url",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:rootUrl",fieldLabelId:"clients:rootUrl"})},i.ZP.createElement($.F,{type:"text",id:"kc-root-url",name:"rootUrl",ref:r})),i.ZP.createElement(l.cw,{label:a("homeURL"),fieldId:"kc-home-url",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:homeURL",fieldLabelId:"clients:homeURL"})},i.ZP.createElement($.F,{type:"text",id:"kc-home-url",name:"baseUrl",ref:r})),i.ZP.createElement(l.cw,{label:a("validRedirectUri"),fieldId:"kc-redirect",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:validRedirectURIs",fieldLabelId:"clients:validRedirectUri"})},i.ZP.createElement(O.B,{name:"redirectUris","aria-label":a("validRedirectUri"),addButtonLabel:"clients:addRedirectUri"})),i.ZP.createElement(l.cw,{label:a("validPostLogoutRedirectUri"),fieldId:"kc-postLogoutRedirect",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:validPostLogoutRedirectURIs",fieldLabelId:"clients:validPostLogoutRedirectUri"})},i.ZP.createElement(O.B,{name:"attributes.post.logout.redirect.uris","aria-label":a("validPostLogoutRedirectUri"),addButtonLabel:"clients:addPostLogoutRedirectUri"})),"saml"===p&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:a("idpInitiatedSsoUrlName"),fieldId:"idpInitiatedSsoUrlName",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:idpInitiatedSsoUrlName",fieldLabelId:"clients:idpInitiatedSsoUrlName"}),helperText:""!==P&&a("idpInitiatedSsoUrlNameHelp",{url:`${re.Z.authServerUrl}/realms/${m}/protocol/saml/clients/${P}`})},i.ZP.createElement($.F,{type:"text",id:"idpInitiatedSsoUrlName",name:"attributes.saml_idp_initiated_sso_url_name",ref:r})),i.ZP.createElement(l.cw,{label:a("idpInitiatedSsoRelayState"),fieldId:"idpInitiatedSsoRelayState",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:idpInitiatedSsoRelayState",fieldLabelId:"clients:idpInitiatedSsoRelayState"})},i.ZP.createElement($.F,{type:"text",id:"idpInitiatedSsoRelayState",name:"attributes.saml_idp_initiated_sso_relay_state",ref:r})),i.ZP.createElement(l.cw,{label:a("masterSamlProcessingUrl"),fieldId:"masterSamlProcessingUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:masterSamlProcessingUrl",fieldLabelId:"clients:masterSamlProcessingUrl"})},i.ZP.createElement($.F,{type:"text",id:"masterSamlProcessingUrl",name:"adminUrl",ref:r}))),"saml"!==p&&i.ZP.createElement(l.cw,{label:a("webOrigins"),fieldId:"kc-web-origins",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:webOrigins",fieldLabelId:"clients:webOrigins"})},i.ZP.createElement(O.B,{name:"webOrigins","aria-label":a("webOrigins"),addButtonLabel:"clients:addWebOrigins"}))),"saml"!==p&&i.ZP.createElement(l.cw,{label:a("adminURL"),fieldId:"kc-admin-url",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:adminURL",fieldLabelId:"clients:adminURL"})},i.ZP.createElement($.F,{type:"text",id:"kc-admin-url",name:"adminUrl",ref:r})),e.bearerOnly&&i.ZP.createElement(ae,{className:"keycloak__form_actions",name:"settings",save:t,reset:n,isActive:!u}))},oe=({access:e})=>{const{t}=(0,o.$G)("clients"),{register:n,control:a,watch:r}=(0,c.Gc)(),[s,m]=(0,i.eJ)(!1),d=(0,P.tN)().themes.login,u=r("consentRequired"),p=r("attributes.display.on.consent.screen");return i.ZP.createElement(w.N,{isHorizontal:!0,fineGrainedAccess:e,role:"manage-clients"},i.ZP.createElement(l.cw,{label:t("loginTheme"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:loginTheme",fieldLabelId:"clients:loginTheme"}),fieldId:"loginTheme"},i.ZP.createElement(c.Qr,{name:"attributes.login_theme",defaultValue:"",control:a,render:({onChange:e,value:n})=>i.ZP.createElement(l.Ph,{toggleId:"loginTheme",onToggle:m,onSelect:(t,n)=>{e(n.toString()),m(!1)},selections:n||t("common:choose"),variant:l.TM.single,"aria-label":t("loginTheme"),isOpen:s},[i.ZP.createElement(l.$m,{key:"empty",value:""},t("common:choose")),...d.map((e=>i.ZP.createElement(l.$m,{selected:e.name===n,key:e.name,value:e.name})))])})),i.ZP.createElement(l.cw,{label:t("consentRequired"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:consentRequired",fieldLabelId:"clients:consentRequired"}),fieldId:"kc-consent",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"consentRequired",defaultValue:!1,control:a,render:({onChange:e,value:n})=>i.ZP.createElement(l.rs,{id:"kc-consent-switch",label:t("common:on"),labelOff:t("common:off"),isChecked:n,onChange:e})})),i.ZP.createElement(l.cw,{label:t("displayOnClient"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:displayOnClient",fieldLabelId:"clients:displayOnClient"}),fieldId:"kc-display-on-client",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"attributes.display.on.consent.screen",defaultValue:!1,control:a,render:({onChange:e,value:n})=>i.ZP.createElement(l.rs,{id:"kc-display-on-client-switch",label:t("common:on"),labelOff:t("common:off"),isChecked:"true"===n,onChange:t=>e(""+t),isDisabled:!u})})),i.ZP.createElement(l.cw,{label:t("consentScreenText"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:consentScreenText",fieldLabelId:"clients:consentScreenText"}),fieldId:"kc-consent-screen-text"},i.ZP.createElement(h.Q,{id:"kc-consent-screen-text",name:"attributes.consent.screen.text",ref:n,isDisabled:!(u&&"true"===p)})))},se=({save:e,reset:t,client:{access:n}})=>{const{t:a}=(0,o.$G)("clients"),{register:r,control:s,watch:m,formState:{errors:d}}=(0,c.Gc)(),{hasAccess:u}=(0,ie.md)(),p=u("manage-clients")||n?.configure,P=m("protocol"),E=m("frontchannelLogout");return i.ZP.createElement(w.N,{isHorizontal:!0,fineGrainedAccess:n?.configure,role:"manage-clients",className:"pf-u-pb-4xl"},i.ZP.createElement(l.cw,{label:a("frontchannelLogout"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:frontchannelLogout",fieldLabelId:"clients:frontchannelLogout"}),fieldId:"kc-frontchannelLogout",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"frontchannelLogout",defaultValue:!0,control:s,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"kc-frontchannelLogout-switch",label:a("common:on"),labelOff:a("common:off"),isChecked:t,onChange:e})})),"openid-connect"===P&&E&&i.ZP.createElement(l.cw,{label:a("frontchannelLogoutUrl"),fieldId:"frontchannelLogoutUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:frontchannelLogoutUrl",fieldLabelId:"clients:frontchannelLogoutUrl"}),helperTextInvalid:d.attributes?.frontchannel?.logout?.url?.message,validated:d.attributes?.frontchannel?.logout?.url?.message?l.LD.error:l.LD.default},i.ZP.createElement($.F,{type:"text",id:"frontchannelLogoutUrl",name:"attributes.frontchannel.logout.url",ref:r({validate:e=>(e.startsWith("https://")||e.startsWith("http://"))&&!e.includes("*")||""===e||a("frontchannelUrlInvalid").toString()}),validated:d.attributes?.frontchannel?.logout?.url?.message?l.LD.error:l.LD.default})),"openid-connect"===P&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:a("backchannelLogoutUrl"),fieldId:"backchannelLogoutUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:backchannelLogoutUrl",fieldLabelId:"clients:backchannelLogoutUrl"}),helperTextInvalid:d.attributes?.backchannel?.logout?.url?.message,validated:d.attributes?.backchannel?.logout?.url?.message?l.LD.error:l.LD.default},i.ZP.createElement($.F,{type:"text",id:"backchannelLogoutUrl",name:"attributes.backchannel.logout.url",ref:r({validate:e=>(e.startsWith("https://")||e.startsWith("http://"))&&!e.includes("*")||""===e||a("backchannelUrlInvalid").toString()}),validated:d.attributes?.backchannel?.logout?.url?.message?l.LD.error:l.LD.default})),i.ZP.createElement(l.cw,{label:a("backchannelLogoutSessionRequired"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:backchannelLogoutSessionRequired",fieldLabelId:"clients:backchannelLogoutSessionRequired"}),fieldId:"backchannelLogoutSessionRequired",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"attributes.backchannel.logout.session.required",defaultValue:"true",control:s,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"backchannelLogoutSessionRequired",label:a("common:on"),labelOff:a("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})})),i.ZP.createElement(l.cw,{label:a("backchannelLogoutRevokeOfflineSessions"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:backchannelLogoutRevokeOfflineSessions",fieldLabelId:"clients:backchannelLogoutRevokeOfflineSessions"}),fieldId:"backchannelLogoutRevokeOfflineSessions",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"attributes.backchannel.logout.revoke.offline.tokens",defaultValue:"false",control:s,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{id:"backchannelLogoutRevokeOfflineSessions",label:a("common:on"),labelOff:a("common:off"),isChecked:"true"===t,onChange:t=>e(t.toString())})}))),i.ZP.createElement(ae,{className:"keycloak__form_actions",name:"settings",save:e,reset:t,isActive:p}))},me=e=>{const{t}=(0,o.$G)("clients"),{watch:n}=(0,c.Gc)(),a=n("protocol"),{client:r}=e;return i.ZP.createElement(S.W,{className:"pf-u-px-lg",sections:[{title:t("generalSettings"),panel:i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(H._,{protocol:r.protocol,hasConfigureAccess:r.access?.configure}))},{title:t("accessSettings"),panel:i.ZP.createElement(ce,{...e})},{title:t("samlCapabilityConfig"),isHidden:"saml"!==a||r.bearerOnly,panel:i.ZP.createElement(X,null)},{title:t("signatureAndEncryption"),isHidden:"saml"!==a||r.bearerOnly,panel:i.ZP.createElement(le,null)},{title:t("capabilityConfig"),isHidden:"openid-connect"!==a||r.bearerOnly,panel:i.ZP.createElement(Q.J,null)},{title:t("loginSettings"),isHidden:r.bearerOnly,panel:i.ZP.createElement(oe,{access:r.access?.configure})},{title:t("logoutSettings"),isHidden:r.bearerOnly,panel:i.ZP.createElement(se,{...e})}]})};var de=n(7174);const ue=({client:e})=>{const{adminClient:t}=(0,p.K3)(),{t:n}=(0,o.$G)("sessions");return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(de.Z,{loader:(n,l)=>t.clients.listSessions({id:e.id,first:n,max:l}),hiddenColumns:["clients"],emptyInstructions:n("noSessionsForClient")}))};var pe,Pe,Ee=n(3745),Ze=n(2187);(Pe=pe||(pe={}))[Pe.Ready=0]="Ready",Pe[Pe.Copied=1]="Copied",Pe[Pe.Error=2]="Error";const ge=({id:e,label:t,text:n,variant:a="plain"})=>{const{t:r}=(0,o.$G)("clients"),c=(0,Ze.Z)(),[s,m]=(0,i.eJ)(0),d=(0,i.Ye)((()=>{switch(s){case 0:return r("copyToClipboard");case 1:return r("copySuccess");case 2:return r("clipboardCopyError")}}),[s]);return(0,i.d4)((()=>{if(0!==s)return c((()=>m(0)),1e3)}),[s]),i.ZP.createElement(l.u2,{id:`copy-button-${e}`,textId:t,"aria-label":r("copyToClipboard"),onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),m(1)}catch(e){m(2)}})(n),exitDelay:600,variant:a},d)},he=({id:e,buttonLabel:t,secret:n,toggle:a})=>{const{t:r}=(0,o.$G)("clients"),s=(0,c.Gc)();return i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,{isFilled:!0},i.ZP.createElement(l.BZ,null,i.ZP.createElement(Ee.W,{id:e,value:n,isReadOnly:!0}),i.ZP.createElement(ge,{id:e,text:n,label:"clientSecret",variant:"control"}))),i.ZP.createElement(l.JE,null,i.ZP.createElement(l.zx,{variant:"secondary",isDisabled:s.formState.isDirty,onClick:a},r(t))))},fe=({time:e})=>{const{t}=(0,o.$G)("clients"),n=(0,z.Z)();return i.ZP.createElement("div",{className:"pf-u-my-md"},(l=e)?t("secretExpiresOn",{time:n(new Date(1e3*l),{dateStyle:"full",timeStyle:"long"})}):void 0);var l},be=({client:e,secret:t,toggle:n})=>{const{t:a}=(0,o.$G)("clients"),{adminClient:r}=(0,p.K3)(),{addAlert:c,addError:s}=(0,m.Z7)(),[u,P]=(0,i.eJ)(e.attributes?.["client.secret.rotated"]),E=e.attributes?.["client.secret.expiration.time"],Z=e.attributes?.["client.secret.rotated.expiration.time"],[g,h]=(0,d.W)({titleKey:"clients:invalidateRotatedSecret",messageKey:"clients:invalidateRotatedSecretExplain",continueButtonLabel:"common:confirm",onConfirm:async()=>{try{await r.clients.invalidateSecret({id:e.id}),P(void 0),c(a("invalidateRotatedSuccess"))}catch(e){s("clients:invalidateRotatedError",e)}}});return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(h,null),i.ZP.createElement(l.cw,{label:a("clientSecret"),fieldId:"kc-client-secret",className:"pf-u-my-md"},i.ZP.createElement(he,{id:"kc-client-secret",secret:t,toggle:n,buttonLabel:"regenerate"}),i.ZP.createElement(fe,{time:E}),(f=E,(new Date).getTime()>=1e3*f&&i.ZP.createElement(l.bZ,{variant:"warning",isInline:!0,title:a("secretHasExpired")}))),u&&i.ZP.createElement(l.cw,{label:a("secretRotated"),fieldId:"secretRotated"},i.ZP.createElement(he,{id:"secretRotated",secret:u,toggle:g,buttonLabel:"invalidateSecret"}),i.ZP.createElement(fe,{time:Z})));var f},ye=()=>{const{control:e}=(0,c.Gc)(),t=(0,E.eu)((0,P.tN)().providers.clientSignature.providers),{t:n}=(0,o.$G)("clients"),[a,r]=(0,i.eJ)(!1);return i.ZP.createElement(l.cw,{label:n("signatureAlgorithm"),fieldId:"kc-signature-algorithm",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:signature-algorithm",fieldLabelId:"clients:signatureAlgorithm"})},i.ZP.createElement(c.Qr,{name:"attributes.token.endpoint.auth.signing.alg",defaultValue:"",control:e,render:({onChange:e,value:c})=>i.ZP.createElement(l.Ph,{maxHeight:200,toggleId:"kc-signature-algorithm",onToggle:r,onSelect:(t,n)=>{e(n.toString()),r(!1)},selections:c||n("anyAlgorithm"),variant:l.TM.single,"aria-label":n("signatureAlgorithm"),isOpen:a},i.ZP.createElement(l.$m,{selected:""===c,key:"any",value:""},n("anyAlgorithm")),i.ZP.createElement(i.ZP.Fragment,null,t.map((e=>i.ZP.createElement(l.$m,{selected:e===c,key:e,value:e})))))}))},ve=()=>{const{t:e}=(0,o.$G)("clients"),{register:t,control:n,formState:{errors:a}}=(0,c.Gc)();return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:e("allowRegexComparison"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:allowRegexComparison",fieldLabelId:"clients:allowRegexComparison"}),fieldId:"allowRegexComparison",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"attributes.x509.allow.regex.pattern.comparison",defaultValue:"false",control:n,render:({onChange:t,value:n})=>i.ZP.createElement(l.rs,{id:"allowRegexComparison",label:e("common:on"),labelOff:e("common:off"),isChecked:"true"===n,onChange:e=>t(e.toString())})})),i.ZP.createElement(l.cw,{label:e("subject"),fieldId:"kc-subject",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:subject",fieldLabelId:"clients:subject"}),helperTextInvalid:e("common:required"),validated:a.attributes?.["x509.subjectdn"]?l.LD.error:l.LD.default,isRequired:!0},i.ZP.createElement($.F,{ref:t({required:!0}),type:"text",id:"kc-subject",name:"attributes.x509.subjectdn",validated:a.attributes?.["x509.subjectdn"]?l.LD.error:l.LD.default})))},Ie=({client:e,save:t,refresh:n})=>{const{t:a}=(0,o.$G)("clients"),{adminClient:r}=(0,p.K3)(),{addAlert:s,addError:u}=(0,m.Z7)(),P=e.id,[E,Z]=(0,i.eJ)([]),{control:h,formState:{isDirty:f},handleSubmit:b}=(0,c.Gc)(),y=(0,c.qo)({control:h,name:"clientAuthenticatorType",defaultValue:""}),[v,I]=(0,i.eJ)(""),[T,k]=(0,i.eJ)(""),[x,S]=(0,i.eJ)(!1);async function C(e,t){try{const n=await e(P);return s(a(`${t}Success`),l.Ux.success),n}catch(e){u(`clients:${t}Error`,e)}}(0,p.ib)((()=>Promise.all([r.authenticationManagement.getClientAuthenticatorProviders(),r.clients.getClientSecret({id:P})])),(([e,t])=>{Z(e),I(t.value)}),[]);const[R,A]=(0,d.W)({titleKey:"clients:confirmClientSecretTitle",messageKey:"clients:confirmClientSecretBody",continueButtonLabel:"common:yes",cancelButtonLabel:"common:no",onConfirm:async()=>{const e=await C((e=>r.clients.generateNewClientSecret({id:e})),"clientSecret");I(e?.value||""),n()}}),[L,N]=(0,d.W)({titleKey:"clients:confirmAccessTokenTitle",messageKey:"clients:confirmAccessTokenBody",continueButtonLabel:"common:yes",cancelButtonLabel:"common:no",onConfirm:async()=>{const e=await C((e=>r.clients.generateRegistrationAccessToken({id:e})),"accessToken");k(e?.registrationAccessToken||"")}});return i.ZP.createElement(l.NP,null,i.ZP.createElement(w.N,{onSubmit:b(t),isHorizontal:!0,className:"pf-u-mt-md",role:"manage-clients"},i.ZP.createElement(A,null),i.ZP.createElement(N,null),i.ZP.createElement(l.Zb,{isFlat:!0},i.ZP.createElement(l.eW,null,i.ZP.createElement(l.cw,{label:a("clientAuthenticator"),fieldId:"kc-client-authenticator-type",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:client-authenticator-type",fieldLabelId:"clients:clientAuthenticator"})},i.ZP.createElement(c.Qr,{name:"clientAuthenticatorType",control:h,defaultValue:"",render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"kc-client-authenticator-type",required:!0,onToggle:S,onSelect:(t,n)=>{e(n),S(!1)},selections:t,variant:l.TM.single,"aria-label":a("clientAuthenticator"),isOpen:x},E.map((e=>i.ZP.createElement(l.$m,{selected:e.id===t,key:e.id,value:e.id},e.displayName))))})),"client-jwt"===y&&i.ZP.createElement(ye,null),"client-x509"===y&&i.ZP.createElement(ve,null),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"primary",type:"submit",isDisabled:!f},a("common:save")))),("client-secret"===y||"client-secret-jwt"===y)&&i.ZP.createElement(l.iz,null),("client-secret"===y||"client-secret-jwt"===y)&&i.ZP.createElement(l.eW,null,i.ZP.createElement(be,{client:e,secret:v,toggle:R}))),i.ZP.createElement(l.Zb,{isFlat:!0},i.ZP.createElement(l.eW,null,i.ZP.createElement(l.cw,{label:a("registrationAccessToken"),fieldId:"kc-access-token",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:registration-access-token",fieldLabelId:"clients:registrationAccessToken"})},i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,{isFilled:!0},i.ZP.createElement(l.M5,{id:"kc-access-token",isReadOnly:!0},T)),i.ZP.createElement(l.JE,null,i.ZP.createElement(l.zx,{variant:"secondary",onClick:L},a("regenerate")))))))))},Te=({hidePassword:e=!1})=>{const{t}=(0,o.$G)("clients"),{register:n}=(0,c.Gc)();return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:t("keyAlias"),fieldId:"keyAlias",isRequired:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:keyAlias",fieldLabelId:"clients:keyAlias"})},i.ZP.createElement($.F,{"data-testid":"keyAlias",type:"text",id:"keyAlias",name:"keyAlias",ref:n({required:!0})})),!e&&i.ZP.createElement(l.cw,{label:t("keyPassword"),fieldId:"keyPassword",isRequired:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:keyPassword",fieldLabelId:"clients:keyPassword"})},i.ZP.createElement(Ee.W,{"data-testid":"keyPassword",id:"keyPassword",name:"keyPassword",ref:n({required:!0})})),i.ZP.createElement(l.cw,{label:t("storePassword"),fieldId:"storePassword",isRequired:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:storePassword",fieldLabelId:"clients:storePassword"})},i.ZP.createElement(Ee.W,{"data-testid":"storePassword",id:"storePassword",name:"storePassword",ref:n({required:!0})})))},ke=({useFile:e=!1})=>{const{t}=(0,o.$G)("clients"),[n,a]=(0,i.eJ)(),[r,s]=(0,i.eJ)(!1),{control:m}=(0,c.Gc)();return i.ZP.createElement(l.l0,{className:"pf-u-pt-lg"},i.ZP.createElement(l.cw,{label:t("archiveFormat"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:archiveFormat",fieldLabelId:"clients:archiveFormat"}),fieldId:"archiveFormat"},i.ZP.createElement(c.Qr,{name:"format",defaultValue:"JKS",control:m,render:({onChange:e,value:n})=>i.ZP.createElement(l.Ph,{toggleId:"archiveFormat",onToggle:s,onSelect:(t,n)=>{e(n.toString()),s(!1)},selections:n,variant:l.TM.single,"aria-label":t("archiveFormat"),isOpen:r},["JKS","PKCS12"].map((e=>i.ZP.createElement(l.$m,{selected:e===n,key:e,value:e}))))})),e&&i.ZP.createElement(l.cw,{label:t("importFile"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:importFile",fieldLabelId:"clients:importFile"}),fieldId:"importFile"},i.ZP.createElement(c.Qr,{name:"file",defaultValue:"",control:m,render:({onChange:e,value:r})=>i.ZP.createElement(l.p0,{id:"importFile",value:r,filename:n,browseButtonText:t("browse"),onChange:(t,n)=>{a(n),e(t)}})})),i.ZP.createElement(Te,{hidePassword:e}))},xe=({clientId:e,save:t,toggleDialog:n})=>{const{t:a}=(0,o.$G)("clients"),r=(0,c.cI)({defaultValues:{keyAlias:e},mode:"onChange"}),{handleSubmit:s,formState:{isValid:m}}=r;return i.ZP.createElement(l.u_,{variant:l.vE.medium,title:a("generateKeys"),isOpen:!0,onClose:n,actions:[i.ZP.createElement(l.zx,{id:"modal-confirm",key:"confirm","data-testid":"confirm",isDisabled:!m,onClick:()=>{s((e=>{t(e),n()}))()}},a("generate")),i.ZP.createElement(l.zx,{id:"modal-cancel",key:"cancel","data-testid":"cancel",variant:l.Wu.link,onClick:()=>{n()}},a("common:cancel"))]},i.ZP.createElement(l.wu,null,i.ZP.createElement(l.xv,null,a("clients-help:generateKeysDescription"))),i.ZP.createElement(c.RV,{...r},i.ZP.createElement(ke,null)))},Se=["JKS","PKCS12"],we=Se.concat(["Certificate PEM","Public Key PEM","JSON Web Key Set"]),Ce=({save:e,toggleDialog:t})=>{const{t:n}=(0,o.$G)("clients"),a=(0,c.cI)(),{control:r,handleSubmit:s}=a,[m,d]=(0,i.eJ)(!1),u=(0,c.qo)({control:r,name:"keystoreFormat",defaultValue:"JKS"});return i.ZP.createElement(l.u_,{variant:l.vE.medium,title:n("generateKeys"),isOpen:!0,onClose:t,actions:[i.ZP.createElement(l.zx,{id:"modal-confirm","data-testid":"confirm",key:"confirm",onClick:()=>{s((n=>{e(n),t()}))()}},n("import")),i.ZP.createElement(l.zx,{id:"modal-cancel","data-testid":"cancel",key:"cancel",variant:l.Wu.link,onClick:()=>{t()}},n("common:cancel"))]},i.ZP.createElement(l.wu,null,i.ZP.createElement(l.xv,null,n("clients-help:generateKeysDescription"))),i.ZP.createElement(l.l0,{className:"pf-u-pt-lg"},i.ZP.createElement(l.cw,{label:n("archiveFormat"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:archiveFormat",fieldLabelId:"clients:archiveFormat"}),fieldId:"archiveFormat"},i.ZP.createElement(c.Qr,{name:"keystoreFormat",control:r,defaultValue:"JKS",render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"archiveFormat",onToggle:d,onSelect:(t,n)=>{e(n),d(!1)},selections:t,variant:l.TM.single,"aria-label":n("archiveFormat"),isOpen:m},we.map((e=>i.ZP.createElement(l.$m,{selected:e===t,key:e,value:e}))))})),Se.includes(u)&&i.ZP.createElement(c.RV,{...a},i.ZP.createElement(Te,{hidePassword:!0})),i.ZP.createElement(l.cw,{label:n("importFile"),fieldId:"importFile"},i.ZP.createElement(c.Qr,{name:"file",control:r,defaultValue:"",render:({onChange:e,value:t})=>i.ZP.createElement(l.p0,{id:"importFile",value:t.value,filename:t.filename,onChange:(t,n)=>e({value:t,filename:n})})}))))},Re=({id:e,keyInfo:t})=>i.ZP.createElement(h.Q,{readOnly:!0,rows:5,id:e,"data-testid":"certificate",value:t?.certificate}),Ae=({keyInfo:e,plain:t=!1})=>{const{t:n}=(0,o.$G)("clients");return i.ZP.createElement(l.wY,{prefix:"certificate"},(a=>t?i.ZP.createElement(Re,{id:a,keyInfo:e}):i.ZP.createElement(l.cw,{label:n("certificate"),fieldId:a,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:certificate",fieldLabelId:`clients:${a}`})},i.ZP.createElement(Re,{id:a,keyInfo:e}))))},Le="jwt.credential",Ne=({clientId:e,save:t,hasConfigureAccess:n})=>{const{t:a}=(0,o.$G)("clients"),{control:r,register:s,getValues:d,formState:{isDirty:P}}=(0,c.Gc)(),{adminClient:E}=(0,p.K3)(),{addAlert:Z,addError:h}=(0,m.Z7)(),[f,b]=(0,i.eJ)(),[y,v,I]=(0,x.Z)(),[T,k,S]=(0,x.Z)(),C=(0,c.qo)({control:r,name:"attributes.use.jwks.url",defaultValue:"false"});return(0,p.ib)((()=>E.clients.getKeyInfo({id:e,attr:Le})),(e=>b(e)),[]),i.ZP.createElement(l.NP,{variant:"light",className:"keycloak__form"},y&&i.ZP.createElement(xe,{clientId:d("clientId"),toggleDialog:v,save:async t=>{try{const n=await E.clients.generateAndDownloadKey({id:e,attr:Le},t);u.Z.saveAs(new Blob([n],{type:"application/octet-stream"}),"keystore."+("PKCS12"==t.format?"p12":"jks")),Z(a("generateSuccess"),l.Ux.success)}catch(e){h("clients:generateError",e)}}}),T&&i.ZP.createElement(Ce,{toggleDialog:k,save:async t=>{try{const n=new FormData,{file:r,...i}=t;Object.entries(i).map((e=>n.append(e[0],e[1]))),n.append("file",r.value),await E.clients.uploadCertificate({id:e,attr:Le},n),Z(a("importSuccess"),l.Ux.success)}catch(e){h("clients:importError",e)}}}),i.ZP.createElement(l.Zb,{isFlat:!0},i.ZP.createElement(l.Ol,null,i.ZP.createElement(l.ll,null,a("jwksUrlConfig"))),i.ZP.createElement(l.eW,null,i.ZP.createElement(l.wu,null,i.ZP.createElement(l.xv,null,a("keysIntro")))),i.ZP.createElement(l.eW,null,i.ZP.createElement(w.N,{role:"manage-clients",fineGrainedAccess:n,isHorizontal:!0},i.ZP.createElement(l.cw,{hasNoPaddingTop:!0,label:a("useJwksUrl"),fieldId:"useJwksUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:useJwksUrl",fieldLabelId:"clients:useJwksUrl"})},i.ZP.createElement(c.Qr,{name:"attributes.use.jwks.url",defaultValue:"false",control:r,render:({onChange:e,value:t})=>i.ZP.createElement(l.rs,{"data-testid":"useJwksUrl",id:"useJwksUrl-switch",label:a("common:on"),labelOff:a("common:off"),isChecked:"true"===t,onChange:t=>e(`${t}`)})})),"true"!==C&&(f?i.ZP.createElement(Ae,{plain:!0,keyInfo:f}):"No client certificate configured"),"true"===C&&i.ZP.createElement(l.cw,{label:a("jwksUrl"),fieldId:"jwksUrl",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:jwksUrl",fieldLabelId:"clients:jwksUrl"})},i.ZP.createElement($.F,{type:"text",id:"jwksUrl",name:"attributes.jwks.url",ref:s})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{"data-testid":"saveKeys",onClick:t,isDisabled:!P},a("common:save")),i.ZP.createElement(l.zx,{"data-testid":"generate",variant:"secondary",onClick:()=>I(!0)},a("generateNewKeys")),i.ZP.createElement(l.zx,{"data-testid":"import",variant:"secondary",onClick:()=>S(!0),isDisabled:"true"===C},a("import")))))))};var Oe=n(1832),Be=n(1472),Ue=n(240),$e=n(8801),_e=n(3255),Ke=n(6454),Fe=n(3227);const Me="dedicated",ze=({clientId:e,protocol:t,clientName:n,fineGrainedAccess:a})=>{const{t:r}=(0,o.$G)("clients"),{adminClient:c}=(0,p.K3)(),{addAlert:d,addError:u}=(0,m.Z7)(),{realm:P}=(0,T.PL)(),E=(0,Fe.Z)(),[Z,g]=(0,i.eJ)("name"),[h,f]=(0,i.eJ)(Ue.q5.none),[b,y]=(0,i.eJ)(!1),[v,I]=(0,i.eJ)(!1),[k,x]=(0,i.eJ)(),[S,w]=(0,i.eJ)([]),[C,R]=(0,i.eJ)(0),A=()=>R(C+1),L=e=>e.id===Me,{hasAccess:N}=(0,ie.md)(),O=N("manage-clients")||a,B=()=>O?i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{onClick:()=>y(!0)},r("addClientScope"))),i.ZP.createElement(l.Eg,null,i.ZP.createElement(_e.a,{clientId:e,selectedRows:S,refresh:A})),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.Lt,{toggle:i.ZP.createElement(l.ax,{onToggle:()=>I(!v)}),isOpen:v,isPlain:!0,dropdownItems:[i.ZP.createElement(l.hP,{key:"deleteAll",isDisabled:0===S.length,onClick:async()=>{try{await Promise.all(S.map((async t=>{await(0,Ue.KE)(c,e,{...t},t.type)}))),I(!1),d(r("clients:clientScopeRemoveSuccess"),l.Ux.success),A()}catch(e){u("clients:clientScopeRemoveError",e)}}},r("common:remove"))]}))):i.ZP.createElement("span",null);return i.ZP.createElement(i.ZP.Fragment,null,k&&i.ZP.createElement(Be.W,{clientScopes:k,clientName:n,open:b,toggleDialog:()=>y(!b),onAdd:async t=>{try{await Promise.all(t.map((async t=>await(0,Ue.lo)(c,e,t.scope,t.type)))),d(r("clientScopeSuccess"),l.Ux.success),A()}catch(e){u("clients:clientScopeError",e)}}}),i.ZP.createElement(D.B,{key:C,loader:async(l,a,i)=>{const o=await c.clients.listDefaultClientScopes({id:e}),s=await c.clients.listOptionalClientScopes({id:e}),m=await c.clientScopes.find(),d=e=>m.find((t=>e===t.id)),u=[...s.map((e=>{const t=d(e.id);return{...e,type:Ue.vv.optional,description:t.description}})),...o.map((e=>{const t=d(e.id);return{...e,type:Ue.vv.default,description:t.description}}))],p=u.map((e=>e.name));x(m.filter((e=>!p.includes(e.name))).filter((e=>e.protocol===t)));const P="name"===Z?(0,$e.CU)(i):(0,$e.Fg)(h),g=Number(l),f=E(u.filter(P),(0,Fe.x)("name")).slice(g,g+Number(a));return 0===g&&O?[{id:Me,name:r("dedicatedScopeName",{clientName:n}),type:Ue.q5.none,description:r("dedicatedScopeDescription")},...f]:f},ariaLabelKey:"clients:clientScopeList",searchPlaceholderKey:"name"===Z?"clients:searchByName":void 0,canSelectAll:!0,isPaginated:!0,isSearching:"type"===Z,onSelect:e=>w([...e]),searchTypeComponent:i.ZP.createElement($e.EF,{searchType:Z,onSelect:e=>g(e)}),toolbarItem:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement($e.ZR,{searchType:Z,type:h,onSelect:e=>g(e),onType:e=>{f(e),A()}}),i.ZP.createElement(B,null)),columns:[{name:"name",displayKey:"clients:assignedClientScope",cellRenderer:t=>L(t)?i.ZP.createElement(s.rU,{to:(0,Ke.E)({realm:P,clientId:e})},t.name):t.name},{name:"type",displayKey:"clients:assignedType",cellRenderer:t=>i.ZP.createElement(Ue._g,{isDisabled:L(t)||!O,clientScope:t,type:t.type,onSelect:async n=>{try{await(0,Ue.VL)(c,e,t,t.type,n),d(r("clientScopeSuccess"),l.Ux.success),A()}catch(e){u("clients:clientScopeError",e)}}})},{name:"description"}],actions:O?[{title:r("common:remove"),onRowClick:async t=>{try{await(0,Ue.KE)(c,e,t,t.type),d(r("clients:clientScopeRemoveSuccess"),l.Ux.success),A()}catch(e){u("clients:clientScopeRemoveError",e)}return!0}}]:[],emptyState:i.ZP.createElement(G.M,{message:r("clients:emptyClientScopes"),instructions:r("clients:emptyClientScopesInstructions"),primaryActionText:r("clients:emptyClientScopesPrimaryAction"),onPrimaryAction:()=>y(!0)})}))},Je=({text:e,user:t,label:n})=>{const{t:a}=(0,o.$G)("clients");return t?i.ZP.createElement(l.dn,{id:n,actions:i.ZP.createElement(l.AK,null,i.ZP.createElement(ge,{id:"code",text:e,label:n}))},i.ZP.createElement(h.Q,{id:`text-area-${n}`,rows:20,value:e})):i.ZP.createElement(l.ub,{variant:"large"},i.ZP.createElement(l.Dx,{headingLevel:"h4",size:"lg"},a(`${n}No`)),i.ZP.createElement(l.Bq,null,a(`${n}IsDisabled`)))},Ge=({protocolMappers:e})=>{const[t,n]=(0,i.eJ)(0);return(0,i.d4)((()=>{n(t+1)}),[e]),i.ZP.createElement(D.B,{key:t,loader:()=>Promise.resolve(e),ariaLabelKey:"clients:effectiveProtocolMappers",searchPlaceholderKey:"clients:searchForProtocol",columns:[{name:"mapperName",displayKey:"common:name"},{name:"containerName",displayKey:"clients:parentClientScope"},{name:"type.category",displayKey:"common:category"},{name:"type.priority",displayKey:"common:priority"}]})},De=({effectiveRoles:e})=>{const[t,n]=(0,i.eJ)(0);return(0,i.d4)((()=>{n(t+1)}),[e]),i.ZP.createElement(D.B,{key:t,loader:()=>Promise.resolve(e),ariaLabelKey:"client:effectiveRoleScopeMappings",searchPlaceholderKey:"clients:searchForRole",columns:[{name:"name",displayKey:"clients:role"},{name:"containerId",displayKey:"clients:origin"}]})},Ve=({clientId:e,protocol:t})=>{const n="openid",{t:r}=(0,o.$G)("clients"),{enabled:c}=(0,Z.yD)(),{adminClient:s}=(0,p.K3)(),{realm:m}=(0,T.PL)(),d=(0,P.tN)().protocolMapperTypes[t],[u,h]=(0,i.eJ)([]),[f,b]=(0,i.eJ)(!1),[y,v]=(0,i.eJ)(!1),[I,k]=(0,i.eJ)([n]),[x,S]=(0,i.eJ)(0),[w,C]=(0,i.eJ)([]),[R,A]=(0,i.eJ)(""),[L,N]=(0,i.eJ)(),[O,B]=(0,i.eJ)(""),[U,$]=(0,i.eJ)([]),[_,K]=(0,i.eJ)([]),[F,M]=(0,i.eJ)(""),[z,J]=(0,i.eJ)(""),[G,D]=(0,i.eJ)(""),V=(0,i.sO)(null),q=(0,i.sO)(null),W=(0,i.sO)(null),j=(0,i.sO)(null),H=(0,i.sO)(null);return(0,p.ib)((()=>s.clients.listOptionalClientScopes({id:e})),(e=>h(e)),[]),(0,p.ib)((()=>R.length>2?s.users.find({search:R}):Promise.resolve([])),(e=>C(e.map((e=>(e.toString=function(){return(e=>r("common:fullName",{givenName:e.firstName,familyName:e.lastName}).trim()||e.username||"")(this)},e))).map((e=>i.ZP.createElement(l.$m,{key:e.id,value:e}))))),[R]),(0,p.ib)((async()=>{const t=I.join(" "),n=await s.clients.evaluatePermission({id:e,roleContainer:m,scope:t,type:"granted"});return{mapperList:await s.clients.evaluateListProtocolMapper({id:e,scope:t}),effectiveRoles:n}}),(({mapperList:e,effectiveRoles:t})=>{$(t),e.map((e=>{e.type=d.filter((t=>t.id===e.protocolMapper))[0]})),K(e),B(`${(new Date).getTime()}`)}),[I]),(0,p.ib)((async()=>{const t=I.join(" ");return L?await Promise.all([s.clients.evaluateGenerateAccessToken({id:e,userId:L.id,scope:t}),s.clients.evaluateGenerateUserInfo({id:e,userId:L.id,scope:t}),s.clients.evaluateGenerateIdToken({id:e,userId:L.id,scope:t})]):[]}),(([e,t,n])=>{M((0,E.tR)(e)),J((0,E.tR)(t)),D((0,E.tR)(n))}),[L,I]),i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.NP,{variant:"light"},c&&i.ZP.createElement(l.wu,{className:"keycloak__section_intro__help"},i.ZP.createElement(l.xv,null,i.ZP.createElement(a.pT,null)," ",r("clients-help:evaluateExplain"))),i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(l.cw,{label:r("scopeParameter"),fieldId:"scopeParameter",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:scopeParameter",fieldLabelId:"clients:scopeParameter"})},i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,{isFilled:!0},i.ZP.createElement(l.Ph,{toggleId:"scopeParameter",variant:l.TM.typeaheadMulti,typeAheadAriaLabel:r("scopeParameter"),onToggle:()=>b(!f),isOpen:f,selections:I,onSelect:(e,t)=>{const l=t;I.includes(l)?l!==n&&k(I.filter((e=>e!==l))):k([...I,l])},"aria-labelledby":r("scopeParameter"),placeholderText:r("scopeParameterPlaceholder")},u.map(((e,t)=>i.ZP.createElement(l.$m,{key:t,value:e.name}))))),i.ZP.createElement(l.JE,null,i.ZP.createElement(l.M5,{className:"keycloak__scopes_evaluate__clipboard-copy"},I.join(" "))))),i.ZP.createElement(l.cw,{label:r("user"),fieldId:"user",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:user",fieldLabelId:"clients:user"})},i.ZP.createElement(l.Ph,{toggleId:"user",variant:l.TM.typeahead,typeAheadAriaLabel:r("user"),onToggle:()=>v(!y),onFilter:e=>{const t=e?.target.value||"";return A(t),w},onClear:()=>{N(void 0),A("")},selections:[L],onSelect:(e,t)=>{N(t),A(""),v(!1)},isOpen:y})))),i.ZP.createElement(l.rj,{hasGutter:!0,className:"keycloak__scopes_evaluate__tabs"},i.ZP.createElement(l.P4,{span:8},i.ZP.createElement(l.I5,{"aria-labelledby":"pf-tab-0-effectiveProtocolMappers",eventKey:0,id:"effectiveProtocolMappers",ref:V},i.ZP.createElement(Ge,{protocolMappers:_})),i.ZP.createElement(l.I5,{"aria-labelledby":"pf-tab-0-effectiveRoleScopeMappings",eventKey:1,id:"effectiveRoleScopeMappings",ref:q,hidden:!0},i.ZP.createElement(De,{effectiveRoles:U})),i.ZP.createElement(l.I5,{"aria-labelledby":r("generatedAccessToken"),eventKey:2,id:"tab-generated-access-token",ref:W,hidden:!0},i.ZP.createElement(Je,{text:F,user:L,label:"generatedAccessToken"})),i.ZP.createElement(l.I5,{"aria-labelledby":r("generatedIdToken"),eventKey:3,id:"tab-generated-id-token",ref:j,hidden:!0},i.ZP.createElement(Je,{text:G,user:L,label:"generatedIdToken"})),i.ZP.createElement(l.I5,{"aria-labelledby":r("generatedUserInfo"),eventKey:4,id:"tab-generated-user-info",ref:H,hidden:!0},i.ZP.createElement(Je,{text:z,user:L,label:"generatedUserInfo"}))),i.ZP.createElement(l.P4,{span:4},i.ZP.createElement(l.mQ,{id:"tabs",key:O,isVertical:!0,activeKey:x,onSelect:(e,t)=>S(t)},i.ZP.createElement(l.OK,{id:"effectiveProtocolMappers","aria-controls":"effectiveProtocolMappers",eventKey:0,title:i.ZP.createElement(l.TP,null,r("effectiveProtocolMappers")," ",i.ZP.createElement(g.B,{fieldLabelId:"clients:effectiveProtocolMappers",helpText:"clients-help:effectiveProtocolMappers",noVerticalAlign:!1,unWrap:!0})),tabContentRef:V}),i.ZP.createElement(l.OK,{id:"effectiveRoleScopeMappings","aria-controls":"effectiveRoleScopeMappings",eventKey:1,title:i.ZP.createElement(l.TP,null,r("effectiveRoleScopeMappings")," ",i.ZP.createElement(g.B,{fieldLabelId:"clients:effectiveRoleScopeMappings",helpText:"clients-help:effectiveRoleScopeMappings",noVerticalAlign:!1,unWrap:!0})),tabContentRef:q}),i.ZP.createElement(l.OK,{id:"generatedAccessToken","aria-controls":"generatedAccessToken",eventKey:2,title:i.ZP.createElement(l.TP,null,r("generatedAccessToken")," ",i.ZP.createElement(g.B,{fieldLabelId:"clients:generatedAccessToken",helpText:"clients-help:generatedAccessToken",noVerticalAlign:!1,unWrap:!0})),tabContentRef:W}),i.ZP.createElement(l.OK,{id:"generatedIdToken","aria-controls":"generatedIdToken",eventKey:3,title:i.ZP.createElement(l.TP,null,r("generatedIdToken")," ",i.ZP.createElement(g.B,{fieldLabelId:"clients:generatedIdToken",helpText:"clients-help:generatedIdToken",noVerticalAlign:!1,unWrap:!0})),tabContentRef:j}),i.ZP.createElement(l.OK,{id:"generatedUserInfo","aria-controls":"generatedUserInfo",eventKey:4,title:i.ZP.createElement(l.TP,null,r("generatedUserInfo")," ",i.ZP.createElement(g.B,{fieldLabelId:"clients:generatedUserInfo",helpText:"clients-help:generatedUserInfo",noVerticalAlign:!1,unWrap:!0})),tabContentRef:H})))))};var qe=n(2931),We=n(4467);const je=({client:e})=>{const{t}=(0,o.$G)("clients"),{adminClient:n}=(0,p.K3)(),{addAlert:r,addError:c}=(0,m.Z7)(),{realm:d}=(0,T.PL)(),[u,P]=(0,i.eJ)(!1),[E,Z]=(0,i.eJ)(),{hasAccess:g}=(0,ie.md)(),h=g("manage-clients");return(0,p.ib)((()=>n.clients.getServiceAccountUser({id:e.id})),(e=>Z(e)),[]),E?i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.NP,{className:"pf-u-pb-0"},i.ZP.createElement(a.uM,{className:"pf-c-alert__icon keycloak--service-account--info-text"}),i.ZP.createElement("span",{className:"pf-u-pl-sm"},i.ZP.createElement(o.cC,{i18nKey:"clients-help:manageServiceAccountUser"},"",i.ZP.createElement(s.rU,{to:(0,We.Z)({realm:d,id:E.id,tab:"settings"})},{link:E.username})))),i.ZP.createElement(qe.Bo,{name:e.clientId,id:E.id,type:"users",isManager:h||e.access?.configure,loader:async()=>{const t=(await n.clients.getServiceAccountUser({id:e.id})).id,l=(await n.users.listRealmRoleMappings({id:t})).map((e=>({role:e}))),a=(await n.users.listCompositeRealmRoleMappings({id:t})).map((e=>({role:e}))),r=await n.clients.find(),i=(await Promise.all(r.map((async e=>{const l=(await n.users.listClientRoleMappings({id:t,clientUniqueId:e.id})).map((t=>({role:t,client:e}))),a=(await n.users.listCompositeClientRoleMappings({id:t,clientUniqueId:e.id})).map((t=>({role:t,client:e})));return(0,qe.cc)(l,a,u)})))).flat();return[...(0,qe.cc)(l,a,u),...i]},save:async e=>{try{const a=e.filter((e=>void 0===e.client)).map((e=>e.role)).flat();await n.users.addRealmRoleMappings({id:E?.id,roles:a}),await Promise.all(e.filter((e=>void 0!==e.client)).map((e=>n.users.addClientRoleMappings({id:E?.id,clientUniqueId:e.client.id,roles:[e.role]})))),r(t("roleMappingUpdatedSuccess"),l.Ux.success)}catch(e){c("clients:roleMappingUpdatedError",e)}},onHideRolesToggle:()=>P(!u)})):i.ZP.createElement(I.g,null)};var He=n(8707);const Qe=async(e,t,n,l,a)=>{try{const r=new FormData,{file:i,...c}=e;Object.entries(c).map((([e,t])=>r.append("format"===e?"keystoreFormat":e,t.toString()))),r.append("file",i),await l.clients.uploadKey({id:t,attr:n},r),a()}catch(e){a(e)}},Ye=({id:e,attr:t,onClose:n,onCancel:a})=>{const{t:r}=(0,o.$G)("clients"),[s,d]=(0,i.eJ)(!1),[P,E]=(0,i.eJ)(),Z=(0,c.cI)(),{handleSubmit:h,formState:{isDirty:f}}=Z,{adminClient:b}=(0,p.K3)(),{addAlert:y,addError:v}=(0,m.Z7)(),I=n=>{Qe(n,e,t,b,(e=>{e?v("clients:importError",e):y(r("importSuccess"),l.Ux.success)}))};return i.ZP.createElement(l.u_,{variant:l.vE.medium,"aria-labelledby":r("enableClientSignatureRequired"),header:i.ZP.createElement(l.wu,null,i.ZP.createElement(l.Dx,{headingLevel:"h1"},r("enableClientSignatureRequired")),i.ZP.createElement(l.xv,null,r("enableClientSignatureRequiredExplain"))),isOpen:!0,onClose:n,actions:[i.ZP.createElement(l.zx,{id:"modal-confirm",key:"confirm","data-testid":"confirm",variant:"primary",isDisabled:!f&&!P,onClick:()=>{s&&h(I)(),n()}},r("confirm")),i.ZP.createElement(l.zx,{id:"modal-cancel",key:"cancel","data-testid":"cancel",variant:l.Wu.link,onClick:a},r("common:cancel"))]},i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(l.cw,{label:r("selectMethod"),fieldId:"selectMethod",hasNoPaddingTop:!0},i.ZP.createElement(l.kC,null,i.ZP.createElement(l.B5,null,i.ZP.createElement(l.Y8,{isChecked:!s,name:"selectMethodType",onChange:()=>d(!1),label:r("selectMethodType.generate"),id:"selectMethodType-generate"})),i.ZP.createElement(l.B5,null,i.ZP.createElement(l.Y8,{isChecked:s,name:"selectMethodType",onChange:()=>d(!0),label:r("selectMethodType.import"),id:"selectMethodType-import"}))))),!s&&i.ZP.createElement(l.l0,null,i.ZP.createElement(l.cw,{label:r("certificate"),fieldId:"certificate",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:certificate",fieldLabelId:"clients:certificate"})},i.ZP.createElement(l.P,{hasGutter:!0},i.ZP.createElement(l.JE,{isFilled:!0},i.ZP.createElement(Ae,{plain:!0,keyInfo:P})),i.ZP.createElement(l.JE,null,i.ZP.createElement(l.zx,{variant:"secondary","data-testid":"generate",onClick:async()=>{try{const n=await b.clients.generateKey({id:e,attr:t});E(n),u.Z.saveAs(new Blob([n.privateKey],{type:"application/octet-stream"}),"private.key"),y(r("generateSuccess"),l.Ux.success)}catch(e){v("clients:generateError",e)}}},r("generate")))))),s&&i.ZP.createElement(c.RV,{...Z},i.ZP.createElement(ke,{useFile:!0})))};var Xe=n(5669);const et=({id:e,attr:t,onClose:n})=>{const{t:a}=(0,o.$G)("clients"),r=(0,c.Gc)(),{handleSubmit:s}=r,{adminClient:u}=(0,p.K3)(),{addAlert:P,addError:E}=(0,m.Z7)(),Z=n=>{Qe(n,e,t,u,(e=>{e?E("clients:importError",e):P(a("importSuccess"),l.Ux.success)}))};return i.ZP.createElement(d.X,{open:!0,toggleDialog:n,continueButtonLabel:"clients:import",titleKey:"clients:importKey",onConfirm:()=>{s(Z)(),n()}},i.ZP.createElement(c.RV,{...r},i.ZP.createElement(ke,{useFile:!0})))},tt=["saml.signing","saml.encryption"],nt={"saml.signing":{name:"attributes.saml.client.signature",title:"signingKeysConfig",key:"clientSignature"},"saml.encryption":{name:"attributes.saml.encrypt",title:"encryptionKeysConfig",key:"encryptAssertions"}},lt=({keyInfo:e,attr:t,onChanged:n,onGenerate:a,onImport:r})=>{const{t:s}=(0,o.$G)("clients"),{control:m,watch:d}=(0,c.Gc)(),u=nt[t].title,p=nt[t].key,P=nt[t].name,E=d(P);return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(Xe.b,{title:s(u),className:"kc-form-panel__panel"},i.ZP.createElement(l.wu,{className:"pf-u-pb-lg"},i.ZP.createElement(l.xv,null,s(`${u}Explain`))),i.ZP.createElement(w.N,{role:"manage-clients",isHorizontal:!0},i.ZP.createElement(l.cw,{labelIcon:i.ZP.createElement(g.B,{helpText:`clients-help:${p}`,fieldLabelId:`clients:${p}`}),label:s(p),fieldId:p,hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:P,control:m,defaultValue:"false",render:({onChange:e,value:r})=>i.ZP.createElement(l.rs,{"data-testid":p,id:p,label:s("common:on"),labelOff:s("common:off"),isChecked:"true"===r,onChange:l=>{const r=l.toString();"true"===r?(n(t),e(r)):a(t,!1)}})})))),e?.certificate&&"true"===E&&i.ZP.createElement(l.Zb,{isFlat:!0},i.ZP.createElement(l.eW,{className:"kc-form-panel__body"},i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(Ae,{keyInfo:e}),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"secondary",onClick:()=>a(t,!0)},s("regenerate")),i.ZP.createElement(l.zx,{variant:"secondary",onClick:()=>r(t)},s("importKey")),i.ZP.createElement(l.zx,{variant:"tertiary"},s("common:export")))))))},at=({clientId:e,save:t})=>{const{t:n}=(0,o.$G)("clients"),[a,r]=(0,i.eJ)(),[s,P]=(0,i.eJ)(),[E,Z]=(0,i.eJ)(),[g,h]=(0,i.eJ)(!1),[f,b]=(0,i.eJ)(0),{setValue:y}=(0,c.Gc)(),{adminClient:v}=(0,p.K3)(),{addAlert:I,addError:T}=(0,m.Z7)();(0,p.ib)((()=>Promise.all(tt.map((t=>v.clients.getKeyInfo({id:e,attr:t}))))),(e=>P(e)),[f]);const k=E?nt[E].key:"",[x,S]=(0,d.W)({titleKey:n("disableSigning",{key:n(k)}),messageKey:n("disableSigningExplain",{key:n(k)}),continueButtonLabel:"common:yes",cancelButtonLabel:"common:no",onConfirm:()=>{y(nt[E].name,"false"),t()}}),[w,C]=(0,d.W)({titleKey:"clients:reGenerateSigning",messageKey:"clients:reGenerateSigningExplain",continueButtonLabel:"common:yes",cancelButtonLabel:"common:no",onConfirm:()=>{(async t=>{const a=tt.indexOf(t);try{const r=[...s||[]];r[a]=await v.clients.generateKey({id:e,attr:t}),P(r),u.Z.saveAs(new Blob([r[a].privateKey],{type:"application/octet-stream"}),"private.key"),I(n("generateSuccess"),l.Ux.success)}catch(e){T("clients:generateError",e)}})(E)}});return i.ZP.createElement(l.NP,{variant:"light",className:"keycloak__form"},a&&i.ZP.createElement(Ye,{id:e,attr:a,onClose:()=>{r(void 0),t(),b(f+1)},onCancel:()=>{y(nt[E].name,"false"),r(void 0)}}),i.ZP.createElement(S,null),i.ZP.createElement(C,null),tt.map(((t,n)=>i.ZP.createElement(i.HY,{key:t},g&&i.ZP.createElement(et,{id:e,attr:t,onClose:()=>h(!1)}),i.ZP.createElement(lt,{keyInfo:s?.[n],attr:t,onChanged:r,onGenerate:(e,t)=>{Z(e),t?w():x()},onImport:()=>h(!0)})))))};var rt=n(2190);const it=({onConfirm:e,closeDialog:t})=>{const{t:n}=(0,o.$G)("clients"),[a,r]=(0,i.eJ)({});return i.ZP.createElement(l.u_,{title:n("import"),isOpen:!0,variant:"small",onClose:t,actions:[i.ZP.createElement(l.zx,{id:"modal-confirm",key:"confirm",onClick:()=>{e(a),t()},"data-testid":"confirm"},n("confirm")),i.ZP.createElement(l.zx,{"data-testid":"cancel",id:"modal-cancel",key:"cancel",variant:l.Wu.link,onClick:()=>{t()}},n("common:cancel"))]},i.ZP.createElement(l.l0,null,i.ZP.createElement(rt.K,{id:"import-resource",onChange:r})),0!==Object.keys(a).length&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.iz,null),i.ZP.createElement("p",{className:"pf-u-my-lg"},n("importResources")),i.ZP.createElement(l.l0,{isHorizontal:!0},i.ZP.createElement(l.cw,{label:n("policyEnforcementMode"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:policyEnforcementMode",fieldLabelId:"clients:policyEnforcementMode"}),fieldId:"policyEnforcementMode",hasNoPaddingTop:!0},i.ZP.createElement(l.Y8,{id:"policyEnforcementMode",name:"policyEnforcementMode",label:n(`policyEnforcementModes.${a.policyEnforcementMode}`),isChecked:!0,isDisabled:!0,className:"pf-u-mb-md"})),i.ZP.createElement(l.cw,{label:n("decisionStrategy"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:decisionStrategy",fieldLabelId:"clients:decisionStrategy"}),fieldId:"decisionStrategy",hasNoPaddingTop:!0},i.ZP.createElement(l.Y8,{id:"decisionStrategy",name:"decisionStrategy",isChecked:!0,isDisabled:!0,label:n(`decisionStrategies.${a.decisionStrategy}`),className:"pf-u-mb-md"})),i.ZP.createElement(l.cw,{hasNoPaddingTop:!0,label:n("allowRemoteResourceManagement"),fieldId:"allowRemoteResourceManagement",labelIcon:i.ZP.createElement(g.B,{helpText:n("allowRemoteResourceManagement"),fieldLabelId:"clients:allowRemoteResourceManagement"})},i.ZP.createElement(l.rs,{id:"allowRemoteResourceManagement",label:n("common:on"),labelOff:n("common:off"),isChecked:a.allowRemoteResourceManagement,isDisabled:!0}))),i.ZP.createElement("div",{className:"pf-u-mt-md"},Object.entries(a).filter((([,e])=>Array.isArray(e))).map((([e,t])=>i.ZP.createElement(i.HY,{key:e},i.ZP.createElement(l.iz,null),i.ZP.createElement("p",{className:"pf-u-my-sm"},i.ZP.createElement("strong",null,t.length," ",n(e))))))),i.ZP.createElement(l.iz,null),i.ZP.createElement(l.bZ,{variant:"warning",className:"pf-u-mt-lg",isInline:!0,title:n("importWarning")})))};var ct=n(5251);const ot=["ENFORCING","PERMISSIVE","DISABLED"],st=({clientId:e})=>{const{t}=(0,o.$G)("clients"),[n,a]=(0,i.eJ)(),[r,s]=(0,x.Z)(),d=(0,c.cI)({}),{control:u,reset:P,handleSubmit:E}=d,{adminClient:Z}=(0,p.K3)(),{addAlert:h,addError:f}=(0,m.Z7)();(0,p.ib)((()=>Z.clients.getResourceServer({id:e})),(e=>{a(e),P(e)}),[]);const b=async n=>{try{await Z.clients.updateResourceServer({id:e},n),h(t("updateResourceSuccess"),l.Ux.success)}catch(e){f("clients:resourceSaveError",e)}};return n?i.ZP.createElement(l.NP,{variant:"light"},r&&i.ZP.createElement(it,{onConfirm:async n=>{try{await Z.clients.importResource({id:e},n),h(t("importResourceSuccess"),l.Ux.success),P({...n})}catch(e){f("clients:importResourceError",e)}},closeDialog:s}),i.ZP.createElement(w.N,{role:"view-clients",isHorizontal:!0},i.ZP.createElement(l.cw,{label:t("import"),fieldId:"import",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:import",fieldLabelId:"clients:import"})},i.ZP.createElement(l.zx,{variant:"secondary",onClick:s},t("import"))),i.ZP.createElement(l.iz,null),i.ZP.createElement(l.cw,{label:t("policyEnforcementMode"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:policyEnforcementMode",fieldLabelId:"clients:policyEnforcementMode"}),fieldId:"policyEnforcementMode",hasNoPaddingTop:!0},i.ZP.createElement(c.Qr,{name:"policyEnforcementMode","data-testid":"policyEnforcementMode",defaultValue:ot[0],control:u,render:({onChange:e,value:n})=>i.ZP.createElement(i.ZP.Fragment,null,ot.map((a=>i.ZP.createElement(l.Y8,{id:a,key:a,"data-testid":a,isChecked:n===a,name:"policyEnforcementMode",onChange:()=>e(a),label:t(`policyEnforcementModes.${a}`),className:"pf-u-mb-md"}))))})),i.ZP.createElement(c.RV,{...d},i.ZP.createElement(ct.W,{isLimited:!0})),i.ZP.createElement(l.cw,{hasNoPaddingTop:!0,label:t("allowRemoteResourceManagement"),fieldId:"allowRemoteResourceManagement",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:allowRemoteResourceManagement",fieldLabelId:"clients:allowRemoteResourceManagement"})},i.ZP.createElement(c.Qr,{name:"allowRemoteResourceManagement","data-testid":"allowRemoteResourceManagement",defaultValue:!1,control:u,render:({onChange:e,value:n})=>i.ZP.createElement(l.rs,{id:"allowRemoteResourceManagement",label:t("common:on"),labelOff:t("common:off"),isChecked:n,onChange:e})})),i.ZP.createElement(ae,{name:"authenticationSettings",save:()=>E(b)(),reset:()=>P(n),isActive:!0}))):i.ZP.createElement(I.g,null)};var mt=n(2688),dt=n(6853);function ut(e){return i.ZP.createElement(pt,{...e})}function pt({name:e,array:t,convert:n,link:a}){const{t:r}=(0,o.$G)("clients");return i.ZP.createElement(l.gy,null,i.ZP.createElement(l.MU,null,r(e)),i.ZP.createElement(l.bP,null,t?.map((e=>{const t="string"==typeof e?e:n(e);return a?i.ZP.createElement(s.rU,{key:t,to:a(e),className:"pf-u-pr-sm"},t):i.ZP.createElement("span",{key:t,className:"pf-u-pr-sm"},t)})),0===t?.length&&i.ZP.createElement("i",null,r("common:none"))))}var Pt=n(3786),Et=n(3821);const Zt=({id:e,clientId:t,uris:n})=>{const{adminClient:a}=(0,p.K3)(),{realm:r}=(0,T.PL)(),[c,o]=(0,i.eJ)(),[s,m]=(0,i.eJ)();return(0,p.ib)((()=>Promise.all([a.clients.listScopesByResource({id:t,resourceName:e}),a.clients.listPermissionsByResource({id:t,resourceId:e})])),(([e,t])=>{o(e),m(t)}),[]),s&&c?i.ZP.createElement(l.o6,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(ut,{name:"uris",array:n}),i.ZP.createElement(pt,{name:"scopes",array:c,convert:e=>e.name,link:e=>(0,Pt.e)({id:t,realm:r,scopeId:e.id})}),i.ZP.createElement(pt,{name:"associatedPermissions",array:s,convert:e=>e.name,link:e=>(0,Et.n)({id:t,realm:r,permissionId:e.id,permissionType:"resource"})})):i.ZP.createElement(I.g,null)};var gt=n(9189),ht=n(8648);const ft=({array:e})=>{const{t}=(0,o.$G)("clients");return!e||e.length<=1?null:i.ZP.createElement(l.__,{color:"blue"},t("common:more",{count:e.length-1}))};var bt=n(7648);const yt=({types:e,search:t,onSearch:n,isResource:a=!1})=>{const{t:r}=(0,o.$G)("clients"),{register:s,control:m,reset:d,formState:{isDirty:u},handleSubmit:p}=(0,c.cI)({mode:"onChange"}),[P,E]=(0,x.Z)(),[Z,g]=(0,x.Z)();return(0,i.d4)((()=>d(t)),[t]),i.ZP.createElement(l.Lt,{"data-testid":"searchdropdown_dorpdown",className:"pf-u-ml-md",toggle:i.ZP.createElement(l.Z_,{onToggle:E,className:"keycloak__client_authentication__searchdropdown"},r("searchForPermission")),isOpen:P},i.ZP.createElement(l.l0,{isHorizontal:!0,className:"keycloak__client_authentication__searchdropdown_form",onSubmit:p((e=>{E(),n(e)}))},i.ZP.createElement(l.cw,{label:r("common:name"),fieldId:"name"},i.ZP.createElement($.F,{ref:s,type:"text",id:"name",name:"name","data-testid":"searchdropdown_name"})),a&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:r("common:type"),fieldId:"type"},i.ZP.createElement($.F,{ref:s,type:"text",id:"type",name:"type","data-testid":"searchdropdown_type"})),i.ZP.createElement(l.cw,{label:r("uris"),fieldId:"uri"},i.ZP.createElement($.F,{ref:s,type:"text",id:"uri",name:"uri","data-testid":"searchdropdown_uri"})),i.ZP.createElement(l.cw,{label:r("owner"),fieldId:"owner"},i.ZP.createElement($.F,{ref:s,type:"text",id:"owner",name:"owner","data-testid":"searchdropdown_owner"}))),!a&&i.ZP.createElement(l.cw,{label:r("resource"),fieldId:"resource"},i.ZP.createElement($.F,{ref:s,type:"text",id:"resource",name:"resource","data-testid":"searchdropdown_resource"})),i.ZP.createElement(l.cw,{label:r("scope"),fieldId:"scope"},i.ZP.createElement($.F,{ref:s,type:"text",id:"scope",name:"scope","data-testid":"searchdropdown_scope"})),!a&&i.ZP.createElement(l.cw,{label:r("common:type"),fieldId:"type"},i.ZP.createElement(c.Qr,{name:"type",defaultValue:"",control:m,render:({onChange:t,value:n})=>i.ZP.createElement(l.Ph,{toggleId:"type",onToggle:g,onSelect:(e,n)=>{e.stopPropagation(),t(n),g()},selections:n||r("allTypes"),variant:l.TM.single,"aria-label":r("common:type"),isOpen:Z},(t=>[i.ZP.createElement(l.$m,{key:"empty",value:""},r("allTypes")),...(e||[]).map((e=>i.ZP.createElement(l.$m,{selected:e.type===t,key:e.type,value:e.type},e.name)))])(n))})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{variant:"primary",type:"submit","data-testid":"search-btn",isDisabled:!u},r("common:search")),i.ZP.createElement(l.zx,{variant:"link","data-testid":"revert-btn",onClick:()=>n({})},r("common:clear")))))},vt=({clientId:e})=>{const{t}=(0,o.$G)("clients"),{adminClient:n}=(0,p.K3)(),{addAlert:a,addError:r}=(0,m.Z7)(),{realm:c}=(0,T.PL)(),[u,P]=(0,i.eJ)(),[E,Z]=(0,i.eJ)(),[g,h]=(0,i.eJ)(),[f,b]=(0,i.eJ)(0),[y,v]=(0,i.eJ)(10),[k,x]=(0,i.eJ)(0),[S,w]=(0,i.eJ)({});(0,p.ib)((()=>{const t={first:k,max:y+1,deep:!1,...S};return n.clients.listResources({...t,id:e})}),(e=>P(e.map((e=>({...e,isExpanded:!1}))))),[f,S,k,y]);const C=({row:e})=>i.ZP.createElement(i.ZP.Fragment,null,e.uris?.[0]," ",i.ZP.createElement(ft,{array:e.uris})),[R,A]=(0,d.W)({titleKey:"clients:deleteResource",children:i.ZP.createElement(i.ZP.Fragment,null,t("deleteResourceConfirm"),g?.length&&i.ZP.createElement(l.bZ,{variant:"warning",isInline:!0,isPlain:!0,title:t("deleteResourceWarning"),className:"pf-u-pt-lg"},i.ZP.createElement("p",{className:"pf-u-pt-xs"},g.map((e=>i.ZP.createElement("strong",{key:e.id,className:"pf-u-pr-md"},e.name)))))),continueButtonLabel:"clients:confirm",onConfirm:async()=>{try{await n.clients.delResource({id:e,resourceId:E?._id}),a(t("resourceDeletedSuccess"),l.Ux.success),b(f+1)}catch(e){r("clients:resourceDeletedError",e)}}});if(!u)return i.ZP.createElement(I.g,null);const L=0===u.length,N=0!==Object.keys(S).length;return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(A,null),(!L||N)&&i.ZP.createElement(dt.a,{count:u.length,first:k,max:y,onNextClick:x,onPreviousClick:x,onPerPageSelect:(e,t)=>{x(e),v(t)},toolbarItem:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(yt,{search:S,onSearch:w,isResource:!0})),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{"data-testid":"createResource",component:t=>i.ZP.createElement(s.rU,{...t,to:(0,gt.x)({realm:c,id:e})})},t("createResource"))))},!L&&i.ZP.createElement(mt.Xs,{"aria-label":t("resources"),variant:"compact"},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,t("common:name")),i.ZP.createElement(mt.Th,null,t("common:type")),i.ZP.createElement(mt.Th,null,t("owner")),i.ZP.createElement(mt.Th,null,t("uris")),i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null))),u.map(((a,r)=>i.ZP.createElement(mt.p3,{key:a._id,isExpanded:a.isExpanded},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:r,isExpanded:a.isExpanded,onToggle:(e,t)=>{const n=u.map(((e,n)=>n===t?{...e,isExpanded:!e.isExpanded}:e));P(n)}}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${a.name}`},i.ZP.createElement(s.rU,{to:(0,ht.$)({realm:c,id:e,resourceId:a._id})},a.name)),i.ZP.createElement(mt.Td,null,a.type),i.ZP.createElement(mt.Td,null,a.owner?.name),i.ZP.createElement(mt.Td,null,i.ZP.createElement(C,{row:a})),i.ZP.createElement(mt.Td,{width:10},i.ZP.createElement(l.zx,{variant:"link",component:t=>i.ZP.createElement(s.rU,{...t,to:(0,bt.K)({realm:c,id:e,permissionType:"resource",selectedId:a._id})})},t("createPermission"))),i.ZP.createElement(mt.Td,{actions:{items:[{title:t("common:delete"),onClick:async()=>{Z(a),h(await(async t=>n.clients.listPermissionsByResource({id:e,resourceId:t}))(a._id)),R()}}]}})),i.ZP.createElement(mt.Tr,{key:`child-${a._id}`,isExpanded:a.isExpanded},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:4},i.ZP.createElement(mt.GC,null,a.isExpanded&&i.ZP.createElement(Zt,{clientId:e,id:a._id,uris:a.uris}))))))))),L&&N&&i.ZP.createElement(G.M,{isSearchVariant:!0,message:t("common:noSearchResults"),instructions:t("common:noSearchResultsInstructions")}))};var It=n(5732),Tt=n(5937);const kt=({clientId:e})=>{const{t}=(0,o.$G)("clients"),n=(0,s.k6)(),{adminClient:a}=(0,p.K3)(),{realm:r}=(0,T.PL)(),[c,m]=(0,x.Z)(),[d,u]=(0,i.eJ)(),[P,E]=(0,i.eJ)(),[Z,g]=(0,i.eJ)(0),[h,f]=(0,i.eJ)(10),[b,y]=(0,i.eJ)(0),[v,k]=(0,i.eJ)("");(0,p.ib)((async()=>{const t={first:b,max:h+1,deep:!1,name:v},n=await a.clients.listAllScopes({...t,id:e});return await Promise.all(n.map((async t=>{const n={id:e,scopeId:t.id},[l,r]=await Promise.all([a.clients.listAllResourcesByScope(n),a.clients.listAllPermissionsByScope(n)]);return{...t,resources:l,permissions:r,isExpanded:!1}})))}),u,[Z,v,b,h]);const S=({row:e})=>i.ZP.createElement(i.ZP.Fragment,null,e.resources?.[0]?.name?e.resources[0]?.name:""," ",i.ZP.createElement(ft,{array:e.resources})),w=({row:e})=>i.ZP.createElement(i.ZP.Fragment,null,e.permissions?.[0]?.name?e.permissions[0]?.name:""," ",i.ZP.createElement(ft,{array:e.permissions}));if(!d)return i.ZP.createElement(I.g,null);const C=0===d.length,R=""!==v;return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(Tt.I,{clientId:e,open:c,toggleDialog:m,selectedScope:P,refresh:()=>g(Z+1)}),(!C||R)&&i.ZP.createElement(dt.a,{count:d.length,first:b,max:h,onNextClick:y,onPreviousClick:y,onPerPageSelect:(e,t)=>{y(e),f(t)},inputGroupName:"search",inputGroupPlaceholder:t("searchByName"),inputGroupOnEnter:k,toolbarItem:i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{"data-testid":"createAuthorizationScope",component:t=>i.ZP.createElement(s.rU,{...t,to:(0,It.Y)({realm:r,id:e})})},t("createAuthorizationScope")))},!C&&i.ZP.createElement(mt.Xs,{"aria-label":t("scopes"),variant:"compact"},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,t("common:name")),i.ZP.createElement(mt.Th,null,t("resources")),i.ZP.createElement(mt.Th,null,t("common:permissions")),i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null))),d.map(((n,a)=>i.ZP.createElement(mt.p3,{key:n.id,isExpanded:n.isExpanded},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:a,isExpanded:n.isExpanded,onToggle:(e,t)=>{const n=d.map(((e,n)=>n===t?{...e,isExpanded:!e.isExpanded}:e));u(n)}}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${n.name}`},i.ZP.createElement(s.rU,{to:(0,Pt.e)({realm:r,id:e,scopeId:n.id})},n.name)),i.ZP.createElement(mt.Td,null,i.ZP.createElement(S,{row:n})),i.ZP.createElement(mt.Td,null,i.ZP.createElement(w,{row:n})),i.ZP.createElement(mt.Td,{width:10},i.ZP.createElement(l.zx,{variant:"link",component:t=>i.ZP.createElement(s.rU,{...t,to:(0,bt.K)({realm:r,id:e,permissionType:"scope",selectedId:n.id})})},t("createPermission"))),i.ZP.createElement(mt.Td,{isActionCell:!0,actions:{items:[{title:t("common:delete"),onClick:()=>{E(n),m()}}]}})),i.ZP.createElement(mt.Tr,{key:`child-${n.id}`,isExpanded:n.isExpanded},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:4},i.ZP.createElement(mt.GC,null,n.isExpanded&&i.ZP.createElement(l.o6,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(pt,{name:"resources",array:n.resources,convert:e=>e.name,link:t=>(0,ht.$)({id:e,realm:r,resourceId:t._id})}),i.ZP.createElement(pt,{name:"associatedPermissions",array:n.permissions,convert:e=>e.name,link:t=>(0,Et.n)({id:e,realm:r,permissionId:t.id,permissionType:t.type})})))))))))),C&&!R&&i.ZP.createElement(G.M,{message:t("emptyAuthorizationScopes"),instructions:t("emptyAuthorizationInstructions"),onPrimaryAction:()=>n.push((0,It.Y)({id:e,realm:r})),primaryActionText:t("createAuthorizationScope")}),C&&R&&i.ZP.createElement(G.M,{isSearchVariant:!0,message:t("common:noSearchResults"),instructions:t("common:noSearchResultsInstructions")}))};var xt=n(4405),St=n(1792);const wt=({policyProviders:e,onSelect:t,toggleDialog:n})=>{const{t:a}=(0,o.$G)("clients");return i.ZP.createElement(l.u_,{"aria-labelledby":a("addPredefinedMappers"),variant:l.vE.medium,header:i.ZP.createElement(l.wu,null,i.ZP.createElement(l.xv,{component:l.qO.h1},a("chooseAPolicyType")),i.ZP.createElement(l.xv,null,a("chooseAPolicyTypeInstructions"))),isOpen:!0,onClose:n},i.ZP.createElement(mt.Xs,{"aria-label":a("policies"),variant:"compact"},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null,a("common:name")),i.ZP.createElement(mt.Th,null,a("common:description")))),i.ZP.createElement(mt.p3,null,e?.map((e=>i.ZP.createElement(mt.Tr,{key:e.type,"data-testid":e.type,onRowClick:()=>t(e),isHoverable:!0},i.ZP.createElement(mt.Td,null,e.name),i.ZP.createElement(mt.Td,null,(0,St.isValidComponentType)(e.type)&&a(`policyProvider.${e.type}`))))))))};var Ct=n(8609);const Rt=({clientId:e})=>{const{t}=(0,o.$G)("clients"),{adminClient:n}=(0,p.K3)(),{addAlert:a,addError:r}=(0,m.Z7)(),{realm:c}=(0,T.PL)(),u=(0,s.k6)(),[P,Z]=(0,i.eJ)(),[g,h]=(0,i.eJ)(),[f,b]=(0,i.eJ)(),[y,v]=(0,i.eJ)(0),[k,S]=(0,i.eJ)(10),[w,C]=(0,i.eJ)(0),[R,A]=(0,i.eJ)({}),[L,N]=(0,x.Z)();(0,p.ib)((async()=>{const t=await n.clients.listPolicies({first:w,max:k+1,id:e,permission:"false",...R});return await Promise.all([n.clients.listPolicyProviders({id:e}),...t.map((async t=>{const l=await n.clients.listDependentPolicies({id:e,policyId:t.id});return{...t,dependentPolicies:l,isExpanded:!1}}))])}),(([e,...t])=>{b(e.filter((e=>"resource"!==e.type&&"scope"!==e.type))),Z(t)}),[y,R,w,k]);const O=({row:e})=>i.ZP.createElement(i.ZP.Fragment,null,e.dependentPolicies?.[0]?.name," ",i.ZP.createElement(ft,{array:e.dependentPolicies})),[B,U]=(0,d.W)({titleKey:"clients:deletePolicy",children:i.ZP.createElement(i.ZP.Fragment,null,t("deletePolicyConfirm"),g?.dependentPolicies&&g.dependentPolicies.length>0&&i.ZP.createElement(l.bZ,{variant:"warning",isInline:!0,isPlain:!0,title:t("deletePolicyWarning"),className:"pf-u-pt-lg"},i.ZP.createElement("p",{className:"pf-u-pt-xs"},g.dependentPolicies.map((e=>i.ZP.createElement("strong",{key:e.id,className:"pf-u-pr-md"},e.name)))))),continueButtonLabel:"clients:confirm",onConfirm:async()=>{try{await n.clients.delPolicy({id:e,policyId:g?.id}),a(t("policyDeletedSuccess"),l.Ux.success),v(y+1)}catch(e){r("clients:policyDeletedError",e)}}});if(!P)return i.ZP.createElement(I.g,null);const $=0===P.length,_=0!==Object.keys(R).length;return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(U,null),(!$||_)&&i.ZP.createElement(i.ZP.Fragment,null,L&&i.ZP.createElement(wt,{policyProviders:f,onSelect:t=>u.push((0,Ct.i)({id:e,realm:c,policyType:t.type})),toggleDialog:N}),i.ZP.createElement(dt.a,{count:P.length,first:w,max:k,onNextClick:C,onPreviousClick:C,onPerPageSelect:(e,t)=>{C(e),S(t)},toolbarItem:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(yt,{types:f,search:R,onSearch:A})),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.zx,{"data-testid":"createPolicy",onClick:N},t("createPolicy"))))},!$&&i.ZP.createElement(mt.Xs,{"aria-label":t("resources"),variant:"compact"},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,t("common:name")),i.ZP.createElement(mt.Th,null,t("common:type")),i.ZP.createElement(mt.Th,null,t("dependentPermission")),i.ZP.createElement(mt.Th,null,t("common:description")),i.ZP.createElement(mt.Th,null))),P.map(((n,a)=>i.ZP.createElement(mt.p3,{key:n.id,isExpanded:n.isExpanded},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:a,isExpanded:n.isExpanded,onToggle:(e,t)=>{const n=P.map(((e,n)=>n===t?{...e,isExpanded:!e.isExpanded}:e));Z(n)}}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${n.name}`},i.ZP.createElement(s.rU,{to:(0,xt.p)({realm:c,id:e,policyType:n.type,policyId:n.id})},n.name)),i.ZP.createElement(mt.Td,null,(0,E.LO)(n.type)),i.ZP.createElement(mt.Td,null,i.ZP.createElement(O,{row:n})),i.ZP.createElement(mt.Td,null,n.description),i.ZP.createElement(mt.Td,{actions:{items:[{title:t("common:delete"),onClick:async()=>{h(n),B()}}]}})),i.ZP.createElement(mt.Tr,{key:`child-${n.id}`,isExpanded:n.isExpanded},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:4},i.ZP.createElement(mt.GC,null,n.isExpanded&&i.ZP.createElement(l.o6,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(pt,{name:"dependentPermission",array:n.dependentPolicies,convert:e=>e.name,link:t=>(0,Et.n)({realm:c,id:e,permissionId:t.id,permissionType:t.type})}))))))))))),$&&_&&i.ZP.createElement(G.M,{isSearchVariant:!0,message:t("common:noSearchResults"),instructions:t("common:noSearchResultsInstructions")}),$&&!_&&i.ZP.createElement(i.ZP.Fragment,null,L&&i.ZP.createElement(wt,{policyProviders:f?.filter((e=>"aggregate"!==e.type)),onSelect:t=>u.push((0,Ct.i)({id:e,realm:c,policyType:t.type})),toggleDialog:N}),i.ZP.createElement(G.M,{message:t("emptyPolicies"),instructions:t("emptyPoliciesInstructions"),primaryActionText:t("createPolicy"),onPrimaryAction:N})))},At=({permissionType:e,disabled:t=!1,clientId:n})=>{const{t:a}=(0,o.$G)("clients"),{realm:r}=(0,T.PL)(),c=(0,s.k6)();return i.ZP.createElement(l.zx,{"data-testid":`create-${e}`,className:t?"keycloak__permissions__empty_state ":"pf-u-m-sm",variant:"secondary",onClick:()=>!t&&c.push((0,bt.K)({realm:r,id:n,permissionType:e}))},a(`create${(0,E.LO)(e)}BasedPermission`))},Lt=({permissionType:e,disabled:t,...n})=>{const{t:a}=(0,o.$G)("clients");return t?i.ZP.createElement(l.u,{content:a(`no${(0,E.LO)(e)}CreateHint`)},i.ZP.createElement(At,{...n,disabled:t,permissionType:e})):i.ZP.createElement(At,{...n,disabled:t,permissionType:e})},Nt=({clientId:e,isResourceEnabled:t,isScopeEnabled:n})=>{const{t:r}=(0,o.$G)("clients");return i.ZP.createElement(l.ub,{"data-testid":"empty-state",variant:"large"},i.ZP.createElement(l.kr,{icon:a.wl}),i.ZP.createElement(l.Dx,{headingLevel:"h1",size:"lg"},r("emptyPermissions")),i.ZP.createElement(l.Bq,null,r("emptyPermissionInstructions")),i.ZP.createElement(Lt,{permissionType:"resource",disabled:t,clientId:e}),i.ZP.createElement("br",null),i.ZP.createElement(Lt,{permissionType:"scope",disabled:n,clientId:e}))},Ot=({clientId:e})=>{const{t}=(0,o.$G)("clients"),n=(0,s.k6)(),{adminClient:a}=(0,p.K3)(),{addAlert:r,addError:c}=(0,m.Z7)(),{realm:u}=(0,T.PL)(),[P,E]=(0,i.eJ)(),[Z,g]=(0,i.eJ)(),[h,f]=(0,i.eJ)(),[b,y]=(0,i.eJ)(),[v,k]=(0,x.Z)(),[S,w]=(0,i.eJ)({}),[C,R]=(0,i.eJ)(0),[A,L]=(0,i.eJ)(10),[N,O]=(0,i.eJ)(0),B=({row:e})=>i.ZP.createElement(i.ZP.Fragment,null,e.associatedPolicies?.[0]?.name," ",i.ZP.createElement(ft,{array:e.associatedPolicies}));(0,p.ib)((async()=>{const t=await a.clients.findPermissions({first:N,max:A+1,id:e,...S});return await Promise.all(t.map((async t=>{const n=await a.clients.getAssociatedPolicies({id:e,permissionId:t.id});return{...t,associatedPolicies:n,isExpanded:!1}})))}),E,[C,S,N,A]),(0,p.ib)((async()=>{const t={first:0,max:1},[n,l,r]=await Promise.all([a.clients.listPolicyProviders({id:e}),a.clients.listResources({...t,id:e}),a.clients.listAllScopes({...t,id:e})]);return{policies:n.filter((e=>"resource"===e.type||"scope"===e.type)),resources:1!==l.length,scopes:1!==r.length}}),(({policies:e,resources:t,scopes:n})=>{f(e),y({resources:t,scopes:n})}),[]);const[U,$]=(0,d.W)({titleKey:"clients:deletePermission",messageKey:t("deletePermissionConfirm",{permission:Z?.name}),continueButtonVariant:l.Wu.danger,continueButtonLabel:"clients:confirm",onConfirm:async()=>{try{await a.clients.delPermission({id:e,type:Z?.type,permissionId:Z?.id}),r(t("permissionDeletedSuccess"),l.Ux.success),R(C+1)}catch(e){c("clients:permissionDeletedError",e)}}});if(!P)return i.ZP.createElement(I.g,null);const _=0===P.length,K=0!==Object.keys(S).length;return i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement($,null),(!_||K)&&i.ZP.createElement(dt.a,{count:P.length,first:N,max:A,onNextClick:O,onPreviousClick:O,onPerPageSelect:(e,t)=>{O(e),L(t)},toolbarItem:i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.Eg,null,i.ZP.createElement(yt,{types:h,search:S,onSearch:w})),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.Lt,{toggle:i.ZP.createElement(l.Z_,{onToggle:k,isPrimary:!0,"data-testid":"permissionCreateDropdown"},t("createPermission")),isOpen:v,dropdownItems:[i.ZP.createElement(l.hP,{"data-testid":"create-resource",key:"createResourceBasedPermission",isDisabled:b?.resources,component:"button",onClick:()=>n.push((0,bt.K)({realm:u,id:e,permissionType:"resource"}))},t("createResourceBasedPermission")),i.ZP.createElement(l.hP,{"data-testid":"create-scope",key:"createScopeBasedPermission",isDisabled:b?.scopes,component:"button",onClick:()=>n.push((0,bt.K)({realm:u,id:e,permissionType:"scope"}))},t("createScopeBasedPermission"))]})))},!_&&i.ZP.createElement(mt.Xs,{"aria-label":t("resources"),variant:"compact"},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,t("common:name")),i.ZP.createElement(mt.Th,null,t("common:type")),i.ZP.createElement(mt.Th,null,t("associatedPolicy")),i.ZP.createElement(mt.Th,null,t("common:description")),i.ZP.createElement(mt.Th,null))),P.map(((n,a)=>i.ZP.createElement(mt.p3,{key:n.id,isExpanded:n.isExpanded},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:a,isExpanded:n.isExpanded,onToggle:(e,t)=>{const n=P.map(((e,n)=>n===t?{...e,isExpanded:!e.isExpanded}:e));E(n)}}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${n.name}`},i.ZP.createElement(s.rU,{to:(0,Et.n)({realm:u,id:e,permissionType:n.type,permissionId:n.id})},n.name)),i.ZP.createElement(mt.Td,null,h?.find((e=>e.type===n.type))?.name),i.ZP.createElement(mt.Td,null,i.ZP.createElement(B,{row:n})),i.ZP.createElement(mt.Td,null,n.description),i.ZP.createElement(mt.Td,{actions:{items:[{title:t("common:delete"),onClick:async()=>{g(n),U()}}]}})),i.ZP.createElement(mt.Tr,{key:`child-${n.id}`,isExpanded:n.isExpanded},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:5},i.ZP.createElement(mt.GC,null,n.isExpanded&&i.ZP.createElement(l.o6,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(pt,{name:"associatedPolicy",array:n.associatedPolicies,convert:e=>e.name,link:t=>(0,xt.p)({id:e,realm:u,policyId:t.id,policyType:t.type})})))))))))),_&&!K&&i.ZP.createElement(Nt,{clientId:e,isResourceEnabled:b?.resources,isScopeEnabled:b?.scopes}),_&&K&&i.ZP.createElement(G.M,{isSearchVariant:!0,message:t("common:noSearchResults"),instructions:t("common:noSearchResultsInstructions")}))},Bt=({name:e,rowIndex:t,attribute:n,selectableValues:a,resources:s})=>{const{t:m}=(0,o.$G)("common"),{control:d,register:u,getValues:p}=(0,c.Gc)(),[P,E]=(0,i.eJ)([!1]),Z=(e,t)=>{const n=[...P];n[e]=t,E(n)},g=(0,i.Ye)((()=>{let e=[];return a&&(e=He.qf.find((e=>e.key===p().context?.[t]?.key))?.values),e}),[p]);return i.ZP.createElement(mt.Td,null,s||g?.length?i.ZP.createElement(c.Qr,{name:`${e}[${t}].value`,defaultValue:[],control:d,render:({onChange:a,value:r})=>i.ZP.createElement(l.Ph,{id:`${n.id}-value`,className:"kc-attribute-value-selectable",name:`${e}[${t}].value`,chipGroupProps:{numChips:1,expandedText:m("common:hide"),collapsedText:m("common:showRemaining")},toggleId:`group-${e}`,onToggle:e=>Z(t,e),isOpen:P[t],variant:l.TM.typeahead,typeAheadAriaLabel:m("clients:selectOrTypeAKey"),placeholderText:m("clients:selectOrTypeAKey"),selections:r,onSelect:(e,n)=>{a(n),Z(t,!1)}},(()=>{const e=s?.find((e=>e.name===p().resources?.[t]?.key))?.scopes;return g?.length&&!s?g.map((e=>i.ZP.createElement(l.$m,{key:e.key,value:e.key},e.name))):e?.length?e.map((e=>i.ZP.createElement(l.$m,{key:e.name,value:e.name},e.name))):void 0})())}):i.ZP.createElement($.F,{id:`${h=n.key,(0,r.eV)(h).replace(/\W/g,"")}-value`,className:"value-input",name:`${e}[${t}].value`,ref:u(),defaultValue:n.value,"data-testid":"attribute-value-input"}));var h},Ut=({name:e,selectableValues:t,resources:n})=>{const{t:r}=(0,o.$G)("common"),{control:s,watch:m}=(0,c.Gc)(),{fields:d,append:u,remove:p}=(0,c.Dq)({control:s,name:e}),[P,E]=(0,i.eJ)([!1]),Z=(e,t)=>{const n=[...P];n[e]=t,E(n)};(0,i.d4)((()=>{d.length||u({key:"",value:""},!1)}),[d]);const g=m(`${e}[${d.length-1}].value`,"");return i.ZP.createElement(mt.Xs,{className:"kc-attributes__table","aria-label":"Role attribute keys and values",variant:"compact",borders:!1},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,{id:"key",width:40},r("key")),i.ZP.createElement(mt.Th,{id:"value",width:40},r("value")))),i.ZP.createElement(mt.p3,null,d.map(((o,m)=>i.ZP.createElement(mt.Tr,{key:o.id,"data-testid":"attribute-row"},i.ZP.createElement(mt.Td,null,i.ZP.createElement(c.Qr,{name:`${e}[${m}].key`,defaultValue:o.key,control:s,render:({onChange:a,value:c})=>i.ZP.createElement(l.Ph,{id:`${e}[${m}].key`,className:"kc-attribute-key-selectable",name:`${e}[${m}].key`,toggleId:`group-${e}`,onToggle:e=>Z(m,e),isOpen:P[m],variant:l.TM.typeahead,typeAheadAriaLabel:r("clients:selectOrTypeAKey"),placeholderText:r("clients:selectOrTypeAKey"),selections:c,onSelect:(e,t)=>{a(t.toString()),Z(m,!1)}},t?.map((e=>i.ZP.createElement(l.$m,{selected:e.name===c,key:e.key,value:n?e.name:e.key},e.name))))})),i.ZP.createElement(Bt,{name:e,attribute:o,rowIndex:m,selectableValues:t,resources:n}),i.ZP.createElement(mt.Td,{key:"minus-button",id:`kc-minus-button-${m}`},i.ZP.createElement(l.zx,{id:`minus-button-${m}`,variant:"link",className:"kc-attributes__minus-icon",onClick:()=>p(m)},i.ZP.createElement(a.$_,null)))))),i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,null,i.ZP.createElement(l.zx,{"aria-label":r("addAttribute"),id:"plus-icon",variant:"link",className:"kc-attributes__plus-icon",onClick:()=>{u({key:"",value:""}),E([...P,!1])},icon:i.ZP.createElement(a.wl,null),isDisabled:!g,"data-testid":"attribute-add-row"},r("addAttribute"))))))};var $t,_t,Kt,Ft=n(4659),Mt=n(6121);n(9150),n(6916),n(3359),n(4721),function(e){e.AFFIRMATIVE="AFFIRMATIVE",e.UNANIMOUS="UNANIMOUS",e.CONSENSUS="CONSENSUS"}($t=$t||($t={})),function(e){e.Permit="PERMIT",e.Deny="DENY"}(_t=_t||(_t={})),function(e){e.POSITIVE="POSITIVE",e.NEGATIVE="NEGATIVE"}(Kt=Kt||(Kt={}));const zt=({idx:e,rowIndex:t,outerPolicy:n,resource:a})=>{const[r,c]=(0,i.eJ)(!1),{t:m}=(0,o.$G)("clients"),{realm:d}=(0,T.PL)(),{clientId:u}=(0,s.UO)();return i.ZP.createElement(mt.p3,{key:e,isExpanded:r},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:t,isExpanded:r,onToggle:()=>c((e=>!e))}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${a.resource}`},i.ZP.createElement(s.rU,{to:(0,Et.n)({realm:d,id:u,permissionType:n.policy?.type,permissionId:n.policy?.id})},n.policy?.name)),i.ZP.createElement(mt.Td,{id:n.status?.toLowerCase()},m(n.status?.toLowerCase())),i.ZP.createElement(mt.Td,null,m(`${n.policy?.decisionStrategy?.toLowerCase()}`)),i.ZP.createElement(mt.Td,null,n.status===_t.Permit?a.policies?.[t].scopes?.join(", "):"-"),i.ZP.createElement(mt.Td,null,n.status===_t.Deny&&a.policies?.[t]?.scopes?.length?a.policies[t].scopes?.join(", "):"-")),i.ZP.createElement(mt.Tr,{key:`child-${a.resource}`,isExpanded:r},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:5},r&&i.ZP.createElement(mt.GC,null,i.ZP.createElement(l.o6,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(l.wu,null,i.ZP.createElement(l.Gn,null,n.associatedPolicies?.map((e=>i.ZP.createElement(l.Ts,{key:"policyDetails"},i.ZP.createElement(s.rU,{to:(0,xt.p)({realm:d,id:u,policyType:e.policy?.type,policyId:e.policy?.id})},e.policy?.name),m("votedToStatus",{status:(0,l.Xz)(e.status)})))))))))))},Jt=({rowIndex:e,resource:t,evaluateResults:n})=>{const[l,a]=(0,i.eJ)(!1),{t:r}=(0,o.$G)("clients");return i.ZP.createElement(mt.p3,{isExpanded:l},i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Td,{expand:{rowIndex:e,isExpanded:l,onToggle:()=>a((e=>!e))}}),i.ZP.createElement(mt.Td,{"data-testid":`name-column-${t.resource}`},t.resource?.name),i.ZP.createElement(mt.Td,{id:t.status?.toLowerCase()},r(`${t.status?.toLowerCase()}`)),i.ZP.createElement(mt.Td,null,t.allowedScopes?.length?t.allowedScopes.map((e=>e.name)):"-")),i.ZP.createElement(mt.Tr,{key:`child-${t.resource}`,isExpanded:l},i.ZP.createElement(mt.Td,null),i.ZP.createElement(mt.Td,{colSpan:5},i.ZP.createElement(mt.GC,null,l&&i.ZP.createElement(Mt.D,{isHorizontal:!0,className:"keycloak_resource_details"},i.ZP.createElement(mt.Xs,{"aria-label":r("evaluationResults")},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,r("permission")),i.ZP.createElement(mt.Th,null,r("results")),i.ZP.createElement(mt.Th,null,r("decisionStrategy")),i.ZP.createElement(mt.Th,null,r("grantedScopes")),i.ZP.createElement(mt.Th,null,r("deniedScopes")),i.ZP.createElement(mt.Th,null))),Object.values(n[e].policies).map(((n,l)=>i.ZP.createElement(zt,{key:l,idx:l,rowIndex:e,outerPolicy:n,resource:t})))))))))},Gt=({data:e})=>{const{t}=(0,o.$G)("clients"),[n,a]=(0,x.Z)();return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.zx,{"data-testid":"authorization-revert",onClick:a,variant:"secondary"},t("showAuthData")),i.ZP.createElement(l.u_,{variant:l.vE.medium,isOpen:n,"aria-label":t("authData"),header:i.ZP.createElement(l.wu,null,i.ZP.createElement(l.xv,{component:l.qO.h1},t("authData")),i.ZP.createElement(l.xv,null,t("authDataDescription"))),onClose:a,actions:[i.ZP.createElement(l.zx,{"data-testid":"cancel",id:"modal-cancel",key:"cancel",onClick:a},t("common:cancel"))]},i.ZP.createElement(h.Q,{readOnly:!0,rows:20,value:(0,E.tR)(e)})))};var Dt,Vt;(Vt=Dt||(Dt={})).All="ALL",Vt.StatusDenied="STATUS_DENIED",Vt.StatusPermitted="STATUS_PERMITTED";const qt=({evaluateResult:e,refresh:t,back:n})=>{const{t:r}=(0,o.$G)("clients"),[c,s]=(0,x.Z)(),[m,d]=(0,i.eJ)(Dt.All),[u,p]=(0,i.eJ)(""),[P,E]=(0,i.eJ)(""),Z=()=>{p(P)},g=(0,i.Ye)((()=>function(e,t){switch(t){case Dt.StatusPermitted:return e.filter((({status:e})=>"PERMIT"===e));case Dt.StatusDenied:return e.filter((({status:e})=>"DENY"===e));default:return e}}(e.results,m).filter((({resource:e})=>e?.name?.includes(u)??!1))),[e.results,m,u]),h=0===e.results.length,f=0===g.length;return i.ZP.createElement(l.NP,null,i.ZP.createElement(l.o8,null,i.ZP.createElement(l.ki,{className:"providers-toolbar"},i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.BZ,null,i.ZP.createElement(l.oi,{name:"inputGroupName",id:"inputGroupName",type:"search","aria-label":r("common:search"),placeholder:r("common:search"),onChange:E,onKeyDown:e=>{"Enter"===e.key&&Z()}}),i.ZP.createElement(l.zx,{variant:l.Wu.control,"aria-label":r("common:search"),onClick:()=>Z()},i.ZP.createElement(a.W1,null)))),i.ZP.createElement(l.Eg,null,i.ZP.createElement(l.Ph,{width:300,"data-testid":"filter-type-select",isOpen:c,className:"kc-filter-type-select",variant:l.TM.single,onToggle:s,onSelect:(e,n)=>{d(n),s(),t()},selections:m},i.ZP.createElement(l.$m,{"data-testid":"all-results-option",value:Dt.All,isPlaceholder:!0},r("allResults")),i.ZP.createElement(l.$m,{"data-testid":"result-permit-option",value:Dt.StatusPermitted},r("resultPermit")),i.ZP.createElement(l.$m,{"data-testid":"result-deny-option",value:Dt.StatusDenied},r("resultDeny")))))),!f&&i.ZP.createElement(mt.Xs,{"aria-label":r("evaluationResults")},i.ZP.createElement(mt.hr,null,i.ZP.createElement(mt.Tr,null,i.ZP.createElement(mt.Th,null),i.ZP.createElement(mt.Th,null,r("resource")),i.ZP.createElement(mt.Th,null,r("overallResults")),i.ZP.createElement(mt.Th,null,r("scopes")),i.ZP.createElement(mt.Th,null))),g.map(((t,n)=>i.ZP.createElement(Jt,{key:n,rowIndex:n,resource:t,evaluateResults:e.results})))),(f||h)&&i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.iz,null),i.ZP.createElement(G.M,{isSearchVariant:!0,message:r("common:noSearchResults"),instructions:r("common:noSearchResultsInstructions")})),i.ZP.createElement(l.WK,{className:"kc-evaluated-options"},i.ZP.createElement(l.zx,{"data-testid":"authorization-eval",id:"back-btn",onClick:n},r("common:back")),i.ZP.createElement(l.zx,{"data-testid":"authorization-reevaluate",id:"reevaluate-btn",variant:"secondary",onClick:t},r("clients:reevaluate")),i.ZP.createElement(Gt,{data:e.rpt})))};var Wt=n(1725),jt=n(4997);const Ht=({client:e})=>{const t=(0,c.cI)({mode:"onChange"}),{control:n,register:a,reset:r,errors:s,trigger:m,formState:{isValid:d}}=t,{t:u}=(0,o.$G)("clients"),{adminClient:P}=(0,p.K3)(),E=(0,T.PL)(),[Z,h]=(0,i.eJ)(!1),[f,b]=(0,i.eJ)(!1),[y,v]=(0,i.eJ)(!1),[I,k]=(0,i.eJ)(!1),[x,S]=(0,i.eJ)([]),[C,R]=(0,i.eJ)([]),[A,L]=(0,i.eJ)(),[N,O]=(0,i.eJ)([]),{hasAccess:B}=(0,ie.md)();if(!B("view-users"))return i.ZP.createElement(Ft.q,{permissionNeeded:"view-users"});(0,p.ib)((()=>P.roles.find()),(e=>{O(e)}),[]),(0,p.ib)((()=>Promise.all([P.clients.listResources({id:e.id}),P.clients.listAllScopes({id:e.id})])),(([e,t])=>{S(e),R(t)}),[]);const U=async()=>{if(!await m())return;const n=t.getValues(),l=n.resources?.map((({key:e})=>e)),a={roleIds:n.roleIds??[],clientId:n.client.id,userId:n.user[0],resources:n.resources?.filter((e=>l?.includes(e.name))),entitlements:!1,context:{attributes:Object.fromEntries(n.context.attributes.filter((e=>e.key||""!==e.value)).map((({key:e,value:t})=>[e,t])))}},r=await P.clients.evaluateResource({id:e.id,realm:E.realm},a);return L(r),r};return A?i.ZP.createElement(qt,{evaluateResult:A,refresh:U,back:()=>L(void 0)}):i.ZP.createElement(l.NP,null,i.ZP.createElement(c.RV,{...t},i.ZP.createElement(Xe.b,{className:"kc-identity-information",title:u("clients:identityInformation")},i.ZP.createElement(w.N,{isHorizontal:!0,role:"view-clients"},i.ZP.createElement(Wt.L,{name:"client",label:"client",namespace:"clients",helpText:"clients-help:client",defaultValue:e.clientId}),i.ZP.createElement(jt.o,{name:"user",label:"users",helpText:"clients-help:selectUser",defaultValue:"",variant:l.TM.typeahead,isRequired:!0}),i.ZP.createElement(l.cw,{label:u("roles"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:roles",fieldLabelId:"clients:roles"}),fieldId:"realmRole",validated:s.roleIds?"error":"default",helperTextInvalid:u("common:required"),isRequired:!0},i.ZP.createElement(c.Qr,{name:"roleIds",placeholderText:u("selectARole"),control:n,defaultValue:[],rules:{validate:e=>e.length>0},render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{variant:l.TM.typeaheadMulti,toggleId:"role",onToggle:b,selections:t,onSelect:(n,l)=>{const a=l.toString();t.includes(a)?e(t.filter((e=>e!==a))):e([...t,a]),b(!1)},onClear:t=>{t.stopPropagation(),e([])},"aria-label":u("realmRole"),isOpen:f},N.map((e=>i.ZP.createElement(l.$m,{selected:e.name===t,key:e.name,value:e.name}))))})))),i.ZP.createElement(Xe.b,{className:"kc-permissions",title:u("common:permissions")},i.ZP.createElement(w.N,{isHorizontal:!0,role:"view-clients"},i.ZP.createElement(l.cw,{label:u("applyToResourceType"),fieldId:"applyToResourceType",labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:applyToResourceType",fieldLabelId:"clients:applyToResourceType"})},i.ZP.createElement(l.rs,{id:"applyToResource-switch",label:u("common:on"),labelOff:u("common:off"),isChecked:I,onChange:k})),I?i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(l.cw,{label:u("resourceType"),isRequired:!0,labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:resourceType",fieldLabelId:"clients:resourceType"}),fieldId:"client",validated:t.errors.alias?"error":"default",helperTextInvalid:u("common:required")},i.ZP.createElement($.F,{type:"text",id:"alias",name:"alias","data-testid":"alias",ref:a({required:!0})})),i.ZP.createElement(l.cw,{label:u("authScopes"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:scopesSelect",fieldLabelId:"clients:client"}),fieldId:"authScopes"},i.ZP.createElement(c.Qr,{name:"authScopes",defaultValue:[],control:n,render:({onChange:e,value:t})=>i.ZP.createElement(l.Ph,{toggleId:"authScopes",onToggle:h,onSelect:(n,l)=>{const a=l.toString();t.includes(a)?e(t.filter((e=>e!==a))):e([...t,a]),h(!1)},selections:t,variant:l.TM.typeaheadMulti,"aria-label":u("authScopes"),isOpen:Z},C.map((e=>i.ZP.createElement(l.$m,{selected:e.name===t,key:e.id,value:e.name}))))}))):i.ZP.createElement(l.cw,{label:u("resourcesAndAuthScopes"),id:"resourcesAndAuthScopes",isRequired:!0,labelIcon:i.ZP.createElement(g.B,{helpText:u("clients-help:contextualAttributes"),fieldLabelId:"resourcesAndAuthScopes"}),helperTextInvalid:u("common:required"),fieldId:"resourcesAndAuthScopes"},i.ZP.createElement(Ut,{selectableValues:x.map((e=>({name:e.name,key:e._id}))),resources:x,name:"resources"})),i.ZP.createElement(l.Lm,{toggleText:u("contextualInfo"),onToggle:()=>v(!y),isExpanded:y},i.ZP.createElement(l.cw,{label:u("contextualAttributes"),id:"contextualAttributes",labelIcon:i.ZP.createElement(g.B,{helpText:u("clients-help:contextualAttributes"),fieldLabelId:"contextualAttributes"}),helperTextInvalid:u("common:required"),fieldId:"contextualAttributes"},i.ZP.createElement(Ut,{selectableValues:He.qf,name:"context.attributes"})))),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{"data-testid":"authorization-eval",id:"authorization-eval",className:"pf-u-mr-md",isDisabled:!d,onClick:()=>U()},u("evaluate")),i.ZP.createElement(l.zx,{"data-testid":"authorization-revert",id:"authorization-revert",className:"pf-u-mr-md",variant:"link",onClick:()=>r()},u("common:revert"))))))};var Qt=n(7482),Yt=n(4206),Xt=n(6406);const en=()=>{const{t:e}=(0,o.$G)("clients"),{adminClient:t}=(0,p.K3)(),{clientId:n}=(0,s.UO)(),{addAlert:a,addError:r}=(0,m.Z7)(),[c,d]=(0,i.eJ)(),[P,Z]=(0,i.eJ)();return(0,p.ib)((()=>t.clients.exportResource({id:n})),(e=>{d(JSON.stringify(e,null,2)),Z(e)}),[]),c?i.ZP.createElement(l.NP,null,i.ZP.createElement(w.N,{isHorizontal:!0,role:"view-realm",className:"pf-u-mt-lg"},i.ZP.createElement(l.cw,{label:e("authDetails"),labelIcon:i.ZP.createElement(g.B,{helpText:"clients-help:authDetails",fieldLabelId:"clients:authDetails"}),fieldId:"client"},i.ZP.createElement(h.Q,{id:"authorizationDetails",readOnly:!0,resizeOrientation:"vertical",value:c,"aria-label":e("authDetails")})),i.ZP.createElement(l.WK,null,i.ZP.createElement(l.zx,{"data-testid":"authorization-export-download",onClick:()=>(()=>{try{u.Z.saveAs(new Blob([(0,E.tR)(P)],{type:"application/json"}),"test-authz-config.json"),a(e("exportAuthDetailsSuccess"),l.Ux.success)}catch(e){r("exportAuthDetailsError",e)}})()},e("common:download")),i.ZP.createElement(l.zx,{"data-testid":"authorization-export-copy",variant:"secondary",onClick:async()=>{try{await navigator.clipboard.writeText(c),a(e("copied"),l.Ux.success)}catch(t){r(e("copyError"),t)}}},e("copy"))))):i.ZP.createElement(I.g,null)};var tn=n(860);const nn=({onChange:e,value:t,save:n,client:r,toggleDownloadDialog:c,toggleDeleteDialog:s})=>{const{t:m}=(0,o.$G)("clients"),[u,p]=(0,d.W)({titleKey:"clients:disableConfirmTitle",messageKey:"clients:disableConfirm",continueButtonLabel:"common:disable",onConfirm:()=>{e(!t),n()}}),P=(0,i.Ye)((()=>{const e=(0,He.K9)(m,r.protocol??"openid-connect");return[{text:r.bearerOnly?i.ZP.createElement(l.u,{"data-testid":"bearer-only-explainer-tooltip",content:m("explainBearerOnly")},i.ZP.createElement(l.__,{"data-testid":"bearer-only-explainer-label",icon:i.ZP.createElement(a.uM,null)},e)):i.ZP.createElement(l.__,null,e)}]}),[r,m]),{hasAccess:Z}=(0,ie.md)(),g=Z("manage-clients")||r.access?.configure,h=[i.ZP.createElement(l.hP,{key:"download",onClick:c},m("downloadAdapterConfig")),i.ZP.createElement(l.hP,{key:"export",onClick:()=>(0,E.M9)(r)},m("common:export")),...!(0,He.WE)(r)&&g?[i.ZP.createElement(l.iz,{key:"divider"}),i.ZP.createElement(l.hP,{"data-testid":"delete-client",key:"delete",onClick:s},m("common:delete"))]:[]];return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(p,null),i.ZP.createElement(v.t,{titleKey:r.clientId,subKey:"clients:clientsExplain",badges:P,divider:!1,isReadOnly:!g,helpTextKey:"clients-help:enableDisable",dropdownItems:h,isEnabled:t,onToggle:t=>{t?(e(t),n()):u()}}))};function ln(){const{t:e}=(0,o.$G)("clients"),{adminClient:t}=(0,p.K3)(),{addAlert:n,addError:a}=(0,m.Z7)(),{realm:u}=(0,T.PL)(),{profileInfo:Z}=(0,P.tN)(),{hasAccess:g}=(0,ie.md)(),h=!Z?.disabledFeatures?.includes("ADMIN_FINE_GRAINED_AUTHZ")&&g("manage-authorization"),v=g("manage-clients"),S=g("view-users"),w=(0,s.k6)(),[C,R]=(0,x.Z)(),[A,L]=(0,x.Z)(),N=(0,c.cI)({shouldUnregister:!1}),{clientId:O}=(0,s.UO)(),[B,U]=(0,i.eJ)(0),$=(0,c.qo)({control:N.control,name:"clientAuthenticatorType",defaultValue:"client-secret"}),[_,K]=(0,i.eJ)(),[F,z]=(0,d.W)({titleKey:"clients:clientDeleteConfirmTitle",messageKey:"clients:clientDeleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:l.Wu.danger,onConfirm:async()=>{try{await t.clients.del({id:O}),n(e("clientDeletedSuccess"),l.Ux.success),w.push((0,Oe.X)({realm:u}))}catch(e){a("clients:clientDeleteError",e)}}}),J=e=>{N.reset({...e}),(0,E.Fz)(e,N.setValue),N.setValue("attributes.request.uris",b(e.attributes?.["request.uris"])),e.attributes?.["acr.loa.map"]&&N.setValue("attributes.acr.loa.map",Object.entries(JSON.parse(e.attributes["acr.loa.map"])).flatMap((([e,t])=>({key:e,value:t})))),e.attributes?.["default.acr.values"]&&N.setValue("attributes.default.acr.values",b(e.attributes["default.acr.values"])),e.attributes?.["post.logout.redirect.uris"]&&N.setValue("attributes.post.logout.redirect.uris",b(e.attributes["post.logout.redirect.uris"])),Object.entries(e.attributes||{}).filter((([e])=>e.startsWith("saml.server.signature"))).map((([e,t])=>N.setValue("attributes."+e.replaceAll(".","$"),t)))};(0,p.ib)((()=>t.clients.findOne({id:O})),(t=>{if(!t)throw new Error(e("common:notFound"));K((0,r.Xh)(t)),J(t)}),[O,B]);const G=async({confirmed:r=!1,messageKey:i="clientSaveSuccess"}={confirmed:!1,messageKey:"clientSaveSuccess"})=>{if(await N.trigger()){if(!_?.publicClient&&_?.clientAuthenticatorType!==$&&!r)return void L();const c=N.getValues();c.attributes?.request.uris&&(c.attributes["request.uris"]=y(c.attributes.request.uris)),c.attributes?.default?.acr?.values&&(c.attributes["default.acr.values"]=y(c.attributes.default.acr.values)),c.attributes?.post.logout.redirect.uris&&(c.attributes["post.logout.redirect.uris"]=y(c.attributes.post.logout.redirect.uris));const o=(0,E.a)(c);Object.entries(c.attributes||{}).filter((([e])=>e.includes("$"))).map((([e,t])=>o.attributes[e.replaceAll("$",".")]=t)),o.attributes?.["acr.loa.map"]&&(o.attributes["acr.loa.map"]=JSON.stringify(Object.fromEntries(o.attributes["acr.loa.map"].filter((({key:e})=>""!==e)).map((({key:e,value:t})=>[e,t])))));try{const a={..._,...o};a.clientId=a.clientId?.trim(),await t.clients.update({id:O},a),J(a),K(a),n(e(i),l.Ux.success)}catch(e){a("clients:clientSaveError",e)}}};if(!_)return i.ZP.createElement(I.g,null);const D=e=>(0,Qt.w)({to:(0,M.O)({realm:u,clientId:O,tab:e}),history:w}),V=e=>(0,Qt.w)({to:(0,Yt.M)({realm:u,clientId:O,tab:e}),history:w});return i.ZP.createElement(i.ZP.Fragment,null,i.ZP.createElement(d.X,{continueButtonLabel:"common:yes",titleKey:e("changeAuthenticatorConfirmTitle",{clientAuthenticatorType:$}),open:A,toggleDialog:L,onConfirm:()=>G({confirmed:!0})},i.ZP.createElement(i.ZP.Fragment,null,e("changeAuthenticatorConfirm",{clientAuthenticatorType:$}),"client-jwt"===$&&i.ZP.createElement(l.bZ,{variant:"info",isInline:!0,title:e("signedJWTConfirm")}))),i.ZP.createElement(z,null),i.ZP.createElement(f,{id:_.id,protocol:_.protocol,open:C,toggleDialog:R}),i.ZP.createElement(c.Qr,{name:"enabled",control:N.control,defaultValue:!0,render:({onChange:e,value:t})=>i.ZP.createElement(nn,{value:t,onChange:e,client:_,save:G,toggleDeleteDialog:F,toggleDownloadDialog:R})}),i.ZP.createElement(l.NP,{variant:"light",className:"pf-u-p-0"},i.ZP.createElement(c.RV,{...N},i.ZP.createElement(Qt.U,{"data-testid":"client-tabs",isBox:!0,mountOnEnter:!0},i.ZP.createElement(l.OK,{id:"settings","data-testid":"clientSettingsTab",title:i.ZP.createElement(l.TP,null,e("common:settings")),...D("settings")},i.ZP.createElement(me,{client:_,save:()=>G(),reset:()=>J(_)})),(!_.publicClient&&!(0,He.WE)(_)||"saml"===_.protocol)&&i.ZP.createElement(l.OK,{id:"keys","data-testid":"keysTab",title:i.ZP.createElement(l.TP,null,e("keys")),...D("keys")},"openid-connect"===_.protocol&&i.ZP.createElement(Ne,{clientId:O,save:G,hasConfigureAccess:_.access?.configure}),"saml"===_.protocol&&i.ZP.createElement(at,{clientId:O,save:G})),!_.publicClient&&!(0,He.WE)(_)&&(v||_.access?.configure)&&i.ZP.createElement(l.OK,{id:"credentials",title:i.ZP.createElement(l.TP,null,e("credentials")),...D("credentials")},i.ZP.createElement(Ie,{key:B,client:_,save:G,refresh:()=>U(B+1)})),i.ZP.createElement(l.OK,{id:"roles","data-testid":"rolesTab",title:i.ZP.createElement(l.TP,null,e("roles")),...D("roles")},i.ZP.createElement(k.y,{loader:async()=>{const e=await t.clients.listRoles({id:O});return(0,r.MR)(e,(e=>e.name?.toUpperCase()))},paginated:!1,messageBundle:"clients",isReadOnly:!(v||_.access?.configure)})),!(0,He.WE)(_)&&!_.bearerOnly&&i.ZP.createElement(l.OK,{id:"clientScopes","data-testid":"clientScopesTab",title:i.ZP.createElement(l.TP,null,e("clientScopes")),...D("clientScopes")},i.ZP.createElement(Qt.U,{defaultLocation:(0,Xt.g)({realm:u,clientId:O,tab:"setup"})},i.ZP.createElement(l.OK,{id:"setup",title:i.ZP.createElement(l.TP,null,e("setup")),...(0,Qt.w)({to:(0,Xt.g)({realm:u,clientId:O,tab:"setup"}),history:w})},i.ZP.createElement(ze,{clientName:_.clientId,clientId:O,protocol:_.protocol,fineGrainedAccess:_.access?.manage})),i.ZP.createElement(l.OK,{id:"evaluate",title:i.ZP.createElement(l.TP,null,e("evaluate")),...(0,Qt.w)({to:(0,Xt.g)({realm:u,clientId:O,tab:"evaluate"}),history:w})},i.ZP.createElement(Ve,{clientId:O,protocol:_.protocol})))),_.authorizationServicesEnabled&&i.ZP.createElement(l.OK,{id:"authorization","data-testid":"authorizationTab",title:i.ZP.createElement(l.TP,null,e("authorization")),...D("authorization")},i.ZP.createElement(Qt.U,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:(0,Yt.M)({realm:u,clientId:O,tab:"settings"})},i.ZP.createElement(l.OK,{id:"settings","data-testid":"authorizationSettings",title:i.ZP.createElement(l.TP,null,e("settings")),...V("settings")},i.ZP.createElement(st,{clientId:O})),i.ZP.createElement(l.OK,{id:"resources","data-testid":"authorizationResources",title:i.ZP.createElement(l.TP,null,e("resources")),...V("resources")},i.ZP.createElement(vt,{clientId:O})),i.ZP.createElement(l.OK,{id:"scopes","data-testid":"authorizationScopes",title:i.ZP.createElement(l.TP,null,e("scopes")),...V("scopes")},i.ZP.createElement(kt,{clientId:O})),i.ZP.createElement(l.OK,{id:"policies","data-testid":"authorizationPolicies",title:i.ZP.createElement(l.TP,null,e("policies")),...V("policies")},i.ZP.createElement(Rt,{clientId:O})),i.ZP.createElement(l.OK,{id:"permissions","data-testid":"authorizationPermissions",title:i.ZP.createElement(l.TP,null,e("common:permissions")),...V("permissions")},i.ZP.createElement(Ot,{clientId:O})),i.ZP.createElement(l.OK,{id:"evaluate","data-testid":"authorizationEvaluate",title:i.ZP.createElement(l.TP,null,e("evaluate")),...V("evaluate")},i.ZP.createElement(Ht,{client:_,save:G})),i.ZP.createElement(l.OK,{id:"export","data-testid":"authorizationExport",title:i.ZP.createElement(l.TP,null,e("common:export")),...V("export")},i.ZP.createElement(en,null)))),_.serviceAccountsEnabled&&S&&i.ZP.createElement(l.OK,{id:"serviceAccount","data-testid":"serviceAccountTab",title:i.ZP.createElement(l.TP,null,e("serviceAccount")),...D("serviceAccount")},i.ZP.createElement(je,{client:_})),i.ZP.createElement(l.OK,{id:"sessions","data-testid":"sessionsTab",title:i.ZP.createElement(l.TP,null,e("sessions")),...D("sessions")},i.ZP.createElement(ue,{client:_})),h&&(v||_.access?.manage)&&i.ZP.createElement(l.OK,{id:"permissions","data-testid":"permissionsTab",title:i.ZP.createElement(l.TP,null,e("common:permissions")),...D("permissions")},i.ZP.createElement(tn.y,{id:_.id,type:"clients"})),i.ZP.createElement(l.OK,{id:"advanced","data-testid":"advancedTab",title:i.ZP.createElement(l.TP,null,e("advanced")),...D("advanced")},i.ZP.createElement(j,{save:G,client:_}))))))}}}]);