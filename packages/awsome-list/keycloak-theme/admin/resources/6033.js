"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6033],{6033:(e,t,l)=>{l.r(t),l.d(t,{default:()=>w});var n=l(5863),a=l(2954),r=l(1576),c=l(3802),i=l(710),s=l(8648),o=l(3172),d=l(8798),m=l(386),u=l(1677),p=l(9766),P=l(4326),E=l(4839),Z=l(8336),f=l(5212),b=l(4206);const h=({clientId:e})=>{const{t}=(0,c.$G)("clients"),{control:l}=(0,r.Gc)(),[a,s]=(0,n.eJ)(!1),[o,u]=(0,n.eJ)(),[p,P]=(0,n.eJ)(""),{adminClient:E}=(0,d.K3)();return(0,d.ib)((()=>{const t={id:e,first:0,max:20,deep:!1,name:p};return E.clients.listAllScopes(t)}),(e=>u(e.map((e=>n.ZP.createElement(i.$m,{key:e.id,value:e},e.name))))),[p]),n.ZP.createElement(i.cw,{label:t("authorizationScopes"),labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:scopes",fieldLabelId:"clients:scopes"}),fieldId:"scopes"},n.ZP.createElement(r.Qr,{name:"scopes",defaultValue:[],control:l,render:({onChange:e,value:l})=>n.ZP.createElement(i.Ph,{toggleId:"scopes",variant:i.TM.typeaheadMulti,chipGroupProps:{numChips:3,expandedText:t("common:hide"),collapsedText:t("common:showRemaining")},onToggle:e=>s(e),isOpen:a,selections:l.map((e=>e.name)),onFilter:(e,t)=>(P(t),o),onSelect:(t,n)=>{const a="string"==typeof n?n:n.name,r=l.find((e=>e.name===a))?l.filter((e=>e.name!==a)):[...l,n];e(r)},onClear:t=>{t.stopPropagation(),P(""),e([])},"aria-label":t("authorizationScopes")},o)}))};var I=l(6179),g=l(1786);function w(){const{t:e}=(0,c.$G)("clients"),[t,l]=(0,n.eJ)(),[w,y]=(0,n.eJ)(),[v,x]=(0,n.eJ)(),{adminClient:T}=(0,d.K3)(),{addAlert:L,addError:R}=(0,P.Z7)(),C=(0,r.cI)({shouldUnregister:!1,mode:"onChange"}),{register:N,errors:k,control:B,setValue:A,handleSubmit:U}=C,{id:F,resourceId:M,realm:S}=(0,a.UO)(),z=(0,a.k6)();(0,d.ib)((()=>Promise.all([T.clients.findOne({id:F}),M?T.clients.getResource({id:F,resourceId:M}):Promise.resolve(void 0),M?T.clients.listPermissionsByResource({id:F,resourceId:M}):Promise.resolve(void 0)])),(([t,n,a])=>{if(!t)throw new Error(e("common:notFound"));l(t),x(a),y(n),((e={})=>{(0,Z.Fz)(e,A)})(n)}),[]);const[D,J]=(0,p.W)({titleKey:"clients:deleteResource",children:n.ZP.createElement(n.ZP.Fragment,null,e("deleteResourceConfirm"),0!==v?.length&&n.ZP.createElement(i.bZ,{variant:"warning",isInline:!0,isPlain:!0,title:e("deleteResourceWarning"),className:"pf-u-pt-lg"},n.ZP.createElement("p",{className:"pf-u-pt-xs"},v?.map((e=>n.ZP.createElement("strong",{key:e.id,className:"pf-u-pr-md"},e.name)))))),continueButtonLabel:"clients:confirm",onConfirm:async()=>{try{await T.clients.delResource({id:F,resourceId:M}),L(e("resourceDeletedSuccess"),i.Ux.success),z.push((0,b.M)({realm:S,clientId:F,tab:"resources"}))}catch(e){R("clients:resourceDeletedError",e)}}});return t?n.ZP.createElement(n.ZP.Fragment,null,n.ZP.createElement(J,null),n.ZP.createElement(u.t,{titleKey:M?w?.name:"clients:createResource",dropdownItems:M?[n.ZP.createElement(i.hP,{key:"delete","data-testid":"delete-resource",onClick:()=>D()},e("common:delete"))]:void 0}),n.ZP.createElement(i.NP,{variant:"light"},n.ZP.createElement(r.RV,{...C},n.ZP.createElement(E.N,{isHorizontal:!0,role:"view-clients",className:"keycloak__resource-details__form",onSubmit:U((async t=>{const l=(0,Z.a)(t);try{if(M)await T.clients.updateResource({id:F,resourceId:M},l);else{const e=await T.clients.createResource({id:F},l);z.push((0,s.$)({realm:S,id:F,resourceId:e._id}))}L(e((M?"update":"create")+"ResourceSuccess"),i.Ux.success)}catch(e){R("clients:resourceSaveError",e)}}))},n.ZP.createElement(i.cw,{label:e("owner"),fieldId:"owner",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:owner",fieldLabelId:"clients:owner"})},n.ZP.createElement(g.F,{id:"owner",value:t.clientId,isReadOnly:!0})),n.ZP.createElement(i.cw,{label:e("common:name"),fieldId:"name",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:resourceName",fieldLabelId:"name"}),helperTextInvalid:e("common:required"),validated:k.name?i.LD.error:i.LD.default,isRequired:!0},n.ZP.createElement(g.F,{id:"name",name:"name",ref:N({required:!0}),validated:k.name?i.LD.error:i.LD.default})),n.ZP.createElement(i.cw,{label:e("displayName"),fieldId:"displayName",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:displayName",fieldLabelId:"name"})},n.ZP.createElement(g.F,{id:"displayName",name:"name",ref:N})),n.ZP.createElement(i.cw,{label:e("type"),fieldId:"type",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:type",fieldLabelId:"type"})},n.ZP.createElement(g.F,{id:"type",name:"type",ref:N})),n.ZP.createElement(i.cw,{label:e("uris"),fieldId:"uris",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:uris",fieldLabelId:"clients:uris"})},n.ZP.createElement(f.B,{name:"uris","aria-label":e("uris"),addButtonLabel:"clients:addUri"})),n.ZP.createElement(h,{clientId:F}),n.ZP.createElement(i.cw,{label:e("iconUri"),fieldId:"iconUri",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:iconUri",fieldLabelId:"clients:iconUri"})},n.ZP.createElement(g.F,{id:"iconUri",name:"icon_uri",ref:N})),n.ZP.createElement(i.cw,{hasNoPaddingTop:!0,label:e("ownerManagedAccess"),labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:ownerManagedAccess",fieldLabelId:"clients:ownerManagedAccess"}),fieldId:"ownerManagedAccess"},n.ZP.createElement(r.Qr,{name:"ownerManagedAccess",control:B,defaultValue:!1,render:({onChange:t,value:l})=>n.ZP.createElement(i.rs,{id:"ownerManagedAccess",label:e("common:on"),labelOff:e("common:off"),isChecked:l,onChange:t})})),n.ZP.createElement(i.cw,{hasNoPaddingTop:!0,label:e("resourceAttribute"),labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:resourceAttribute",fieldLabelId:"clients:resourceAttribute"}),fieldId:"resourceAttribute"},n.ZP.createElement(I.R,{name:"attributes"})),n.ZP.createElement(i.WK,null,n.ZP.createElement("div",{className:"pf-u-mt-md"},n.ZP.createElement(i.zx,{variant:i.Wu.primary,type:"submit","data-testid":"save"},e("common:save")),n.ZP.createElement(i.zx,{variant:"link","data-testid":"cancel",component:e=>n.ZP.createElement(a.rU,{...e,to:(0,b.M)({realm:S,clientId:F,tab:"resources"})})},e("common:cancel")))))))):n.ZP.createElement(o.g,null)}}}]);