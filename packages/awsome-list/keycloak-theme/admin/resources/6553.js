"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6553],{6553:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(710),l=n(5863),c=n(1576),r=n(3802),i=n(2954),o=n(4326),s=n(1677),m=n(8798),d=n(764),p=n(8336),u=n(3413),E=n(1832),g=n(9969),P=n(9280),Z=n(9985),b=n(4839),y=n(386),f=n(8707);const v=()=>{const{t:e}=(0,r.$G)("clients"),{control:t,formState:{errors:n}}=(0,c.Gc)(),i=(0,P.RN)(),[o,s]=(0,l.eJ)(!1);return l.ZP.createElement(b.N,{isHorizontal:!0,role:"manage-clients"},l.ZP.createElement(a.cw,{label:e("clientType"),fieldId:"kc-type",validated:n.protocol?"error":"default",labelIcon:l.ZP.createElement(y.B,{helpText:"clients-help:clientType",fieldLabelId:"clients:clientType"})},l.ZP.createElement(c.Qr,{name:"protocol",defaultValue:"",control:t,render:({onChange:t,value:n})=>l.ZP.createElement(a.Ph,{id:"kc-type",onToggle:s,onSelect:(e,n)=>{t(n.toString()),s(!1)},selections:n,variant:a.TM.single,"aria-label":e("selectEncryptionType"),isOpen:o},i.map((t=>l.ZP.createElement(a.$m,{selected:t===n,key:t,value:t,"data-testid":`option-${t}`},(0,f.K9)(e,t)))))})),l.ZP.createElement(Z._,{hasConfigureAccess:!0}))};function h(){const{t:e}=(0,r.$G)("clients"),{realm:t}=(0,d.PL)(),{adminClient:n}=(0,m.K3)(),P=(0,i.k6)(),[Z,b]=(0,l.eJ)(!1),[y,f]=(0,l.eJ)({protocol:"openid-connect",clientId:"",name:"",description:"",publicClient:!0,authorizationServicesEnabled:!1,serviceAccountsEnabled:!1,implicitFlowEnabled:!1,directAccessGrantsEnabled:!0,standardFlowEnabled:!0,frontchannelLogout:!0}),{addAlert:h,addError:k}=(0,o.Z7)(),C=(0,c.cI)({defaultValues:y}),S=C.watch("protocol"),x=async e=>{await C.trigger()&&(f({...y,...(0,p.a)(C.getValues())}),w()||b(!0),e?.())},w=()=>Z||"openid-connect"!==S,I=()=>{f({...y,...(0,p.a)(C.getValues())}),C.reset({...y,...(0,p.a)(C.getValues())}),b(!1)},T=()=>l.ZP.createElement(a.df,null,l.ZP.createElement(a.sN,null,(({activeStep:t,onNext:n,onBack:c,onClose:r})=>l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(a.zx,{variant:"primary","data-testid":w()?"save":"next",type:"submit",onClick:()=>{x(n)}},w()?e("common:save"):e("common:next")),l.ZP.createElement(a.zx,{variant:"secondary","data-testid":"back",onClick:()=>{I(),c()},isDisabled:t.name===e("generalSettings")},e("common:back")),l.ZP.createElement(a.zx,{"data-testid":"cancel",variant:"link",onClick:r},e("common:cancel")))))),A=e("createClient");return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(s.t,{titleKey:"clients:createClient",subKey:"clients:clientsExplain"}),l.ZP.createElement(a.NP,{variant:"light"},l.ZP.createElement(c.RV,{...C},l.ZP.createElement(a.en,{onClose:()=>P.push((0,E.X)({realm:t})),navAriaLabel:`${A} steps`,mainAriaLabel:`${A} content`,steps:[{id:"generalSettings",name:e("generalSettings"),component:l.ZP.createElement(v,null)},...Z?[{id:"capabilityConfig",name:e("capabilityConfig"),component:l.ZP.createElement(g.J,{protocol:y.protocol})}]:[]],footer:l.ZP.createElement(T,null),onSave:async()=>{try{const l=await n.clients.create({...y,clientId:y.clientId?.trim()});h(e("createSuccess"),a.Ux.success),P.push((0,u.O)({realm:t,clientId:l.id,tab:"settings"}))}catch(e){k("clients:createError",e)}},onGoToStep:e=>{"generalSettings"===e.id?I():x()}}))))}}}]);