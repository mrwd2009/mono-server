"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5879],{5879:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var l=n(5863),c=n(3802),a=n(2954),o=n(710),r=n(2688),s=n(8798),i=n(1677),m=n(4326),p=n(192),d=n(9766),u=n(764),y=n(8336),P=n(3227),E=n(240),Z=n(3255),S=n(8578),g=n(7092),h=n(8801),f=n(8707),C=n(9176);function w(){const{realm:e}=(0,u.PL)(),{t}=(0,c.$G)("client-scopes"),{adminClient:n}=(0,s.K3)(),{addAlert:w,addError:b}=(0,m.Z7)(),[K,k]=(0,l.eJ)(!1),[U,v]=(0,l.eJ)([]),[F,x]=(0,l.eJ)("name"),[J,R]=(0,l.eJ)(E.q5.none),[T,L]=(0,l.eJ)("all"),q=(0,P.Z)(),[N,B]=(0,l.eJ)(0),D=()=>{v([]),B(N+1)},[O,W]=(0,d.W)({titleKey:t("deleteClientScope",{count:U.length,name:U[0]?.name}),messageKey:"client-scopes:deleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:o.Wu.danger,onConfirm:async()=>{try{for(const e of U){try{await(0,E.nY)(n,e)}catch(e){console.warn("could not remove scope",e.response?.data?.errorMessage||e)}await n.clientScopes.del({id:e.id})}w(t("deletedSuccess"),o.Ux.success),D()}catch(e){b("client-scopes:deleteError",e)}}});return l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(W,null),l.ZP.createElement(i.t,{titleKey:"clientScopes",subKey:"client-scopes:clientScopeExplain",helpUrl:C.Z.clientScopesUrl}),l.ZP.createElement(o.NP,{variant:"light",className:"pf-u-p-0"},l.ZP.createElement(p.B,{key:N,loader:async(e,t,l)=>{const c=await n.clientScopes.listDefaultClientScopes(),a=await n.clientScopes.listDefaultOptionalClientScopes(),o=await n.clientScopes.find(),r="name"===F?(0,h.CU)(l):"type"===F?(0,h.Fg)(J):(0,h.H0)(T),s=o.map((e=>({...e,type:c.find((t=>t.name===e.name))?E.vv.default:a.find((t=>t.name===e.name))?E.vv.optional:E.q5.none}))).filter(r);return q(s,(0,P.x)("name")).slice(e,Number(e)+Number(t))},ariaLabelKey:"client-scopes:clientScopeList",searchPlaceholderKey:"name"===F?"client-scopes:searchFor":void 0,isSearching:"name"!==F,searchTypeComponent:l.ZP.createElement(h.EF,{searchType:F,onSelect:e=>x(e),withProtocol:!0}),isPaginated:!0,onSelect:e=>v([...e]),canSelectAll:!0,toolbarItem:l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(h.ZR,{searchType:F,type:J,onSelect:e=>{x(e),L("all"),R(E.q5.none),D()},onType:e=>{R(e),L("all"),D()},protocol:T,onProtocol:e=>{L(e),R(E.q5.none),D()}}),l.ZP.createElement(o.Eg,null,l.ZP.createElement(o.zx,{component:t=>l.ZP.createElement(a.rU,{...t,to:(0,S.r)({realm:e})})},t("createClientScope"))),l.ZP.createElement(o.Eg,null,l.ZP.createElement(Z.a,{selectedRows:U,refresh:D})),l.ZP.createElement(o.Eg,null,l.ZP.createElement(o.Lt,{toggle:l.ZP.createElement(o.ax,{onToggle:k}),isOpen:K,isPlain:!0,dropdownItems:[l.ZP.createElement(o.hP,{key:"action",component:"button",isDisabled:0===U.length,onClick:()=>{O(),k(!1)}},t("common:delete"))]}))),actions:[{title:t("common:delete"),onRowClick:e=>{v([e]),O()}}],columns:[{name:"name",cellRenderer:({id:t,type:n,name:c})=>l.ZP.createElement(a.rU,{key:t,to:(0,g.w)({realm:e,id:t,type:n,tab:"settings"})},c)},{name:"type",displayKey:"client-scopes:assignedType",cellRenderer:e=>l.ZP.createElement(E._g,{clientScope:e,type:e.type,all:!0,onSelect:async l=>{try{await(0,E.Wr)(n,e,l),w(t("clientScopeSuccess"),o.Ux.success),D()}catch(e){b("client-scopes:clientScopeError",e)}}})},{name:"protocol",displayKey:"client-scopes:protocol",cellRenderer:e=>(0,f.K9)(t,e.protocol??"openid-connect"),transforms:[(0,r.dY)(15)]},{name:"attributes['gui.order']",displayKey:"client-scopes:displayOrder",cellFormatters:[(0,y.CU)()],transforms:[(0,r.dY)(15)]},{name:"description",cellFormatters:[(0,y.CU)()]}]})))}}}]);