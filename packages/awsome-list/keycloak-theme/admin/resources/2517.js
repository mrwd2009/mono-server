"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2517],{2517:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(710),n=a(7973),l=a(5863),o=a(3802),i=a(2954),c=a(4326),m=a(9766),d=a(390),s=a(8798);const u=({components:e,onClose:t})=>{const{t:a}=(0,o.$G)("user-federation"),{adminClient:n}=(0,s.K3)(),{addAlert:i,addError:m}=(0,c.Z7)(),[u,P]=(0,l.eJ)(""),[p,E]=(0,l.eJ)(""),[Z,g]=(0,l.eJ)(e.map((e=>e.name)));return l.ZP.createElement(r.u_,{variant:r.vE.small,title:a("managePriorityOrder"),isOpen:!0,onClose:t,actions:[l.ZP.createElement(r.zx,{id:"modal-confirm",key:"confirm",onClick:async()=>{const r=Z.map(((t,a)=>{const r=e.find((e=>e.name===t));return r.config.priority=[a.toString()],n.components.update({id:r.id},r)}));try{await Promise.all(r),i(a("orderChangeSuccess"))}catch(e){m("orderChangeError",e)}t()}},a("common:save")),l.ZP.createElement(r.zx,{id:"modal-cancel",key:"cancel",variant:r.Wu.link,onClick:t},a("common:cancel"))]},l.ZP.createElement(r.wu,{className:"pf-u-pb-lg"},l.ZP.createElement(r.xv,null,a("managePriorityInfo"))),l.ZP.createElement(r.FR,{"aria-label":a("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,onDragFinish:e=>{E(a("common:onDragFinish",{list:e})),g(e)},onDragStart:e=>{P(e),E(a("common:onDragStart",{item:e}))},onDragMove:()=>{E(a("common:onDragMove",{item:u}))},onDragCancel:()=>{E(a("common:onDragCancel"))},itemOrder:Z},(0,d.MR)(e,"config.priority","name").map((e=>l.ZP.createElement(r.LC,{"aria-label":e.name,id:e.name,key:e.name},l.ZP.createElement(r.Vi,null,l.ZP.createElement(r.v7,null,l.ZP.createElement(r.D7,{"aria-label":a("manageOrderItemAria")})),l.ZP.createElement(r.p9,{dataListCells:[l.ZP.createElement(r.KX,{key:e.name,"data-testid":e.name},e.name)]})))))),l.ZP.createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},p))},P=({id:e,title:t,dropdownItems:a,labelText:n,labelColor:o,footerText:c,providerId:m})=>{const[d,s]=(0,l.eJ)(!1),u=(0,i.k6)(),{url:P}=(0,i.$B)();return l.ZP.createElement(r.Zb,{isSelectable:!0,onClick:()=>{u.push(`${P}/${m}/${e}`)}},l.ZP.createElement(r.Ol,null,l.ZP.createElement(r.T$,null,a&&l.ZP.createElement(r.Lt,{"data-testid":`${t}-dropdown`,isPlain:!0,position:"right",toggle:l.ZP.createElement(r.ax,{onToggle:()=>{s(!d)}}),onClick:e=>(e=>{e.stopPropagation()})(e),isOpen:d,dropdownItems:a})),l.ZP.createElement(r.ll,{"data-testid":"keycloak-card-title"},t)),l.ZP.createElement(r.eW,null),l.ZP.createElement(r.iR,null,l.ZP.createElement(r.kC,null,l.ZP.createElement(r.B5,{className:"keycloak--keycloak-card__footer"},c&&c),l.ZP.createElement(r.B5,null,n&&l.ZP.createElement(r.__,{color:o||"gray"},n)))))};var p=a(1677),E=a(764),Z=a(9280),g=a(8336),k=a(729),f=a(9176);function y(){const[e,t]=(0,l.eJ)(),{addAlert:a,addError:d}=(0,c.Z7)(),{t:y}=(0,o.$G)("user-federation"),{realm:v}=(0,E.PL)(),{adminClient:C}=(0,s.K3)(),[b,h]=(0,l.eJ)(0),w=(0,i.k6)(),[D,O]=(0,l.eJ)(!1),$=(0,Z.tN)().componentTypes?.["org.keycloak.storage.UserStorageProvider"]||[];(0,s.ib)((async()=>{const e={parentId:(await C.realms.findOne({realm:v})).id,type:"org.keycloak.storage.UserStorageProvider"};return C.components.find(e)}),(e=>{t(e)}),[b]);const F=(0,l.Ye)((()=>$.map((e=>l.ZP.createElement(r.hP,{key:e.id,onClick:()=>w.push((0,k.A9)({realm:v,providerId:e.id,id:"new"}))},"LDAP"==e.id.toUpperCase()?e.id.toUpperCase():(0,g.LO)(e.id))))),[]),I={variant:"link",onClick:()=>O(!0),lowerButtonTitle:y("managePriorities")};let x;const[T,J]=(0,l.eJ)(""),[L,N]=(0,m.W)({titleKey:y("userFedDeleteConfirmTitle"),messageKey:y("userFedDeleteConfirm"),continueButtonLabel:"common:delete",continueButtonVariant:r.Wu.danger,onConfirm:async()=>{try{await C.components.del({id:T}),h((new Date).getTime()),a(y("userFedDeletedSuccess"),r.Ux.success)}catch(e){d("user-federation:userFedDeleteError",e)}}});return e&&(x=e.sort(((e,t)=>`${e.name}`<`${t.name}`?-1:1)).map(((e,t)=>{const a=[l.ZP.createElement(r.hP,{key:`${t}-cardDelete`,onClick:()=>{var t;t=e.id,J(t),L()},"data-testid":"card-delete"},y("common:delete"))];return l.ZP.createElement(r.tf,{key:t,className:"keycloak-admin--user-federation__gallery-item"},l.ZP.createElement(P,{id:e.id,dropdownItems:a,providerId:e.providerId,title:e.name,footerText:(0,g.LO)(e.providerId),labelText:"false"!==e.config.enabled[0]?`${y("common:enabled")}`:`${y("common:disabled")}`,labelColor:"false"!==e.config.enabled[0]?"blue":"gray"}))}))),l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(N,null),D&&e&&l.ZP.createElement(u,{onClose:()=>O(!1),components:e.filter((e=>e.config?.enabled))}),l.ZP.createElement(p.t,{titleKey:"userFederation",subKey:"user-federation:userFederationExplain",helpUrl:f.Z.userFederationUrl,...e&&e.length>0?{lowerDropdownItems:F,lowerDropdownMenuTitle:"user-federation:addNewProvider",lowerButton:I}:{}}),l.ZP.createElement(r.NP,null,e&&e.length>0?l.ZP.createElement(r.ri,{hasGutter:!0},x):l.ZP.createElement(l.ZP.Fragment,null,l.ZP.createElement(r.wu,null,l.ZP.createElement(r.xv,{component:r.qO.p},y("getStarted"))),l.ZP.createElement(r.wu,null,l.ZP.createElement(r.xv,{className:"pf-u-mt-lg",component:r.qO.h2},y("providers"))),l.ZP.createElement("hr",{className:"pf-u-mb-lg"}),l.ZP.createElement(r.ri,{hasGutter:!0},$.map((e=>l.ZP.createElement(r.Zb,{key:e.id,className:"keycloak-empty-state-card",isHoverable:!0,onClick:()=>w.push((0,k.A9)({realm:v,providerId:e.id})),"data-testid":`${e.id}-card`},l.ZP.createElement(r.ll,null,l.ZP.createElement(r.P,{hasGutter:!0},l.ZP.createElement(r.JE,null,l.ZP.createElement(n.VH,{size:"lg"})),l.ZP.createElement(r.JE,{isFilled:!0},y("addProvider",{provider:(0,g.LO)(e.id),count:4})))))))))))}}}]);