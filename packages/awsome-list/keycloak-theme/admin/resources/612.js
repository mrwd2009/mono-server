"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[612],{612:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(5863),l=a(2954),i=a(1576),c=a(3802),r=a(710),o=a(4839),m=a(386),d=a(1677),s=a(4206),p=a(8798),u=a(4326),E=a(1786),P=a(4836),Z=a(5937);function h(){const{t:e}=(0,c.$G)("clients"),{id:t,scopeId:a,realm:h}=(0,l.UO)(),f=(0,l.k6)(),{adminClient:I}=(0,p.K3)(),{addAlert:b,addError:v}=(0,u.Z7)(),[y,w]=(0,P.Z)(),[N,S]=(0,n.eJ)(),{register:U,reset:k,handleSubmit:g,formState:{errors:x}}=(0,i.cI)({mode:"onChange"});return(0,p.ib)((async()=>{if(a){const n=await I.clients.getAuthorizationScope({id:t,scopeId:a});if(!n)throw new Error(e("common:notFound"));return n}}),(e=>{S(e),k({...e})}),[]),n.ZP.createElement(n.ZP.Fragment,null,n.ZP.createElement(Z.I,{clientId:t,open:y,toggleDialog:w,selectedScope:N,refresh:()=>f.push((0,s.M)({realm:h,clientId:t,tab:"scopes"}))}),n.ZP.createElement(d.t,{titleKey:a?N?.name:e("clients:createAuthorizationScope"),dropdownItems:a?[n.ZP.createElement(r.hP,{key:"delete","data-testid":"delete-resource",onClick:()=>w()},e("common:delete"))]:void 0}),n.ZP.createElement(r.NP,{variant:"light"},n.ZP.createElement(o.N,{isHorizontal:!0,role:"view-clients",onSubmit:g((async n=>{try{a?(await I.clients.updateAuthorizationScope({id:t,scopeId:a},n),S(n)):(await I.clients.createAuthorizationScope({id:t},{name:n.name,displayName:n.displayName,iconUri:n.iconUri}),f.push((0,s.M)({realm:h,clientId:t,tab:"scopes"}))),b(e((a?"update":"create")+"ScopeSuccess"),r.Ux.success)}catch(e){v("clients:scopeSaveError",e)}}))},n.ZP.createElement(r.cw,{label:e("common:name"),fieldId:"name",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:scopeName",fieldLabelId:"name"}),helperTextInvalid:e("common:required"),validated:x.name?r.LD.error:r.LD.default,isRequired:!0},n.ZP.createElement(E.F,{id:"name",name:"name",ref:U({required:!0}),validated:x.name?r.LD.error:r.LD.default})),n.ZP.createElement(r.cw,{label:e("displayName"),fieldId:"displayName",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:scopeDisplayName",fieldLabelId:"displayName"})},n.ZP.createElement(E.F,{id:"displayName",name:"displayName",ref:U})),n.ZP.createElement(r.cw,{label:e("iconUri"),fieldId:"iconUri",labelIcon:n.ZP.createElement(m.B,{helpText:"clients-help:iconUri",fieldLabelId:"clients:iconUri"})},n.ZP.createElement(E.F,{id:"iconUri",name:"iconUri",ref:U})),n.ZP.createElement(r.WK,null,n.ZP.createElement("div",{className:"pf-u-mt-md"},n.ZP.createElement(r.zx,{variant:r.Wu.primary,type:"submit","data-testid":"save"},e("common:save")),N?n.ZP.createElement(r.zx,{variant:"link","data-testid":"revert",onClick:()=>k({...N})},e("common:revert")):n.ZP.createElement(r.zx,{variant:"link","data-testid":"cancel",component:e=>n.ZP.createElement(l.rU,{...e,to:(0,s.M)({realm:h,clientId:t,tab:"scopes"})})},e("common:cancel")))))))}}}]);