"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7876],{7876:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var r=a(5863),n=a(2954),l=a(3802),i=a(390),c=a(710),s=a(1677),o=a(8798),m=a(192),d=a(764),u=a(4326),P=a(9280),p=a(8336),Z=a(9766),E=a(7973),g=a(5256);const v=({icon:e})=>{const t={style:{height:"2em",width:"2em"}};switch(e){case"bitbucket":return r.ZP.createElement("img",{src:g.Z.resourceUrl+"/bitbucket-brands.svg",...t,"aria-label":"bitbucket icon"});case"microsoft":return r.ZP.createElement("img",{src:g.Z.resourceUrl+"/microsoft-brands.svg",...t,"aria-label":"microsoft icon"});case"instagram":return r.ZP.createElement("img",{src:g.Z.resourceUrl+"/instagram-brands.svg",...t,"aria-label":"instagram icon"});case"paypal":return r.ZP.createElement("img",{src:g.Z.resourceUrl+"/paypal-brands.svg",...t,"aria-label":"paypal icon"});default:return null}},y=({provider:e})=>{const t={size:"lg"};switch(e.id){case"github":return r.ZP.createElement(E.ET,{...t});case"facebook":return r.ZP.createElement(E.MG,{...t});case"gitlab":return r.ZP.createElement(E.Ts,{...t});case"google":return r.ZP.createElement(E._8,{...t});case"linkedin":return r.ZP.createElement(E.pA,{...t});case"openshift-v3":case"openshift-v4":return r.ZP.createElement(E.LO,{...t});case"stackoverflow":return r.ZP.createElement(E.Bx,{...t});case"twitter":return r.ZP.createElement(E.Zm,{...t});case"microsoft":case"bitbucket":case"instagram":case"paypal":return r.ZP.createElement(v,{icon:e.id});default:return r.ZP.createElement(E.FM,{...t})}},b=({providers:e,onClose:t})=>{const{t:a}=(0,l.$G)("identity-providers"),{adminClient:n}=(0,o.K3)(),{addAlert:s,addError:m}=(0,u.Z7)(),[d,P]=(0,r.eJ)(""),[p,Z]=(0,r.eJ)(""),[E,g]=(0,r.eJ)(e.map((e=>e.alias)));return r.ZP.createElement(c.u_,{variant:c.vE.small,title:a("manageDisplayOrder"),isOpen:!0,onClose:t,actions:[r.ZP.createElement(c.zx,{id:"modal-confirm","data-testid":"confirm",key:"confirm",onClick:async()=>{const r=E.map(((t,a)=>{const r=e.find((e=>e.alias===t));return r.config.guiOrder=a,n.identityProviders.update({alias:t},r)}));try{await Promise.all(r),s(a("orderChangeSuccess"))}catch(e){m("identity-providers:orderChangeError",e)}t()}},a("common:save")),r.ZP.createElement(c.zx,{id:"modal-cancel","data-testid":"cancel",key:"cancel",variant:c.Wu.link,onClick:t},a("common:cancel"))]},r.ZP.createElement(c.wu,{className:"pf-u-pb-lg"},r.ZP.createElement(c.xv,null,a("orderDialogIntro"))),r.ZP.createElement(c.FR,{"aria-label":a("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,onDragFinish:e=>{Z(a("common:onDragFinish",{list:e})),g(e)},onDragStart:e=>{P(e),Z(a("common:onDragStart",{item:e}))},onDragMove:()=>{Z(a("common:onDragMove",{item:d}))},onDragCancel:()=>{Z(a("common:onDragCancel"))},itemOrder:E},(0,i.MR)(e,"config.guiOrder","alias").map((e=>r.ZP.createElement(c.LC,{"aria-label":e.alias,id:e.alias,key:e.alias},r.ZP.createElement(c.Vi,null,r.ZP.createElement(c.v7,null,r.ZP.createElement(c.D7,{"aria-label":a("manageOrderItemAria")})),r.ZP.createElement(c.p9,{dataListCells:[r.ZP.createElement(c.KX,{key:e.alias,"data-testid":e.alias},e.alias)]})))))),r.ZP.createElement("div",{className:"pf-screen-reader","aria-live":"assertive"},p))};var f=a(5309),h=a(822),k=a(9176);function C(){const{t:e}=(0,l.$G)("identity-providers"),t=(0,i.vM)((0,P.tN)().identityProviders,"groupName"),{realm:a}=(0,d.PL)(),E=(0,n.k6)(),[g,v]=(0,r.eJ)(0),C=()=>v(g+1),[w,O]=(0,r.eJ)(!1),[D,F]=(0,r.eJ)(!1),[I,K]=(0,r.eJ)(),[J,N]=(0,r.eJ)(),{adminClient:U}=(0,o.K3)(),{addAlert:x,addError:M}=(0,u.Z7)();(0,o.ib)((async()=>{const t=await U.realms.findOne({realm:a});if(!t)throw new Error(e("common:notFound"));return t.identityProviders}),(e=>{K((0,i.MR)(e,["config.guiOrder","alias"]))}),[g]);const[L,R]=(0,Z.W)({titleKey:"identity-providers:deleteProvider",messageKey:e("deleteConfirm",{provider:J?.alias}),continueButtonLabel:"common:delete",continueButtonVariant:c.Wu.danger,onConfirm:async()=>{try{await U.identityProviders.del({alias:J.alias}),K([...I.filter((e=>e.alias!==J?.alias))]),C(),x(e("deletedSuccess"),c.Ux.success)}catch(e){M("identity-providers:deleteError",e)}}});return I?r.ZP.createElement(r.ZP.Fragment,null,r.ZP.createElement(R,null),D&&r.ZP.createElement(b,{onClose:()=>{F(!1),C()},providers:I.filter((e=>e.enabled))}),r.ZP.createElement(s.t,{titleKey:"common:identityProviders",subKey:"identity-providers:listExplain",helpUrl:k.Z.identityProvidersUrl}),r.ZP.createElement(c.NP,{variant:0===I.length?"default":"light",className:0===I.length?"":"pf-u-p-0"},0===I.length&&r.ZP.createElement(r.ZP.Fragment,null,r.ZP.createElement(c.wu,null,r.ZP.createElement(c.xv,{component:c.qO.p},e("getStarted"))),Object.keys(t).map((e=>r.ZP.createElement(r.HY,{key:e},r.ZP.createElement(c.wu,null,r.ZP.createElement(c.xv,{className:"pf-u-mt-lg",component:c.qO.h2},e,":")),r.ZP.createElement("hr",{className:"pf-u-mb-lg"}),r.ZP.createElement(c.ri,{hasGutter:!0},(0,i.MR)(t[e],"name").map((e=>r.ZP.createElement(c.Zb,{className:"keycloak-empty-state-card",key:e.id,isHoverable:!0,"data-testid":`${e.id}-card`,onClick:()=>{return t=e.id,E.push((0,h.t)({realm:a,providerId:t}));var t}},r.ZP.createElement(c.ll,null,r.ZP.createElement(c.P,{hasGutter:!0},r.ZP.createElement(c.JE,null,r.ZP.createElement(y,{provider:e})),r.ZP.createElement(c.JE,{isFilled:!0},e.name))))))))))),0!==I.length&&r.ZP.createElement(m.B,{loader:I,ariaLabelKey:"common:identityProviders",searchPlaceholderKey:"identity-providers:searchForProvider",toolbarItem:r.ZP.createElement(r.ZP.Fragment,null,r.ZP.createElement(c.Eg,null,r.ZP.createElement(c.Lt,{"data-testid":"addProviderDropdown",toggle:r.ZP.createElement(c.Z_,{onToggle:()=>O(!w),isPrimary:!0},e("addProvider")),isOpen:w,dropdownItems:Object.keys(t).map((e=>r.ZP.createElement(c.pb,{key:e,label:e},(0,i.MR)(t[e],"name").map((e=>r.ZP.createElement(c.hP,{key:e.id,value:e.id,component:r.ZP.createElement(n.rU,{to:(0,h.t)({realm:a,providerId:e.id}),"data-testid":e.id},e.name)}))))))})),r.ZP.createElement(c.Eg,null,r.ZP.createElement(c.zx,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>F(!0)},e("manageDisplayOrder")))),actions:[{title:e("common:delete"),onRowClick:e=>{N(e),L()}}],columns:[{name:"alias",displayKey:"common:name",cellRenderer:t=>r.ZP.createElement(n.rU,{key:t.providerId,to:(0,f.Q)({realm:a,providerId:t.providerId,alias:t.alias,tab:"settings"})},t.alias,!t.enabled&&r.ZP.createElement(c.Ct,{key:`${t.providerId}-disabled`,isRead:!0,className:"pf-u-ml-sm"},e("common:disabled")))},{name:"providerId",displayKey:"identity-providers:providerDetails",cellFormatters:[(0,p.UY)()]}]}))):r.ZP.createElement(c.$j,null)}}}]);